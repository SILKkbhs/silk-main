(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Z_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ud={exports:{}},Qs={},cd={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fy;function UC(){if(fy)return ce;fy=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function _(I){return I===null||typeof I!="object"?null:(I=y&&I[y]||I["@@iterator"],typeof I=="function"?I:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,N={};function A(I,L,ue){this.props=I,this.context=L,this.refs=N,this.updater=ue||S}A.prototype.isReactComponent={},A.prototype.setState=function(I,L){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,L,"setState")},A.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function U(){}U.prototype=A.prototype;function B(I,L,ue){this.props=I,this.context=L,this.refs=N,this.updater=ue||S}var b=B.prototype=new U;b.constructor=B,C(b,A.prototype),b.isPureReactComponent=!0;var O=Array.isArray,H=Object.prototype.hasOwnProperty,j={current:null},J={key:!0,ref:!0,__self:!0,__source:!0};function $(I,L,ue){var pe,ye={},ve=null,Pe=null;if(L!=null)for(pe in L.ref!==void 0&&(Pe=L.ref),L.key!==void 0&&(ve=""+L.key),L)H.call(L,pe)&&!J.hasOwnProperty(pe)&&(ye[pe]=L[pe]);var xe=arguments.length-2;if(xe===1)ye.children=ue;else if(1<xe){for(var Me=Array(xe),bt=0;bt<xe;bt++)Me[bt]=arguments[bt+2];ye.children=Me}if(I&&I.defaultProps)for(pe in xe=I.defaultProps,xe)ye[pe]===void 0&&(ye[pe]=xe[pe]);return{$$typeof:t,type:I,key:ve,ref:Pe,props:ye,_owner:j.current}}function ge(I,L){return{$$typeof:t,type:I.type,key:L,ref:I.ref,props:I.props,_owner:I._owner}}function Ie(I){return typeof I=="object"&&I!==null&&I.$$typeof===t}function dt(I){var L={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(ue){return L[ue]})}var ee=/\/+/g;function Ee(I,L){return typeof I=="object"&&I!==null&&I.key!=null?dt(""+I.key):L.toString(36)}function Se(I,L,ue,pe,ye){var ve=typeof I;(ve==="undefined"||ve==="boolean")&&(I=null);var Pe=!1;if(I===null)Pe=!0;else switch(ve){case"string":case"number":Pe=!0;break;case"object":switch(I.$$typeof){case t:case e:Pe=!0}}if(Pe)return Pe=I,ye=ye(Pe),I=pe===""?"."+Ee(Pe,0):pe,O(ye)?(ue="",I!=null&&(ue=I.replace(ee,"$&/")+"/"),Se(ye,L,ue,"",function(bt){return bt})):ye!=null&&(Ie(ye)&&(ye=ge(ye,ue+(!ye.key||Pe&&Pe.key===ye.key?"":(""+ye.key).replace(ee,"$&/")+"/")+I)),L.push(ye)),1;if(Pe=0,pe=pe===""?".":pe+":",O(I))for(var xe=0;xe<I.length;xe++){ve=I[xe];var Me=pe+Ee(ve,xe);Pe+=Se(ve,L,ue,Me,ye)}else if(Me=_(I),typeof Me=="function")for(I=Me.call(I),xe=0;!(ve=I.next()).done;)ve=ve.value,Me=pe+Ee(ve,xe++),Pe+=Se(ve,L,ue,Me,ye);else if(ve==="object")throw L=String(I),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return Pe}function Fe(I,L,ue){if(I==null)return I;var pe=[],ye=0;return Se(I,pe,"","",function(ve){return L.call(ue,ve,ye++)}),pe}function Qe(I){if(I._status===-1){var L=I._result;L=L(),L.then(function(ue){(I._status===0||I._status===-1)&&(I._status=1,I._result=ue)},function(ue){(I._status===0||I._status===-1)&&(I._status=2,I._result=ue)}),I._status===-1&&(I._status=0,I._result=L)}if(I._status===1)return I._result.default;throw I._result}var le={current:null},K={transition:null},te={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:K,ReactCurrentOwner:j};function G(){throw Error("act(...) is not supported in production builds of React.")}return ce.Children={map:Fe,forEach:function(I,L,ue){Fe(I,function(){L.apply(this,arguments)},ue)},count:function(I){var L=0;return Fe(I,function(){L++}),L},toArray:function(I){return Fe(I,function(L){return L})||[]},only:function(I){if(!Ie(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},ce.Component=A,ce.Fragment=n,ce.Profiler=o,ce.PureComponent=B,ce.StrictMode=i,ce.Suspense=f,ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,ce.act=G,ce.cloneElement=function(I,L,ue){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var pe=C({},I.props),ye=I.key,ve=I.ref,Pe=I._owner;if(L!=null){if(L.ref!==void 0&&(ve=L.ref,Pe=j.current),L.key!==void 0&&(ye=""+L.key),I.type&&I.type.defaultProps)var xe=I.type.defaultProps;for(Me in L)H.call(L,Me)&&!J.hasOwnProperty(Me)&&(pe[Me]=L[Me]===void 0&&xe!==void 0?xe[Me]:L[Me])}var Me=arguments.length-2;if(Me===1)pe.children=ue;else if(1<Me){xe=Array(Me);for(var bt=0;bt<Me;bt++)xe[bt]=arguments[bt+2];pe.children=xe}return{$$typeof:t,type:I.type,key:ye,ref:ve,props:pe,_owner:Pe}},ce.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:l,_context:I},I.Consumer=I},ce.createElement=$,ce.createFactory=function(I){var L=$.bind(null,I);return L.type=I,L},ce.createRef=function(){return{current:null}},ce.forwardRef=function(I){return{$$typeof:d,render:I}},ce.isValidElement=Ie,ce.lazy=function(I){return{$$typeof:g,_payload:{_status:-1,_result:I},_init:Qe}},ce.memo=function(I,L){return{$$typeof:m,type:I,compare:L===void 0?null:L}},ce.startTransition=function(I){var L=K.transition;K.transition={};try{I()}finally{K.transition=L}},ce.unstable_act=G,ce.useCallback=function(I,L){return le.current.useCallback(I,L)},ce.useContext=function(I){return le.current.useContext(I)},ce.useDebugValue=function(){},ce.useDeferredValue=function(I){return le.current.useDeferredValue(I)},ce.useEffect=function(I,L){return le.current.useEffect(I,L)},ce.useId=function(){return le.current.useId()},ce.useImperativeHandle=function(I,L,ue){return le.current.useImperativeHandle(I,L,ue)},ce.useInsertionEffect=function(I,L){return le.current.useInsertionEffect(I,L)},ce.useLayoutEffect=function(I,L){return le.current.useLayoutEffect(I,L)},ce.useMemo=function(I,L){return le.current.useMemo(I,L)},ce.useReducer=function(I,L,ue){return le.current.useReducer(I,L,ue)},ce.useRef=function(I){return le.current.useRef(I)},ce.useState=function(I){return le.current.useState(I)},ce.useSyncExternalStore=function(I,L,ue){return le.current.useSyncExternalStore(I,L,ue)},ce.useTransition=function(){return le.current.useTransition()},ce.version="18.3.1",ce}var py;function Fh(){return py||(py=1,cd.exports=UC()),cd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function BC(){if(my)return Qs;my=1;var t=Fh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(d,f,m){var g,y={},_=null,S=null;m!==void 0&&(_=""+m),f.key!==void 0&&(_=""+f.key),f.ref!==void 0&&(S=f.ref);for(g in f)i.call(f,g)&&!l.hasOwnProperty(g)&&(y[g]=f[g]);if(d&&d.defaultProps)for(g in f=d.defaultProps,f)y[g]===void 0&&(y[g]=f[g]);return{$$typeof:e,type:d,key:_,ref:S,props:y,_owner:o.current}}return Qs.Fragment=n,Qs.jsx=u,Qs.jsxs=u,Qs}var gy;function WC(){return gy||(gy=1,ud.exports=BC()),ud.exports}var w=WC(),D=Fh();const zC=Z_(D);var ol={},dd={exports:{}},Pt={},hd={exports:{}},fd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function $C(){return yy||(yy=1,(function(t){function e(K,te){var G=K.length;K.push(te);e:for(;0<G;){var I=G-1>>>1,L=K[I];if(0<o(L,te))K[I]=te,K[G]=L,G=I;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var te=K[0],G=K.pop();if(G!==te){K[0]=G;e:for(var I=0,L=K.length,ue=L>>>1;I<ue;){var pe=2*(I+1)-1,ye=K[pe],ve=pe+1,Pe=K[ve];if(0>o(ye,G))ve<L&&0>o(Pe,ye)?(K[I]=Pe,K[ve]=G,I=ve):(K[I]=ye,K[pe]=G,I=pe);else if(ve<L&&0>o(Pe,G))K[I]=Pe,K[ve]=G,I=ve;else break e}}return te}function o(K,te){var G=K.sortIndex-te.sortIndex;return G!==0?G:K.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var f=[],m=[],g=1,y=null,_=3,S=!1,C=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(K){for(var te=n(m);te!==null;){if(te.callback===null)i(m);else if(te.startTime<=K)i(m),te.sortIndex=te.expirationTime,e(f,te);else break;te=n(m)}}function O(K){if(N=!1,b(K),!C)if(n(f)!==null)C=!0,Qe(H);else{var te=n(m);te!==null&&le(O,te.startTime-K)}}function H(K,te){C=!1,N&&(N=!1,U($),$=-1),S=!0;var G=_;try{for(b(te),y=n(f);y!==null&&(!(y.expirationTime>te)||K&&!dt());){var I=y.callback;if(typeof I=="function"){y.callback=null,_=y.priorityLevel;var L=I(y.expirationTime<=te);te=t.unstable_now(),typeof L=="function"?y.callback=L:y===n(f)&&i(f),b(te)}else i(f);y=n(f)}if(y!==null)var ue=!0;else{var pe=n(m);pe!==null&&le(O,pe.startTime-te),ue=!1}return ue}finally{y=null,_=G,S=!1}}var j=!1,J=null,$=-1,ge=5,Ie=-1;function dt(){return!(t.unstable_now()-Ie<ge)}function ee(){if(J!==null){var K=t.unstable_now();Ie=K;var te=!0;try{te=J(!0,K)}finally{te?Ee():(j=!1,J=null)}}else j=!1}var Ee;if(typeof B=="function")Ee=function(){B(ee)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Fe=Se.port2;Se.port1.onmessage=ee,Ee=function(){Fe.postMessage(null)}}else Ee=function(){A(ee,0)};function Qe(K){J=K,j||(j=!0,Ee())}function le(K,te){$=A(function(){K(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){C||S||(C=!0,Qe(H))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(K){switch(_){case 1:case 2:case 3:var te=3;break;default:te=_}var G=_;_=te;try{return K()}finally{_=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,te){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var G=_;_=K;try{return te()}finally{_=G}},t.unstable_scheduleCallback=function(K,te,G){var I=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?I+G:I):G=I,K){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=G+L,K={id:g++,callback:te,priorityLevel:K,startTime:G,expirationTime:L,sortIndex:-1},G>I?(K.sortIndex=G,e(m,K),n(f)===null&&K===n(m)&&(N?(U($),$=-1):N=!0,le(O,G-I))):(K.sortIndex=L,e(f,K),C||S||(C=!0,Qe(H))),K},t.unstable_shouldYield=dt,t.unstable_wrapCallback=function(K){var te=_;return function(){var G=_;_=te;try{return K.apply(this,arguments)}finally{_=G}}}})(fd)),fd}var vy;function HC(){return vy||(vy=1,hd.exports=$C()),hd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function KC(){if(_y)return Pt;_y=1;var t=Fh(),e=HC();function n(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){u(r,s),u(r+"Capture",s)}function u(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function _(r){return f.call(y,r)?!0:f.call(g,r)?!1:m.test(r)?y[r]=!0:(g[r]=!0,!1)}function S(r,s,a,c){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function C(r,s,a,c){if(s===null||typeof s>"u"||S(r,s,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function N(r,s,a,c,h,p,v){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=p,this.removeEmptyString=v}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){A[r]=new N(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];A[s]=new N(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){A[r]=new N(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){A[r]=new N(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){A[r]=new N(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){A[r]=new N(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){A[r]=new N(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){A[r]=new N(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){A[r]=new N(r,5,!1,r.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function B(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(U,B);A[s]=new N(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(U,B);A[s]=new N(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(U,B);A[s]=new N(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){A[r]=new N(r,1,!1,r.toLowerCase(),null,!1,!1)}),A.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){A[r]=new N(r,1,!1,r.toLowerCase(),null,!0,!0)});function b(r,s,a,c){var h=A.hasOwnProperty(s)?A[s]:null;(h!==null?h.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(C(s,a,h,c)&&(a=null),c||h===null?_(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):h.mustUseProperty?r[h.propertyName]=a===null?h.type===3?!1:"":a:(s=h.attributeName,c=h.attributeNamespace,a===null?r.removeAttribute(s):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?r.setAttributeNS(c,s,a):r.setAttribute(s,a))))}var O=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),j=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),ge=Symbol.for("react.profiler"),Ie=Symbol.for("react.provider"),dt=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),Fe=Symbol.for("react.memo"),Qe=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),K=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=K&&r[K]||r["@@iterator"],typeof r=="function"?r:null)}var G=Object.assign,I;function L(r){if(I===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);I=s&&s[1]||""}return`
`+I+r}var ue=!1;function pe(r,s){if(!r||ue)return"";ue=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(R){var c=R}Reflect.construct(r,[],s)}else{try{s.call()}catch(R){c=R}r.call(s.prototype)}else{try{throw Error()}catch(R){c=R}r()}}catch(R){if(R&&c&&typeof R.stack=="string"){for(var h=R.stack.split(`
`),p=c.stack.split(`
`),v=h.length-1,E=p.length-1;1<=v&&0<=E&&h[v]!==p[E];)E--;for(;1<=v&&0<=E;v--,E--)if(h[v]!==p[E]){if(v!==1||E!==1)do if(v--,E--,0>E||h[v]!==p[E]){var x=`
`+h[v].replace(" at new "," at ");return r.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",r.displayName)),x}while(1<=v&&0<=E);break}}}finally{ue=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?L(r):""}function ye(r){switch(r.tag){case 5:return L(r.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return r=pe(r.type,!1),r;case 11:return r=pe(r.type.render,!1),r;case 1:return r=pe(r.type,!0),r;default:return""}}function ve(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case J:return"Fragment";case j:return"Portal";case ge:return"Profiler";case $:return"StrictMode";case Ee:return"Suspense";case Se:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case dt:return(r.displayName||"Context")+".Consumer";case Ie:return(r._context.displayName||"Context")+".Provider";case ee:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Fe:return s=r.displayName||null,s!==null?s:ve(r.type)||"Memo";case Qe:s=r._payload,r=r._init;try{return ve(r(s))}catch{}}return null}function Pe(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(s);case 8:return s===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function xe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Me(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bt(r){var s=Me(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,p=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return h.call(this)},set:function(v){c=""+v,p.call(this,v)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Qo(r){r._valueTracker||(r._valueTracker=bt(r))}function _p(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return r&&(c=Me(r)?r.checked?"true":"false":r.value),r=c,r!==a?(s.setValue(r),!0):!1}function Xo(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function gu(r,s){var a=s.checked;return G({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function wp(r,s){var a=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;a=xe(s.value!=null?s.value:a),r._wrapperState={initialChecked:c,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ep(r,s){s=s.checked,s!=null&&b(r,"checked",s,!1)}function yu(r,s){Ep(r,s);var a=xe(s.value),c=s.type;if(a!=null)c==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(c==="submit"||c==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?vu(r,s.type,a):s.hasOwnProperty("defaultValue")&&vu(r,s.type,xe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Sp(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function vu(r,s,a){(s!=="number"||Xo(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var ds=Array.isArray;function li(r,s,a,c){if(r=r.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<r.length;a++)h=s.hasOwnProperty("$"+r[a].value),r[a].selected!==h&&(r[a].selected=h),h&&c&&(r[a].defaultSelected=!0)}else{for(a=""+xe(a),s=null,h=0;h<r.length;h++){if(r[h].value===a){r[h].selected=!0,c&&(r[h].defaultSelected=!0);return}s!==null||r[h].disabled||(s=r[h])}s!==null&&(s.selected=!0)}}function _u(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(n(91));return G({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function xp(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(n(92));if(ds(a)){if(1<a.length)throw Error(n(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:xe(a)}}function Cp(r,s){var a=xe(s.value),c=xe(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),c!=null&&(r.defaultValue=""+c)}function Tp(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function Ip(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wu(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?Ip(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Jo,kp=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,c,h){MSApp.execUnsafeLocalFunction(function(){return r(s,a,c,h)})}:r})(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Jo=Jo||document.createElement("div"),Jo.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Jo.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function hs(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$S=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(r){$S.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),fs[s]=fs[r]})});function Pp(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||fs.hasOwnProperty(r)&&fs[r]?(""+s).trim():s+"px"}function Np(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=Pp(a,s[a],c);a==="float"&&(a="cssFloat"),c?r.setProperty(a,h):r[a]=h}}var HS=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eu(r,s){if(s){if(HS[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(n(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(n(61))}if(s.style!=null&&typeof s.style!="object")throw Error(n(62))}}function Su(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xu=null;function Cu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tu=null,ui=null,ci=null;function Rp(r){if(r=Os(r)){if(typeof Tu!="function")throw Error(n(280));var s=r.stateNode;s&&(s=Ea(s),Tu(r.stateNode,r.type,s))}}function Ap(r){ui?ci?ci.push(r):ci=[r]:ui=r}function bp(){if(ui){var r=ui,s=ci;if(ci=ui=null,Rp(r),s)for(r=0;r<s.length;r++)Rp(s[r])}}function Dp(r,s){return r(s)}function Mp(){}var Iu=!1;function Op(r,s,a){if(Iu)return r(s,a);Iu=!0;try{return Dp(r,s,a)}finally{Iu=!1,(ui!==null||ci!==null)&&(Mp(),bp())}}function ps(r,s){var a=r.stateNode;if(a===null)return null;var c=Ea(a);if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(n(231,s,typeof a));return a}var ku=!1;if(d)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){ku=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{ku=!1}function KS(r,s,a,c,h,p,v,E,x){var R=Array.prototype.slice.call(arguments,3);try{s.apply(a,R)}catch(F){this.onError(F)}}var gs=!1,Zo=null,ea=!1,Pu=null,GS={onError:function(r){gs=!0,Zo=r}};function qS(r,s,a,c,h,p,v,E,x){gs=!1,Zo=null,KS.apply(GS,arguments)}function YS(r,s,a,c,h,p,v,E,x){if(qS.apply(this,arguments),gs){if(gs){var R=Zo;gs=!1,Zo=null}else throw Error(n(198));ea||(ea=!0,Pu=R)}}function kr(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function Lp(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Fp(r){if(kr(r)!==r)throw Error(n(188))}function QS(r){var s=r.alternate;if(!s){if(s=kr(r),s===null)throw Error(n(188));return s!==r?null:r}for(var a=r,c=s;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return Fp(h),r;if(p===c)return Fp(h),s;p=p.sibling}throw Error(n(188))}if(a.return!==c.return)a=h,c=p;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,c=p;break}if(E===c){v=!0,c=h,a=p;break}E=E.sibling}if(!v){for(E=p.child;E;){if(E===a){v=!0,a=p,c=h;break}if(E===c){v=!0,c=p,a=h;break}E=E.sibling}if(!v)throw Error(n(189))}}if(a.alternate!==c)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?r:s}function jp(r){return r=QS(r),r!==null?Vp(r):null}function Vp(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Vp(r);if(s!==null)return s;r=r.sibling}return null}var Up=e.unstable_scheduleCallback,Bp=e.unstable_cancelCallback,XS=e.unstable_shouldYield,JS=e.unstable_requestPaint,He=e.unstable_now,ZS=e.unstable_getCurrentPriorityLevel,Nu=e.unstable_ImmediatePriority,Wp=e.unstable_UserBlockingPriority,ta=e.unstable_NormalPriority,ex=e.unstable_LowPriority,zp=e.unstable_IdlePriority,na=null,un=null;function tx(r){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(na,r,void 0,(r.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:ix,nx=Math.log,rx=Math.LN2;function ix(r){return r>>>=0,r===0?32:31-(nx(r)/rx|0)|0}var ra=64,ia=4194304;function ys(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function sa(r,s){var a=r.pendingLanes;if(a===0)return 0;var c=0,h=r.suspendedLanes,p=r.pingedLanes,v=a&268435455;if(v!==0){var E=v&~h;E!==0?c=ys(E):(p&=v,p!==0&&(c=ys(p)))}else v=a&~h,v!==0?c=ys(v):p!==0&&(c=ys(p));if(c===0)return 0;if(s!==0&&s!==c&&(s&h)===0&&(h=c&-c,p=s&-s,h>=p||h===16&&(p&4194240)!==0))return s;if((c&4)!==0&&(c|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=c;0<s;)a=31-Yt(s),h=1<<a,c|=r[a],s&=~h;return c}function sx(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ox(r,s){for(var a=r.suspendedLanes,c=r.pingedLanes,h=r.expirationTimes,p=r.pendingLanes;0<p;){var v=31-Yt(p),E=1<<v,x=h[v];x===-1?((E&a)===0||(E&c)!==0)&&(h[v]=sx(E,s)):x<=s&&(r.expiredLanes|=E),p&=~E}}function Ru(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function $p(){var r=ra;return ra<<=1,(ra&4194240)===0&&(ra=64),r}function Au(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function vs(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Yt(s),r[s]=a}function ax(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var c=r.eventTimes;for(r=r.expirationTimes;0<a;){var h=31-Yt(a),p=1<<h;s[h]=0,c[h]=-1,r[h]=-1,a&=~p}}function bu(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var c=31-Yt(a),h=1<<c;h&s|r[c]&s&&(r[c]|=s),a&=~h}}var Ce=0;function Hp(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Kp,Du,Gp,qp,Yp,Mu=!1,oa=[],Bn=null,Wn=null,zn=null,_s=new Map,ws=new Map,$n=[],lx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qp(r,s){switch(r){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":Wn=null;break;case"mouseover":case"mouseout":zn=null;break;case"pointerover":case"pointerout":_s.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(s.pointerId)}}function Es(r,s,a,c,h,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[h]},s!==null&&(s=Os(s),s!==null&&Du(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),r)}function ux(r,s,a,c,h){switch(s){case"focusin":return Bn=Es(Bn,r,s,a,c,h),!0;case"dragenter":return Wn=Es(Wn,r,s,a,c,h),!0;case"mouseover":return zn=Es(zn,r,s,a,c,h),!0;case"pointerover":var p=h.pointerId;return _s.set(p,Es(_s.get(p)||null,r,s,a,c,h)),!0;case"gotpointercapture":return p=h.pointerId,ws.set(p,Es(ws.get(p)||null,r,s,a,c,h)),!0}return!1}function Xp(r){var s=Pr(r.target);if(s!==null){var a=kr(s);if(a!==null){if(s=a.tag,s===13){if(s=Lp(a),s!==null){r.blockedOn=s,Yp(r.priority,function(){Gp(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function aa(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Lu(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var c=new a.constructor(a.type,a);xu=c,a.target.dispatchEvent(c),xu=null}else return s=Os(a),s!==null&&Du(s),r.blockedOn=a,!1;s.shift()}return!0}function Jp(r,s,a){aa(r)&&a.delete(s)}function cx(){Mu=!1,Bn!==null&&aa(Bn)&&(Bn=null),Wn!==null&&aa(Wn)&&(Wn=null),zn!==null&&aa(zn)&&(zn=null),_s.forEach(Jp),ws.forEach(Jp)}function Ss(r,s){r.blockedOn===s&&(r.blockedOn=null,Mu||(Mu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,cx)))}function xs(r){function s(h){return Ss(h,r)}if(0<oa.length){Ss(oa[0],r);for(var a=1;a<oa.length;a++){var c=oa[a];c.blockedOn===r&&(c.blockedOn=null)}}for(Bn!==null&&Ss(Bn,r),Wn!==null&&Ss(Wn,r),zn!==null&&Ss(zn,r),_s.forEach(s),ws.forEach(s),a=0;a<$n.length;a++)c=$n[a],c.blockedOn===r&&(c.blockedOn=null);for(;0<$n.length&&(a=$n[0],a.blockedOn===null);)Xp(a),a.blockedOn===null&&$n.shift()}var di=O.ReactCurrentBatchConfig,la=!0;function dx(r,s,a,c){var h=Ce,p=di.transition;di.transition=null;try{Ce=1,Ou(r,s,a,c)}finally{Ce=h,di.transition=p}}function hx(r,s,a,c){var h=Ce,p=di.transition;di.transition=null;try{Ce=4,Ou(r,s,a,c)}finally{Ce=h,di.transition=p}}function Ou(r,s,a,c){if(la){var h=Lu(r,s,a,c);if(h===null)Zu(r,s,c,ua,a),Qp(r,c);else if(ux(h,r,s,a,c))c.stopPropagation();else if(Qp(r,c),s&4&&-1<lx.indexOf(r)){for(;h!==null;){var p=Os(h);if(p!==null&&Kp(p),p=Lu(r,s,a,c),p===null&&Zu(r,s,c,ua,a),p===h)break;h=p}h!==null&&c.stopPropagation()}else Zu(r,s,c,null,a)}}var ua=null;function Lu(r,s,a,c){if(ua=null,r=Cu(c),r=Pr(r),r!==null)if(s=kr(r),s===null)r=null;else if(a=s.tag,a===13){if(r=Lp(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return ua=r,null}function Zp(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZS()){case Nu:return 1;case Wp:return 4;case ta:case ex:return 16;case zp:return 536870912;default:return 16}default:return 16}}var Hn=null,Fu=null,ca=null;function em(){if(ca)return ca;var r,s=Fu,a=s.length,c,h="value"in Hn?Hn.value:Hn.textContent,p=h.length;for(r=0;r<a&&s[r]===h[r];r++);var v=a-r;for(c=1;c<=v&&s[a-c]===h[p-c];c++);return ca=h.slice(r,1<c?1-c:void 0)}function da(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function ha(){return!0}function tm(){return!1}function Dt(r){function s(a,c,h,p,v){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var E in r)r.hasOwnProperty(E)&&(a=r[E],this[E]=a?a(p):p[E]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ha:tm,this.isPropagationStopped=tm,this}return G(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),s}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ju=Dt(hi),Cs=G({},hi,{view:0,detail:0}),fx=Dt(Cs),Vu,Uu,Ts,fa=G({},Cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wu,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ts&&(Ts&&r.type==="mousemove"?(Vu=r.screenX-Ts.screenX,Uu=r.screenY-Ts.screenY):Uu=Vu=0,Ts=r),Vu)},movementY:function(r){return"movementY"in r?r.movementY:Uu}}),nm=Dt(fa),px=G({},fa,{dataTransfer:0}),mx=Dt(px),gx=G({},Cs,{relatedTarget:0}),Bu=Dt(gx),yx=G({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),vx=Dt(yx),_x=G({},hi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),wx=Dt(_x),Ex=G({},hi,{data:0}),rm=Dt(Ex),Sx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tx(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Cx[r])?!!s[r]:!1}function Wu(){return Tx}var Ix=G({},Cs,{key:function(r){if(r.key){var s=Sx[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=da(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?xx[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wu,charCode:function(r){return r.type==="keypress"?da(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?da(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),kx=Dt(Ix),Px=G({},fa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),im=Dt(Px),Nx=G({},Cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wu}),Rx=Dt(Nx),Ax=G({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bx=Dt(Ax),Dx=G({},fa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Mx=Dt(Dx),Ox=[9,13,27,32],zu=d&&"CompositionEvent"in window,Is=null;d&&"documentMode"in document&&(Is=document.documentMode);var Lx=d&&"TextEvent"in window&&!Is,sm=d&&(!zu||Is&&8<Is&&11>=Is),om=" ",am=!1;function lm(r,s){switch(r){case"keyup":return Ox.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function um(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var fi=!1;function Fx(r,s){switch(r){case"compositionend":return um(s);case"keypress":return s.which!==32?null:(am=!0,om);case"textInput":return r=s.data,r===om&&am?null:r;default:return null}}function jx(r,s){if(fi)return r==="compositionend"||!zu&&lm(r,s)?(r=em(),ca=Fu=Hn=null,fi=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return sm&&s.locale!=="ko"?null:s.data;default:return null}}var Vx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Vx[r.type]:s==="textarea"}function dm(r,s,a,c){Ap(c),s=va(s,"onChange"),0<s.length&&(a=new ju("onChange","change",null,a,c),r.push({event:a,listeners:s}))}var ks=null,Ps=null;function Ux(r){Nm(r,0)}function pa(r){var s=vi(r);if(_p(s))return r}function Bx(r,s){if(r==="change")return s}var hm=!1;if(d){var $u;if(d){var Hu="oninput"in document;if(!Hu){var fm=document.createElement("div");fm.setAttribute("oninput","return;"),Hu=typeof fm.oninput=="function"}$u=Hu}else $u=!1;hm=$u&&(!document.documentMode||9<document.documentMode)}function pm(){ks&&(ks.detachEvent("onpropertychange",mm),Ps=ks=null)}function mm(r){if(r.propertyName==="value"&&pa(Ps)){var s=[];dm(s,Ps,r,Cu(r)),Op(Ux,s)}}function Wx(r,s,a){r==="focusin"?(pm(),ks=s,Ps=a,ks.attachEvent("onpropertychange",mm)):r==="focusout"&&pm()}function zx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return pa(Ps)}function $x(r,s){if(r==="click")return pa(s)}function Hx(r,s){if(r==="input"||r==="change")return pa(s)}function Kx(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Qt=typeof Object.is=="function"?Object.is:Kx;function Ns(r,s){if(Qt(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!f.call(s,h)||!Qt(r[h],s[h]))return!1}return!0}function gm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function ym(r,s){var a=gm(r);r=0;for(var c;a;){if(a.nodeType===3){if(c=r+a.textContent.length,r<=s&&c>=s)return{node:a,offset:s-r};r=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gm(a)}}function vm(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?vm(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function _m(){for(var r=window,s=Xo();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Xo(r.document)}return s}function Ku(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function Gx(r){var s=_m(),a=r.focusedElem,c=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&vm(a.ownerDocument.documentElement,a)){if(c!==null&&Ku(a)){if(s=c.start,r=c.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var h=a.textContent.length,p=Math.min(c.start,h);c=c.end===void 0?p:Math.min(c.end,h),!r.extend&&p>c&&(h=c,c=p,p=h),h=ym(a,p);var v=ym(a,c);h&&v&&(r.rangeCount!==1||r.anchorNode!==h.node||r.anchorOffset!==h.offset||r.focusNode!==v.node||r.focusOffset!==v.offset)&&(s=s.createRange(),s.setStart(h.node,h.offset),r.removeAllRanges(),p>c?(r.addRange(s),r.extend(v.node,v.offset)):(s.setEnd(v.node,v.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var qx=d&&"documentMode"in document&&11>=document.documentMode,pi=null,Gu=null,Rs=null,qu=!1;function wm(r,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;qu||pi==null||pi!==Xo(c)||(c=pi,"selectionStart"in c&&Ku(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Rs&&Ns(Rs,c)||(Rs=c,c=va(Gu,"onSelect"),0<c.length&&(s=new ju("onSelect","select",null,s,a),r.push({event:s,listeners:c}),s.target=pi)))}function ma(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var mi={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},Yu={},Em={};d&&(Em=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function ga(r){if(Yu[r])return Yu[r];if(!mi[r])return r;var s=mi[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in Em)return Yu[r]=s[a];return r}var Sm=ga("animationend"),xm=ga("animationiteration"),Cm=ga("animationstart"),Tm=ga("transitionend"),Im=new Map,km="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kn(r,s){Im.set(r,s),l(s,[r])}for(var Qu=0;Qu<km.length;Qu++){var Xu=km[Qu],Yx=Xu.toLowerCase(),Qx=Xu[0].toUpperCase()+Xu.slice(1);Kn(Yx,"on"+Qx)}Kn(Sm,"onAnimationEnd"),Kn(xm,"onAnimationIteration"),Kn(Cm,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(Tm,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xx=new Set("cancel close invalid load scroll toggle".split(" ").concat(As));function Pm(r,s,a){var c=r.type||"unknown-event";r.currentTarget=a,YS(c,s,void 0,r),r.currentTarget=null}function Nm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var c=r[a],h=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var v=c.length-1;0<=v;v--){var E=c[v],x=E.instance,R=E.currentTarget;if(E=E.listener,x!==p&&h.isPropagationStopped())break e;Pm(h,E,R),p=x}else for(v=0;v<c.length;v++){if(E=c[v],x=E.instance,R=E.currentTarget,E=E.listener,x!==p&&h.isPropagationStopped())break e;Pm(h,E,R),p=x}}}if(ea)throw r=Pu,ea=!1,Pu=null,r}function be(r,s){var a=s[sc];a===void 0&&(a=s[sc]=new Set);var c=r+"__bubble";a.has(c)||(Rm(s,r,2,!1),a.add(c))}function Ju(r,s,a){var c=0;s&&(c|=4),Rm(a,r,c,s)}var ya="_reactListening"+Math.random().toString(36).slice(2);function bs(r){if(!r[ya]){r[ya]=!0,i.forEach(function(a){a!=="selectionchange"&&(Xx.has(a)||Ju(a,!1,r),Ju(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[ya]||(s[ya]=!0,Ju("selectionchange",!1,s))}}function Rm(r,s,a,c){switch(Zp(s)){case 1:var h=dx;break;case 4:h=hx;break;default:h=Ou}a=h.bind(null,s,a,r),h=void 0,!ku||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?r.addEventListener(s,a,{capture:!0,passive:h}):r.addEventListener(s,a,!0):h!==void 0?r.addEventListener(s,a,{passive:h}):r.addEventListener(s,a,!1)}function Zu(r,s,a,c,h){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var E=c.stateNode.containerInfo;if(E===h||E.nodeType===8&&E.parentNode===h)break;if(v===4)for(v=c.return;v!==null;){var x=v.tag;if((x===3||x===4)&&(x=v.stateNode.containerInfo,x===h||x.nodeType===8&&x.parentNode===h))return;v=v.return}for(;E!==null;){if(v=Pr(E),v===null)return;if(x=v.tag,x===5||x===6){c=p=v;continue e}E=E.parentNode}}c=c.return}Op(function(){var R=p,F=Cu(a),V=[];e:{var M=Im.get(r);if(M!==void 0){var q=ju,Q=r;switch(r){case"keypress":if(da(a)===0)break e;case"keydown":case"keyup":q=kx;break;case"focusin":Q="focus",q=Bu;break;case"focusout":Q="blur",q=Bu;break;case"beforeblur":case"afterblur":q=Bu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=nm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=mx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Rx;break;case Sm:case xm:case Cm:q=vx;break;case Tm:q=bx;break;case"scroll":q=fx;break;case"wheel":q=Mx;break;case"copy":case"cut":case"paste":q=wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=im}var X=(s&4)!==0,Ke=!X&&r==="scroll",k=X?M!==null?M+"Capture":null:M;X=[];for(var T=R,P;T!==null;){P=T;var W=P.stateNode;if(P.tag===5&&W!==null&&(P=W,k!==null&&(W=ps(T,k),W!=null&&X.push(Ds(T,W,P)))),Ke)break;T=T.return}0<X.length&&(M=new q(M,Q,null,a,F),V.push({event:M,listeners:X}))}}if((s&7)===0){e:{if(M=r==="mouseover"||r==="pointerover",q=r==="mouseout"||r==="pointerout",M&&a!==xu&&(Q=a.relatedTarget||a.fromElement)&&(Pr(Q)||Q[wn]))break e;if((q||M)&&(M=F.window===F?F:(M=F.ownerDocument)?M.defaultView||M.parentWindow:window,q?(Q=a.relatedTarget||a.toElement,q=R,Q=Q?Pr(Q):null,Q!==null&&(Ke=kr(Q),Q!==Ke||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(q=null,Q=R),q!==Q)){if(X=nm,W="onMouseLeave",k="onMouseEnter",T="mouse",(r==="pointerout"||r==="pointerover")&&(X=im,W="onPointerLeave",k="onPointerEnter",T="pointer"),Ke=q==null?M:vi(q),P=Q==null?M:vi(Q),M=new X(W,T+"leave",q,a,F),M.target=Ke,M.relatedTarget=P,W=null,Pr(F)===R&&(X=new X(k,T+"enter",Q,a,F),X.target=P,X.relatedTarget=Ke,W=X),Ke=W,q&&Q)t:{for(X=q,k=Q,T=0,P=X;P;P=gi(P))T++;for(P=0,W=k;W;W=gi(W))P++;for(;0<T-P;)X=gi(X),T--;for(;0<P-T;)k=gi(k),P--;for(;T--;){if(X===k||k!==null&&X===k.alternate)break t;X=gi(X),k=gi(k)}X=null}else X=null;q!==null&&Am(V,M,q,X,!1),Q!==null&&Ke!==null&&Am(V,Ke,Q,X,!0)}}e:{if(M=R?vi(R):window,q=M.nodeName&&M.nodeName.toLowerCase(),q==="select"||q==="input"&&M.type==="file")var Z=Bx;else if(cm(M))if(hm)Z=Hx;else{Z=zx;var ne=Wx}else(q=M.nodeName)&&q.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(Z=$x);if(Z&&(Z=Z(r,R))){dm(V,Z,a,F);break e}ne&&ne(r,M,R),r==="focusout"&&(ne=M._wrapperState)&&ne.controlled&&M.type==="number"&&vu(M,"number",M.value)}switch(ne=R?vi(R):window,r){case"focusin":(cm(ne)||ne.contentEditable==="true")&&(pi=ne,Gu=R,Rs=null);break;case"focusout":Rs=Gu=pi=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,wm(V,a,F);break;case"selectionchange":if(qx)break;case"keydown":case"keyup":wm(V,a,F)}var re;if(zu)e:{switch(r){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else fi?lm(r,a)&&(ae="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(ae="onCompositionStart");ae&&(sm&&a.locale!=="ko"&&(fi||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&fi&&(re=em()):(Hn=F,Fu="value"in Hn?Hn.value:Hn.textContent,fi=!0)),ne=va(R,ae),0<ne.length&&(ae=new rm(ae,r,null,a,F),V.push({event:ae,listeners:ne}),re?ae.data=re:(re=um(a),re!==null&&(ae.data=re)))),(re=Lx?Fx(r,a):jx(r,a))&&(R=va(R,"onBeforeInput"),0<R.length&&(F=new rm("onBeforeInput","beforeinput",null,a,F),V.push({event:F,listeners:R}),F.data=re))}Nm(V,s)})}function Ds(r,s,a){return{instance:r,listener:s,currentTarget:a}}function va(r,s){for(var a=s+"Capture",c=[];r!==null;){var h=r,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=ps(r,a),p!=null&&c.unshift(Ds(r,p,h)),p=ps(r,s),p!=null&&c.push(Ds(r,p,h))),r=r.return}return c}function gi(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Am(r,s,a,c,h){for(var p=s._reactName,v=[];a!==null&&a!==c;){var E=a,x=E.alternate,R=E.stateNode;if(x!==null&&x===c)break;E.tag===5&&R!==null&&(E=R,h?(x=ps(a,p),x!=null&&v.unshift(Ds(a,x,E))):h||(x=ps(a,p),x!=null&&v.push(Ds(a,x,E)))),a=a.return}v.length!==0&&r.push({event:s,listeners:v})}var Jx=/\r\n?/g,Zx=/\u0000|\uFFFD/g;function bm(r){return(typeof r=="string"?r:""+r).replace(Jx,`
`).replace(Zx,"")}function _a(r,s,a){if(s=bm(s),bm(r)!==s&&a)throw Error(n(425))}function wa(){}var ec=null,tc=null;function nc(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rc=typeof setTimeout=="function"?setTimeout:void 0,eC=typeof clearTimeout=="function"?clearTimeout:void 0,Dm=typeof Promise=="function"?Promise:void 0,tC=typeof queueMicrotask=="function"?queueMicrotask:typeof Dm<"u"?function(r){return Dm.resolve(null).then(r).catch(nC)}:rc;function nC(r){setTimeout(function(){throw r})}function ic(r,s){var a=s,c=0;do{var h=a.nextSibling;if(r.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){r.removeChild(h),xs(s);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);xs(s)}function Gn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function Mm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var yi=Math.random().toString(36).slice(2),cn="__reactFiber$"+yi,Ms="__reactProps$"+yi,wn="__reactContainer$"+yi,sc="__reactEvents$"+yi,rC="__reactListeners$"+yi,iC="__reactHandles$"+yi;function Pr(r){var s=r[cn];if(s)return s;for(var a=r.parentNode;a;){if(s=a[wn]||a[cn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=Mm(r);r!==null;){if(a=r[cn])return a;r=Mm(r)}return s}r=a,a=r.parentNode}return null}function Os(r){return r=r[cn]||r[wn],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function vi(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Ea(r){return r[Ms]||null}var oc=[],_i=-1;function qn(r){return{current:r}}function De(r){0>_i||(r.current=oc[_i],oc[_i]=null,_i--)}function Ne(r,s){_i++,oc[_i]=r.current,r.current=s}var Yn={},ht=qn(Yn),xt=qn(!1),Nr=Yn;function wi(r,s){var a=r.type.contextTypes;if(!a)return Yn;var c=r.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in a)h[p]=s[p];return c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=h),h}function Ct(r){return r=r.childContextTypes,r!=null}function Sa(){De(xt),De(ht)}function Om(r,s,a){if(ht.current!==Yn)throw Error(n(168));Ne(ht,s),Ne(xt,a)}function Lm(r,s,a){var c=r.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in s))throw Error(n(108,Pe(r)||"Unknown",h));return G({},a,c)}function xa(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Yn,Nr=ht.current,Ne(ht,r),Ne(xt,xt.current),!0}function Fm(r,s,a){var c=r.stateNode;if(!c)throw Error(n(169));a?(r=Lm(r,s,Nr),c.__reactInternalMemoizedMergedChildContext=r,De(xt),De(ht),Ne(ht,r)):De(xt),Ne(xt,a)}var En=null,Ca=!1,ac=!1;function jm(r){En===null?En=[r]:En.push(r)}function sC(r){Ca=!0,jm(r)}function Qn(){if(!ac&&En!==null){ac=!0;var r=0,s=Ce;try{var a=En;for(Ce=1;r<a.length;r++){var c=a[r];do c=c(!0);while(c!==null)}En=null,Ca=!1}catch(h){throw En!==null&&(En=En.slice(r+1)),Up(Nu,Qn),h}finally{Ce=s,ac=!1}}return null}var Ei=[],Si=0,Ta=null,Ia=0,Ft=[],jt=0,Rr=null,Sn=1,xn="";function Ar(r,s){Ei[Si++]=Ia,Ei[Si++]=Ta,Ta=r,Ia=s}function Vm(r,s,a){Ft[jt++]=Sn,Ft[jt++]=xn,Ft[jt++]=Rr,Rr=r;var c=Sn;r=xn;var h=32-Yt(c)-1;c&=~(1<<h),a+=1;var p=32-Yt(s)+h;if(30<p){var v=h-h%5;p=(c&(1<<v)-1).toString(32),c>>=v,h-=v,Sn=1<<32-Yt(s)+h|a<<h|c,xn=p+r}else Sn=1<<p|a<<h|c,xn=r}function lc(r){r.return!==null&&(Ar(r,1),Vm(r,1,0))}function uc(r){for(;r===Ta;)Ta=Ei[--Si],Ei[Si]=null,Ia=Ei[--Si],Ei[Si]=null;for(;r===Rr;)Rr=Ft[--jt],Ft[jt]=null,xn=Ft[--jt],Ft[jt]=null,Sn=Ft[--jt],Ft[jt]=null}var Mt=null,Ot=null,Oe=!1,Xt=null;function Um(r,s){var a=Wt(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function Bm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,Mt=r,Ot=Gn(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,Mt=r,Ot=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Rr!==null?{id:Sn,overflow:xn}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Wt(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,Mt=r,Ot=null,!0):!1;default:return!1}}function cc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function dc(r){if(Oe){var s=Ot;if(s){var a=s;if(!Bm(r,s)){if(cc(r))throw Error(n(418));s=Gn(a.nextSibling);var c=Mt;s&&Bm(r,s)?Um(c,a):(r.flags=r.flags&-4097|2,Oe=!1,Mt=r)}}else{if(cc(r))throw Error(n(418));r.flags=r.flags&-4097|2,Oe=!1,Mt=r}}}function Wm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Mt=r}function ka(r){if(r!==Mt)return!1;if(!Oe)return Wm(r),Oe=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!nc(r.type,r.memoizedProps)),s&&(s=Ot)){if(cc(r))throw zm(),Error(n(418));for(;s;)Um(r,s),s=Gn(s.nextSibling)}if(Wm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){Ot=Gn(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}Ot=null}}else Ot=Mt?Gn(r.stateNode.nextSibling):null;return!0}function zm(){for(var r=Ot;r;)r=Gn(r.nextSibling)}function xi(){Ot=Mt=null,Oe=!1}function hc(r){Xt===null?Xt=[r]:Xt.push(r)}var oC=O.ReactCurrentBatchConfig;function Ls(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(n(309));var c=a.stateNode}if(!c)throw Error(n(147,r));var h=c,p=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===p?s.ref:(s=function(v){var E=h.refs;v===null?delete E[p]:E[p]=v},s._stringRef=p,s)}if(typeof r!="string")throw Error(n(284));if(!a._owner)throw Error(n(290,r))}return r}function Pa(r,s){throw r=Object.prototype.toString.call(s),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function $m(r){var s=r._init;return s(r._payload)}function Hm(r){function s(k,T){if(r){var P=k.deletions;P===null?(k.deletions=[T],k.flags|=16):P.push(T)}}function a(k,T){if(!r)return null;for(;T!==null;)s(k,T),T=T.sibling;return null}function c(k,T){for(k=new Map;T!==null;)T.key!==null?k.set(T.key,T):k.set(T.index,T),T=T.sibling;return k}function h(k,T){return k=ir(k,T),k.index=0,k.sibling=null,k}function p(k,T,P){return k.index=P,r?(P=k.alternate,P!==null?(P=P.index,P<T?(k.flags|=2,T):P):(k.flags|=2,T)):(k.flags|=1048576,T)}function v(k){return r&&k.alternate===null&&(k.flags|=2),k}function E(k,T,P,W){return T===null||T.tag!==6?(T=rd(P,k.mode,W),T.return=k,T):(T=h(T,P),T.return=k,T)}function x(k,T,P,W){var Z=P.type;return Z===J?F(k,T,P.props.children,W,P.key):T!==null&&(T.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Qe&&$m(Z)===T.type)?(W=h(T,P.props),W.ref=Ls(k,T,P),W.return=k,W):(W=Ja(P.type,P.key,P.props,null,k.mode,W),W.ref=Ls(k,T,P),W.return=k,W)}function R(k,T,P,W){return T===null||T.tag!==4||T.stateNode.containerInfo!==P.containerInfo||T.stateNode.implementation!==P.implementation?(T=id(P,k.mode,W),T.return=k,T):(T=h(T,P.children||[]),T.return=k,T)}function F(k,T,P,W,Z){return T===null||T.tag!==7?(T=Vr(P,k.mode,W,Z),T.return=k,T):(T=h(T,P),T.return=k,T)}function V(k,T,P){if(typeof T=="string"&&T!==""||typeof T=="number")return T=rd(""+T,k.mode,P),T.return=k,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case H:return P=Ja(T.type,T.key,T.props,null,k.mode,P),P.ref=Ls(k,null,T),P.return=k,P;case j:return T=id(T,k.mode,P),T.return=k,T;case Qe:var W=T._init;return V(k,W(T._payload),P)}if(ds(T)||te(T))return T=Vr(T,k.mode,P,null),T.return=k,T;Pa(k,T)}return null}function M(k,T,P,W){var Z=T!==null?T.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return Z!==null?null:E(k,T,""+P,W);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case H:return P.key===Z?x(k,T,P,W):null;case j:return P.key===Z?R(k,T,P,W):null;case Qe:return Z=P._init,M(k,T,Z(P._payload),W)}if(ds(P)||te(P))return Z!==null?null:F(k,T,P,W,null);Pa(k,P)}return null}function q(k,T,P,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number")return k=k.get(P)||null,E(T,k,""+W,Z);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case H:return k=k.get(W.key===null?P:W.key)||null,x(T,k,W,Z);case j:return k=k.get(W.key===null?P:W.key)||null,R(T,k,W,Z);case Qe:var ne=W._init;return q(k,T,P,ne(W._payload),Z)}if(ds(W)||te(W))return k=k.get(P)||null,F(T,k,W,Z,null);Pa(T,W)}return null}function Q(k,T,P,W){for(var Z=null,ne=null,re=T,ae=T=0,tt=null;re!==null&&ae<P.length;ae++){re.index>ae?(tt=re,re=null):tt=re.sibling;var _e=M(k,re,P[ae],W);if(_e===null){re===null&&(re=tt);break}r&&re&&_e.alternate===null&&s(k,re),T=p(_e,T,ae),ne===null?Z=_e:ne.sibling=_e,ne=_e,re=tt}if(ae===P.length)return a(k,re),Oe&&Ar(k,ae),Z;if(re===null){for(;ae<P.length;ae++)re=V(k,P[ae],W),re!==null&&(T=p(re,T,ae),ne===null?Z=re:ne.sibling=re,ne=re);return Oe&&Ar(k,ae),Z}for(re=c(k,re);ae<P.length;ae++)tt=q(re,k,ae,P[ae],W),tt!==null&&(r&&tt.alternate!==null&&re.delete(tt.key===null?ae:tt.key),T=p(tt,T,ae),ne===null?Z=tt:ne.sibling=tt,ne=tt);return r&&re.forEach(function(sr){return s(k,sr)}),Oe&&Ar(k,ae),Z}function X(k,T,P,W){var Z=te(P);if(typeof Z!="function")throw Error(n(150));if(P=Z.call(P),P==null)throw Error(n(151));for(var ne=Z=null,re=T,ae=T=0,tt=null,_e=P.next();re!==null&&!_e.done;ae++,_e=P.next()){re.index>ae?(tt=re,re=null):tt=re.sibling;var sr=M(k,re,_e.value,W);if(sr===null){re===null&&(re=tt);break}r&&re&&sr.alternate===null&&s(k,re),T=p(sr,T,ae),ne===null?Z=sr:ne.sibling=sr,ne=sr,re=tt}if(_e.done)return a(k,re),Oe&&Ar(k,ae),Z;if(re===null){for(;!_e.done;ae++,_e=P.next())_e=V(k,_e.value,W),_e!==null&&(T=p(_e,T,ae),ne===null?Z=_e:ne.sibling=_e,ne=_e);return Oe&&Ar(k,ae),Z}for(re=c(k,re);!_e.done;ae++,_e=P.next())_e=q(re,k,ae,_e.value,W),_e!==null&&(r&&_e.alternate!==null&&re.delete(_e.key===null?ae:_e.key),T=p(_e,T,ae),ne===null?Z=_e:ne.sibling=_e,ne=_e);return r&&re.forEach(function(VC){return s(k,VC)}),Oe&&Ar(k,ae),Z}function Ke(k,T,P,W){if(typeof P=="object"&&P!==null&&P.type===J&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case H:e:{for(var Z=P.key,ne=T;ne!==null;){if(ne.key===Z){if(Z=P.type,Z===J){if(ne.tag===7){a(k,ne.sibling),T=h(ne,P.props.children),T.return=k,k=T;break e}}else if(ne.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Qe&&$m(Z)===ne.type){a(k,ne.sibling),T=h(ne,P.props),T.ref=Ls(k,ne,P),T.return=k,k=T;break e}a(k,ne);break}else s(k,ne);ne=ne.sibling}P.type===J?(T=Vr(P.props.children,k.mode,W,P.key),T.return=k,k=T):(W=Ja(P.type,P.key,P.props,null,k.mode,W),W.ref=Ls(k,T,P),W.return=k,k=W)}return v(k);case j:e:{for(ne=P.key;T!==null;){if(T.key===ne)if(T.tag===4&&T.stateNode.containerInfo===P.containerInfo&&T.stateNode.implementation===P.implementation){a(k,T.sibling),T=h(T,P.children||[]),T.return=k,k=T;break e}else{a(k,T);break}else s(k,T);T=T.sibling}T=id(P,k.mode,W),T.return=k,k=T}return v(k);case Qe:return ne=P._init,Ke(k,T,ne(P._payload),W)}if(ds(P))return Q(k,T,P,W);if(te(P))return X(k,T,P,W);Pa(k,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,T!==null&&T.tag===6?(a(k,T.sibling),T=h(T,P),T.return=k,k=T):(a(k,T),T=rd(P,k.mode,W),T.return=k,k=T),v(k)):a(k,T)}return Ke}var Ci=Hm(!0),Km=Hm(!1),Na=qn(null),Ra=null,Ti=null,fc=null;function pc(){fc=Ti=Ra=null}function mc(r){var s=Na.current;De(Na),r._currentValue=s}function gc(r,s,a){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===a)break;r=r.return}}function Ii(r,s){Ra=r,fc=Ti=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Tt=!0),r.firstContext=null)}function Vt(r){var s=r._currentValue;if(fc!==r)if(r={context:r,memoizedValue:s,next:null},Ti===null){if(Ra===null)throw Error(n(308));Ti=r,Ra.dependencies={lanes:0,firstContext:r}}else Ti=Ti.next=r;return s}var br=null;function yc(r){br===null?br=[r]:br.push(r)}function Gm(r,s,a,c){var h=s.interleaved;return h===null?(a.next=a,yc(s)):(a.next=h.next,h.next=a),s.interleaved=a,Cn(r,c)}function Cn(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Xn=!1;function vc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Tn(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Jn(r,s,a){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(me&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,Cn(r,a)}return h=c.interleaved,h===null?(s.next=s,yc(c)):(s.next=h.next,h.next=s),c.interleaved=s,Cn(r,a)}function Aa(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,bu(r,a)}}function Ym(r,s){var a=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?h=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?h=p=s:p=p.next=s}else h=p=s;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:c.shared,effects:c.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function ba(r,s,a,c){var h=r.updateQueue;Xn=!1;var p=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var x=E,R=x.next;x.next=null,v===null?p=R:v.next=R,v=x;var F=r.alternate;F!==null&&(F=F.updateQueue,E=F.lastBaseUpdate,E!==v&&(E===null?F.firstBaseUpdate=R:E.next=R,F.lastBaseUpdate=x))}if(p!==null){var V=h.baseState;v=0,F=R=x=null,E=p;do{var M=E.lane,q=E.eventTime;if((c&M)===M){F!==null&&(F=F.next={eventTime:q,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var Q=r,X=E;switch(M=s,q=a,X.tag){case 1:if(Q=X.payload,typeof Q=="function"){V=Q.call(q,V,M);break e}V=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=X.payload,M=typeof Q=="function"?Q.call(q,V,M):Q,M==null)break e;V=G({},V,M);break e;case 2:Xn=!0}}E.callback!==null&&E.lane!==0&&(r.flags|=64,M=h.effects,M===null?h.effects=[E]:M.push(E))}else q={eventTime:q,lane:M,tag:E.tag,payload:E.payload,callback:E.callback,next:null},F===null?(R=F=q,x=V):F=F.next=q,v|=M;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;M=E,E=M.next,M.next=null,h.lastBaseUpdate=M,h.shared.pending=null}}while(!0);if(F===null&&(x=V),h.baseState=x,h.firstBaseUpdate=R,h.lastBaseUpdate=F,s=h.shared.interleaved,s!==null){h=s;do v|=h.lane,h=h.next;while(h!==s)}else p===null&&(h.shared.lanes=0);Or|=v,r.lanes=v,r.memoizedState=V}}function Qm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var c=r[s],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(n(191,h));h.call(c)}}}var Fs={},dn=qn(Fs),js=qn(Fs),Vs=qn(Fs);function Dr(r){if(r===Fs)throw Error(n(174));return r}function _c(r,s){switch(Ne(Vs,s),Ne(js,r),Ne(dn,Fs),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:wu(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=wu(s,r)}De(dn),Ne(dn,s)}function ki(){De(dn),De(js),De(Vs)}function Xm(r){Dr(Vs.current);var s=Dr(dn.current),a=wu(s,r.type);s!==a&&(Ne(js,r),Ne(dn,a))}function wc(r){js.current===r&&(De(dn),De(js))}var je=qn(0);function Da(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ec=[];function Sc(){for(var r=0;r<Ec.length;r++)Ec[r]._workInProgressVersionPrimary=null;Ec.length=0}var Ma=O.ReactCurrentDispatcher,xc=O.ReactCurrentBatchConfig,Mr=0,Ve=null,Xe=null,Ze=null,Oa=!1,Us=!1,Bs=0,aC=0;function ft(){throw Error(n(321))}function Cc(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Qt(r[a],s[a]))return!1;return!0}function Tc(r,s,a,c,h,p){if(Mr=p,Ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ma.current=r===null||r.memoizedState===null?dC:hC,r=a(c,h),Us){p=0;do{if(Us=!1,Bs=0,25<=p)throw Error(n(301));p+=1,Ze=Xe=null,s.updateQueue=null,Ma.current=fC,r=a(c,h)}while(Us)}if(Ma.current=ja,s=Xe!==null&&Xe.next!==null,Mr=0,Ze=Xe=Ve=null,Oa=!1,s)throw Error(n(300));return r}function Ic(){var r=Bs!==0;return Bs=0,r}function hn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Ve.memoizedState=Ze=r:Ze=Ze.next=r,Ze}function Ut(){if(Xe===null){var r=Ve.alternate;r=r!==null?r.memoizedState:null}else r=Xe.next;var s=Ze===null?Ve.memoizedState:Ze.next;if(s!==null)Ze=s,Xe=r;else{if(r===null)throw Error(n(310));Xe=r,r={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},Ze===null?Ve.memoizedState=Ze=r:Ze=Ze.next=r}return Ze}function Ws(r,s){return typeof s=="function"?s(r):s}function kc(r){var s=Ut(),a=s.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=r;var c=Xe,h=c.baseQueue,p=a.pending;if(p!==null){if(h!==null){var v=h.next;h.next=p.next,p.next=v}c.baseQueue=h=p,a.pending=null}if(h!==null){p=h.next,c=c.baseState;var E=v=null,x=null,R=p;do{var F=R.lane;if((Mr&F)===F)x!==null&&(x=x.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),c=R.hasEagerState?R.eagerState:r(c,R.action);else{var V={lane:F,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};x===null?(E=x=V,v=c):x=x.next=V,Ve.lanes|=F,Or|=F}R=R.next}while(R!==null&&R!==p);x===null?v=c:x.next=E,Qt(c,s.memoizedState)||(Tt=!0),s.memoizedState=c,s.baseState=v,s.baseQueue=x,a.lastRenderedState=c}if(r=a.interleaved,r!==null){h=r;do p=h.lane,Ve.lanes|=p,Or|=p,h=h.next;while(h!==r)}else h===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Pc(r){var s=Ut(),a=s.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=r;var c=a.dispatch,h=a.pending,p=s.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do p=r(p,v.action),v=v.next;while(v!==h);Qt(p,s.memoizedState)||(Tt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function Jm(){}function Zm(r,s){var a=Ve,c=Ut(),h=s(),p=!Qt(c.memoizedState,h);if(p&&(c.memoizedState=h,Tt=!0),c=c.queue,Nc(ng.bind(null,a,c,r),[r]),c.getSnapshot!==s||p||Ze!==null&&Ze.memoizedState.tag&1){if(a.flags|=2048,zs(9,tg.bind(null,a,c,h,s),void 0,null),et===null)throw Error(n(349));(Mr&30)!==0||eg(a,s,h)}return h}function eg(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=Ve.updateQueue,s===null?(s={lastEffect:null,stores:null},Ve.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function tg(r,s,a,c){s.value=a,s.getSnapshot=c,rg(s)&&ig(r)}function ng(r,s,a){return a(function(){rg(s)&&ig(r)})}function rg(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Qt(r,a)}catch{return!0}}function ig(r){var s=Cn(r,1);s!==null&&tn(s,r,1,-1)}function sg(r){var s=hn();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:r},s.queue=r,r=r.dispatch=cC.bind(null,Ve,r),[s.memoizedState,r]}function zs(r,s,a,c){return r={tag:r,create:s,destroy:a,deps:c,next:null},s=Ve.updateQueue,s===null?(s={lastEffect:null,stores:null},Ve.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(c=a.next,a.next=r,r.next=c,s.lastEffect=r)),r}function og(){return Ut().memoizedState}function La(r,s,a,c){var h=hn();Ve.flags|=r,h.memoizedState=zs(1|s,a,void 0,c===void 0?null:c)}function Fa(r,s,a,c){var h=Ut();c=c===void 0?null:c;var p=void 0;if(Xe!==null){var v=Xe.memoizedState;if(p=v.destroy,c!==null&&Cc(c,v.deps)){h.memoizedState=zs(s,a,p,c);return}}Ve.flags|=r,h.memoizedState=zs(1|s,a,p,c)}function ag(r,s){return La(8390656,8,r,s)}function Nc(r,s){return Fa(2048,8,r,s)}function lg(r,s){return Fa(4,2,r,s)}function ug(r,s){return Fa(4,4,r,s)}function cg(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function dg(r,s,a){return a=a!=null?a.concat([r]):null,Fa(4,4,cg.bind(null,s,r),a)}function Rc(){}function hg(r,s){var a=Ut();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Cc(s,c[1])?c[0]:(a.memoizedState=[r,s],r)}function fg(r,s){var a=Ut();s=s===void 0?null:s;var c=a.memoizedState;return c!==null&&s!==null&&Cc(s,c[1])?c[0]:(r=r(),a.memoizedState=[r,s],r)}function pg(r,s,a){return(Mr&21)===0?(r.baseState&&(r.baseState=!1,Tt=!0),r.memoizedState=a):(Qt(a,s)||(a=$p(),Ve.lanes|=a,Or|=a,r.baseState=!0),s)}function lC(r,s){var a=Ce;Ce=a!==0&&4>a?a:4,r(!0);var c=xc.transition;xc.transition={};try{r(!1),s()}finally{Ce=a,xc.transition=c}}function mg(){return Ut().memoizedState}function uC(r,s,a){var c=nr(r);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},gg(r))yg(s,a);else if(a=Gm(r,s,a,c),a!==null){var h=_t();tn(a,r,c,h),vg(a,s,c)}}function cC(r,s,a){var c=nr(r),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(gg(r))yg(s,h);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var v=s.lastRenderedState,E=p(v,a);if(h.hasEagerState=!0,h.eagerState=E,Qt(E,v)){var x=s.interleaved;x===null?(h.next=h,yc(s)):(h.next=x.next,x.next=h),s.interleaved=h;return}}catch{}finally{}a=Gm(r,s,h,c),a!==null&&(h=_t(),tn(a,r,c,h),vg(a,s,c))}}function gg(r){var s=r.alternate;return r===Ve||s!==null&&s===Ve}function yg(r,s){Us=Oa=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function vg(r,s,a){if((a&4194240)!==0){var c=s.lanes;c&=r.pendingLanes,a|=c,s.lanes=a,bu(r,a)}}var ja={readContext:Vt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},dC={readContext:Vt,useCallback:function(r,s){return hn().memoizedState=[r,s===void 0?null:s],r},useContext:Vt,useEffect:ag,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,La(4194308,4,cg.bind(null,s,r),a)},useLayoutEffect:function(r,s){return La(4194308,4,r,s)},useInsertionEffect:function(r,s){return La(4,2,r,s)},useMemo:function(r,s){var a=hn();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var c=hn();return s=a!==void 0?a(s):s,c.memoizedState=c.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},c.queue=r,r=r.dispatch=uC.bind(null,Ve,r),[c.memoizedState,r]},useRef:function(r){var s=hn();return r={current:r},s.memoizedState=r},useState:sg,useDebugValue:Rc,useDeferredValue:function(r){return hn().memoizedState=r},useTransition:function(){var r=sg(!1),s=r[0];return r=lC.bind(null,r[1]),hn().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var c=Ve,h=hn();if(Oe){if(a===void 0)throw Error(n(407));a=a()}else{if(a=s(),et===null)throw Error(n(349));(Mr&30)!==0||eg(c,s,a)}h.memoizedState=a;var p={value:a,getSnapshot:s};return h.queue=p,ag(ng.bind(null,c,p,r),[r]),c.flags|=2048,zs(9,tg.bind(null,c,p,a,s),void 0,null),a},useId:function(){var r=hn(),s=et.identifierPrefix;if(Oe){var a=xn,c=Sn;a=(c&~(1<<32-Yt(c)-1)).toString(32)+a,s=":"+s+"R"+a,a=Bs++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=aC++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},hC={readContext:Vt,useCallback:hg,useContext:Vt,useEffect:Nc,useImperativeHandle:dg,useInsertionEffect:lg,useLayoutEffect:ug,useMemo:fg,useReducer:kc,useRef:og,useState:function(){return kc(Ws)},useDebugValue:Rc,useDeferredValue:function(r){var s=Ut();return pg(s,Xe.memoizedState,r)},useTransition:function(){var r=kc(Ws)[0],s=Ut().memoizedState;return[r,s]},useMutableSource:Jm,useSyncExternalStore:Zm,useId:mg,unstable_isNewReconciler:!1},fC={readContext:Vt,useCallback:hg,useContext:Vt,useEffect:Nc,useImperativeHandle:dg,useInsertionEffect:lg,useLayoutEffect:ug,useMemo:fg,useReducer:Pc,useRef:og,useState:function(){return Pc(Ws)},useDebugValue:Rc,useDeferredValue:function(r){var s=Ut();return Xe===null?s.memoizedState=r:pg(s,Xe.memoizedState,r)},useTransition:function(){var r=Pc(Ws)[0],s=Ut().memoizedState;return[r,s]},useMutableSource:Jm,useSyncExternalStore:Zm,useId:mg,unstable_isNewReconciler:!1};function Jt(r,s){if(r&&r.defaultProps){s=G({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function Ac(r,s,a,c){s=r.memoizedState,a=a(c,s),a=a==null?s:G({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Va={isMounted:function(r){return(r=r._reactInternals)?kr(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var c=_t(),h=nr(r),p=Tn(c,h);p.payload=s,a!=null&&(p.callback=a),s=Jn(r,p,h),s!==null&&(tn(s,r,h,c),Aa(s,r,h))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var c=_t(),h=nr(r),p=Tn(c,h);p.tag=1,p.payload=s,a!=null&&(p.callback=a),s=Jn(r,p,h),s!==null&&(tn(s,r,h,c),Aa(s,r,h))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=_t(),c=nr(r),h=Tn(a,c);h.tag=2,s!=null&&(h.callback=s),s=Jn(r,h,c),s!==null&&(tn(s,r,c,a),Aa(s,r,c))}};function _g(r,s,a,c,h,p,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,p,v):s.prototype&&s.prototype.isPureReactComponent?!Ns(a,c)||!Ns(h,p):!0}function wg(r,s,a){var c=!1,h=Yn,p=s.contextType;return typeof p=="object"&&p!==null?p=Vt(p):(h=Ct(s)?Nr:ht.current,c=s.contextTypes,p=(c=c!=null)?wi(r,h):Yn),s=new s(a,p),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Va,r.stateNode=s,s._reactInternals=r,c&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=h,r.__reactInternalMemoizedMaskedChildContext=p),s}function Eg(r,s,a,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==r&&Va.enqueueReplaceState(s,s.state,null)}function bc(r,s,a,c){var h=r.stateNode;h.props=a,h.state=r.memoizedState,h.refs={},vc(r);var p=s.contextType;typeof p=="object"&&p!==null?h.context=Vt(p):(p=Ct(s)?Nr:ht.current,h.context=wi(r,p)),h.state=r.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Ac(r,s,p,a),h.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&Va.enqueueReplaceState(h,h.state,null),ba(r,a,h,c),h.state=r.memoizedState),typeof h.componentDidMount=="function"&&(r.flags|=4194308)}function Pi(r,s){try{var a="",c=s;do a+=ye(c),c=c.return;while(c);var h=a}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:r,source:s,stack:h,digest:null}}function Dc(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function Mc(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var pC=typeof WeakMap=="function"?WeakMap:Map;function Sg(r,s,a){a=Tn(-1,a),a.tag=3,a.payload={element:null};var c=s.value;return a.callback=function(){Ka||(Ka=!0,Yc=c),Mc(r,s)},a}function xg(r,s,a){a=Tn(-1,a),a.tag=3;var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var h=s.value;a.payload=function(){return c(h)},a.callback=function(){Mc(r,s)}}var p=r.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Mc(r,s),typeof c!="function"&&(er===null?er=new Set([this]):er.add(this));var v=s.stack;this.componentDidCatch(s.value,{componentStack:v!==null?v:""})}),a}function Cg(r,s,a){var c=r.pingCache;if(c===null){c=r.pingCache=new pC;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(a)||(h.add(a),r=PC.bind(null,r,s,a),s.then(r,r))}function Tg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Ig(r,s,a,c,h){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Tn(-1,1),s.tag=2,Jn(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=h,r)}var mC=O.ReactCurrentOwner,Tt=!1;function vt(r,s,a,c){s.child=r===null?Km(s,null,a,c):Ci(s,r.child,a,c)}function kg(r,s,a,c,h){a=a.render;var p=s.ref;return Ii(s,h),c=Tc(r,s,a,c,p,h),a=Ic(),r!==null&&!Tt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~h,In(r,s,h)):(Oe&&a&&lc(s),s.flags|=1,vt(r,s,c,h),s.child)}function Pg(r,s,a,c,h){if(r===null){var p=a.type;return typeof p=="function"&&!nd(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=p,Ng(r,s,p,c,h)):(r=Ja(a.type,null,c,s,s.mode,h),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,(r.lanes&h)===0){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ns,a(v,c)&&r.ref===s.ref)return In(r,s,h)}return s.flags|=1,r=ir(p,c),r.ref=s.ref,r.return=s,s.child=r}function Ng(r,s,a,c,h){if(r!==null){var p=r.memoizedProps;if(Ns(p,c)&&r.ref===s.ref)if(Tt=!1,s.pendingProps=c=p,(r.lanes&h)!==0)(r.flags&131072)!==0&&(Tt=!0);else return s.lanes=r.lanes,In(r,s,h)}return Oc(r,s,a,c,h)}function Rg(r,s,a){var c=s.pendingProps,h=c.children,p=r!==null?r.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Ri,Lt),Lt|=a;else{if((a&1073741824)===0)return r=p!==null?p.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ne(Ri,Lt),Lt|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ne(Ri,Lt),Lt|=c}else p!==null?(c=p.baseLanes|a,s.memoizedState=null):c=a,Ne(Ri,Lt),Lt|=c;return vt(r,s,h,a),s.child}function Ag(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Oc(r,s,a,c,h){var p=Ct(a)?Nr:ht.current;return p=wi(s,p),Ii(s,h),a=Tc(r,s,a,c,p,h),c=Ic(),r!==null&&!Tt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~h,In(r,s,h)):(Oe&&c&&lc(s),s.flags|=1,vt(r,s,a,h),s.child)}function bg(r,s,a,c,h){if(Ct(a)){var p=!0;xa(s)}else p=!1;if(Ii(s,h),s.stateNode===null)Ba(r,s),wg(s,a,c),bc(s,a,c,h),c=!0;else if(r===null){var v=s.stateNode,E=s.memoizedProps;v.props=E;var x=v.context,R=a.contextType;typeof R=="object"&&R!==null?R=Vt(R):(R=Ct(a)?Nr:ht.current,R=wi(s,R));var F=a.getDerivedStateFromProps,V=typeof F=="function"||typeof v.getSnapshotBeforeUpdate=="function";V||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==c||x!==R)&&Eg(s,v,c,R),Xn=!1;var M=s.memoizedState;v.state=M,ba(s,c,v,h),x=s.memoizedState,E!==c||M!==x||xt.current||Xn?(typeof F=="function"&&(Ac(s,a,F,c),x=s.memoizedState),(E=Xn||_g(s,a,E,c,M,x,R))?(V||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=x),v.props=c,v.state=x,v.context=R,c=E):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,qm(r,s),E=s.memoizedProps,R=s.type===s.elementType?E:Jt(s.type,E),v.props=R,V=s.pendingProps,M=v.context,x=a.contextType,typeof x=="object"&&x!==null?x=Vt(x):(x=Ct(a)?Nr:ht.current,x=wi(s,x));var q=a.getDerivedStateFromProps;(F=typeof q=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(E!==V||M!==x)&&Eg(s,v,c,x),Xn=!1,M=s.memoizedState,v.state=M,ba(s,c,v,h);var Q=s.memoizedState;E!==V||M!==Q||xt.current||Xn?(typeof q=="function"&&(Ac(s,a,q,c),Q=s.memoizedState),(R=Xn||_g(s,a,R,c,M,Q,x)||!1)?(F||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Q,x),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Q,x)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||E===r.memoizedProps&&M===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&M===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Q),v.props=c,v.state=Q,v.context=x,c=R):(typeof v.componentDidUpdate!="function"||E===r.memoizedProps&&M===r.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&M===r.memoizedState||(s.flags|=1024),c=!1)}return Lc(r,s,a,c,p,h)}function Lc(r,s,a,c,h,p){Ag(r,s);var v=(s.flags&128)!==0;if(!c&&!v)return h&&Fm(s,a,!1),In(r,s,p);c=s.stateNode,mC.current=s;var E=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,r!==null&&v?(s.child=Ci(s,r.child,null,p),s.child=Ci(s,null,E,p)):vt(r,s,E,p),s.memoizedState=c.state,h&&Fm(s,a,!0),s.child}function Dg(r){var s=r.stateNode;s.pendingContext?Om(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Om(r,s.context,!1),_c(r,s.containerInfo)}function Mg(r,s,a,c,h){return xi(),hc(h),s.flags|=256,vt(r,s,a,c),s.child}var Fc={dehydrated:null,treeContext:null,retryLane:0};function jc(r){return{baseLanes:r,cachePool:null,transitions:null}}function Og(r,s,a){var c=s.pendingProps,h=je.current,p=!1,v=(s.flags&128)!==0,E;if((E=v)||(E=r!==null&&r.memoizedState===null?!1:(h&2)!==0),E?(p=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(h|=1),Ne(je,h&1),r===null)return dc(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(v=c.children,r=c.fallback,p?(c=s.mode,p=s.child,v={mode:"hidden",children:v},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=v):p=Za(v,c,0,null),r=Vr(r,c,a,null),p.return=s,r.return=s,p.sibling=r,s.child=p,s.child.memoizedState=jc(a),s.memoizedState=Fc,r):Vc(s,v));if(h=r.memoizedState,h!==null&&(E=h.dehydrated,E!==null))return gC(r,s,v,c,E,h,a);if(p){p=c.fallback,v=s.mode,h=r.child,E=h.sibling;var x={mode:"hidden",children:c.children};return(v&1)===0&&s.child!==h?(c=s.child,c.childLanes=0,c.pendingProps=x,s.deletions=null):(c=ir(h,x),c.subtreeFlags=h.subtreeFlags&14680064),E!==null?p=ir(E,p):(p=Vr(p,v,a,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,v=r.child.memoizedState,v=v===null?jc(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=r.childLanes&~a,s.memoizedState=Fc,c}return p=r.child,r=p.sibling,c=ir(p,{mode:"visible",children:c.children}),(s.mode&1)===0&&(c.lanes=a),c.return=s,c.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=c,s.memoizedState=null,c}function Vc(r,s){return s=Za({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Ua(r,s,a,c){return c!==null&&hc(c),Ci(s,r.child,null,a),r=Vc(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function gC(r,s,a,c,h,p,v){if(a)return s.flags&256?(s.flags&=-257,c=Dc(Error(n(422))),Ua(r,s,v,c)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(p=c.fallback,h=s.mode,c=Za({mode:"visible",children:c.children},h,0,null),p=Vr(p,h,v,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,(s.mode&1)!==0&&Ci(s,r.child,null,v),s.child.memoizedState=jc(v),s.memoizedState=Fc,p);if((s.mode&1)===0)return Ua(r,s,v,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var E=c.dgst;return c=E,p=Error(n(419)),c=Dc(p,c,void 0),Ua(r,s,v,c)}if(E=(v&r.childLanes)!==0,Tt||E){if(c=et,c!==null){switch(v&-v){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|v))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,Cn(r,h),tn(c,r,h,-1))}return td(),c=Dc(Error(n(421))),Ua(r,s,v,c)}return h.data==="$?"?(s.flags|=128,s.child=r.child,s=NC.bind(null,r),h._reactRetry=s,null):(r=p.treeContext,Ot=Gn(h.nextSibling),Mt=s,Oe=!0,Xt=null,r!==null&&(Ft[jt++]=Sn,Ft[jt++]=xn,Ft[jt++]=Rr,Sn=r.id,xn=r.overflow,Rr=s),s=Vc(s,c.children),s.flags|=4096,s)}function Lg(r,s,a){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),gc(r.return,s,a)}function Uc(r,s,a,c,h){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=h)}function Fg(r,s,a){var c=s.pendingProps,h=c.revealOrder,p=c.tail;if(vt(r,s,c.children,a),c=je.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Lg(r,a,s);else if(r.tag===19)Lg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}if(Ne(je,c),(s.mode&1)===0)s.memoizedState=null;else switch(h){case"forwards":for(a=s.child,h=null;a!==null;)r=a.alternate,r!==null&&Da(r)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Uc(s,!1,h,a,p);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(r=h.alternate,r!==null&&Da(r)===null){s.child=h;break}r=h.sibling,h.sibling=a,a=h,h=r}Uc(s,!0,a,null,p);break;case"together":Uc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ba(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function In(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Or|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(n(153));if(s.child!==null){for(r=s.child,a=ir(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=ir(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function yC(r,s,a){switch(s.tag){case 3:Dg(s),xi();break;case 5:Xm(s);break;case 1:Ct(s.type)&&xa(s);break;case 4:_c(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,h=s.memoizedProps.value;Ne(Na,c._currentValue),c._currentValue=h;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(Ne(je,je.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?Og(r,s,a):(Ne(je,je.current&1),r=In(r,s,a),r!==null?r.sibling:null);Ne(je,je.current&1);break;case 19:if(c=(a&s.childLanes)!==0,(r.flags&128)!==0){if(c)return Fg(r,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Ne(je,je.current),c)break;return null;case 22:case 23:return s.lanes=0,Rg(r,s,a)}return In(r,s,a)}var jg,Bc,Vg,Ug;jg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Bc=function(){},Vg=function(r,s,a,c){var h=r.memoizedProps;if(h!==c){r=s.stateNode,Dr(dn.current);var p=null;switch(a){case"input":h=gu(r,h),c=gu(r,c),p=[];break;case"select":h=G({},h,{value:void 0}),c=G({},c,{value:void 0}),p=[];break;case"textarea":h=_u(r,h),c=_u(r,c),p=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(r.onclick=wa)}Eu(a,c);var v;a=null;for(R in h)if(!c.hasOwnProperty(R)&&h.hasOwnProperty(R)&&h[R]!=null)if(R==="style"){var E=h[R];for(v in E)E.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(o.hasOwnProperty(R)?p||(p=[]):(p=p||[]).push(R,null));for(R in c){var x=c[R];if(E=h?.[R],c.hasOwnProperty(R)&&x!==E&&(x!=null||E!=null))if(R==="style")if(E){for(v in E)!E.hasOwnProperty(v)||x&&x.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in x)x.hasOwnProperty(v)&&E[v]!==x[v]&&(a||(a={}),a[v]=x[v])}else a||(p||(p=[]),p.push(R,a)),a=x;else R==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,E=E?E.__html:void 0,x!=null&&E!==x&&(p=p||[]).push(R,x)):R==="children"?typeof x!="string"&&typeof x!="number"||(p=p||[]).push(R,""+x):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(o.hasOwnProperty(R)?(x!=null&&R==="onScroll"&&be("scroll",r),p||E===x||(p=[])):(p=p||[]).push(R,x))}a&&(p=p||[]).push("style",a);var R=p;(s.updateQueue=R)&&(s.flags|=4)}},Ug=function(r,s,a,c){a!==c&&(s.flags|=4)};function $s(r,s){if(!Oe)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function pt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,c=0;if(s)for(var h=r.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=c,r.childLanes=a,s}function vC(r,s,a){var c=s.pendingProps;switch(uc(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(s),null;case 1:return Ct(s.type)&&Sa(),pt(s),null;case 3:return c=s.stateNode,ki(),De(xt),De(ht),Sc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(ka(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Xt!==null&&(Jc(Xt),Xt=null))),Bc(r,s),pt(s),null;case 5:wc(s);var h=Dr(Vs.current);if(a=s.type,r!==null&&s.stateNode!=null)Vg(r,s,a,c,h),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(n(166));return pt(s),null}if(r=Dr(dn.current),ka(s)){c=s.stateNode,a=s.type;var p=s.memoizedProps;switch(c[cn]=s,c[Ms]=p,r=(s.mode&1)!==0,a){case"dialog":be("cancel",c),be("close",c);break;case"iframe":case"object":case"embed":be("load",c);break;case"video":case"audio":for(h=0;h<As.length;h++)be(As[h],c);break;case"source":be("error",c);break;case"img":case"image":case"link":be("error",c),be("load",c);break;case"details":be("toggle",c);break;case"input":wp(c,p),be("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},be("invalid",c);break;case"textarea":xp(c,p),be("invalid",c)}Eu(a,p),h=null;for(var v in p)if(p.hasOwnProperty(v)){var E=p[v];v==="children"?typeof E=="string"?c.textContent!==E&&(p.suppressHydrationWarning!==!0&&_a(c.textContent,E,r),h=["children",E]):typeof E=="number"&&c.textContent!==""+E&&(p.suppressHydrationWarning!==!0&&_a(c.textContent,E,r),h=["children",""+E]):o.hasOwnProperty(v)&&E!=null&&v==="onScroll"&&be("scroll",c)}switch(a){case"input":Qo(c),Sp(c,p,!0);break;case"textarea":Qo(c),Tp(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=wa)}c=h,s.updateQueue=c,c!==null&&(s.flags|=4)}else{v=h.nodeType===9?h:h.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Ip(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=v.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof c.is=="string"?r=v.createElement(a,{is:c.is}):(r=v.createElement(a),a==="select"&&(v=r,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):r=v.createElementNS(r,a),r[cn]=s,r[Ms]=c,jg(r,s,!1,!1),s.stateNode=r;e:{switch(v=Su(a,c),a){case"dialog":be("cancel",r),be("close",r),h=c;break;case"iframe":case"object":case"embed":be("load",r),h=c;break;case"video":case"audio":for(h=0;h<As.length;h++)be(As[h],r);h=c;break;case"source":be("error",r),h=c;break;case"img":case"image":case"link":be("error",r),be("load",r),h=c;break;case"details":be("toggle",r),h=c;break;case"input":wp(r,c),h=gu(r,c),be("invalid",r);break;case"option":h=c;break;case"select":r._wrapperState={wasMultiple:!!c.multiple},h=G({},c,{value:void 0}),be("invalid",r);break;case"textarea":xp(r,c),h=_u(r,c),be("invalid",r);break;default:h=c}Eu(a,h),E=h;for(p in E)if(E.hasOwnProperty(p)){var x=E[p];p==="style"?Np(r,x):p==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&kp(r,x)):p==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&hs(r,x):typeof x=="number"&&hs(r,""+x):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?x!=null&&p==="onScroll"&&be("scroll",r):x!=null&&b(r,p,x,v))}switch(a){case"input":Qo(r),Sp(r,c,!1);break;case"textarea":Qo(r),Tp(r);break;case"option":c.value!=null&&r.setAttribute("value",""+xe(c.value));break;case"select":r.multiple=!!c.multiple,p=c.value,p!=null?li(r,!!c.multiple,p,!1):c.defaultValue!=null&&li(r,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(r.onclick=wa)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return pt(s),null;case 6:if(r&&s.stateNode!=null)Ug(r,s,r.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(n(166));if(a=Dr(Vs.current),Dr(dn.current),ka(s)){if(c=s.stateNode,a=s.memoizedProps,c[cn]=s,(p=c.nodeValue!==a)&&(r=Mt,r!==null))switch(r.tag){case 3:_a(c.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&_a(c.nodeValue,a,(r.mode&1)!==0)}p&&(s.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[cn]=s,s.stateNode=c}return pt(s),null;case 13:if(De(je),c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Oe&&Ot!==null&&(s.mode&1)!==0&&(s.flags&128)===0)zm(),xi(),s.flags|=98560,p=!1;else if(p=ka(s),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(n(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[cn]=s}else xi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),p=!1}else Xt!==null&&(Jc(Xt),Xt=null),p=!0;if(!p)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(c=c!==null,c!==(r!==null&&r.memoizedState!==null)&&c&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(je.current&1)!==0?Je===0&&(Je=3):td())),s.updateQueue!==null&&(s.flags|=4),pt(s),null);case 4:return ki(),Bc(r,s),r===null&&bs(s.stateNode.containerInfo),pt(s),null;case 10:return mc(s.type._context),pt(s),null;case 17:return Ct(s.type)&&Sa(),pt(s),null;case 19:if(De(je),p=s.memoizedState,p===null)return pt(s),null;if(c=(s.flags&128)!==0,v=p.rendering,v===null)if(c)$s(p,!1);else{if(Je!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(v=Da(r),v!==null){for(s.flags|=128,$s(p,!1),c=v.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=a,a=s.child;a!==null;)p=a,r=c,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=r,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,r=v.dependencies,p.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ne(je,je.current&1|2),s.child}r=r.sibling}p.tail!==null&&He()>Ai&&(s.flags|=128,c=!0,$s(p,!1),s.lanes=4194304)}else{if(!c)if(r=Da(v),r!==null){if(s.flags|=128,c=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),$s(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Oe)return pt(s),null}else 2*He()-p.renderingStartTime>Ai&&a!==1073741824&&(s.flags|=128,c=!0,$s(p,!1),s.lanes=4194304);p.isBackwards?(v.sibling=s.child,s.child=v):(a=p.last,a!==null?a.sibling=v:s.child=v,p.last=v)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=He(),s.sibling=null,a=je.current,Ne(je,c?a&1|2:a&1),s):(pt(s),null);case 22:case 23:return ed(),c=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Lt&1073741824)!==0&&(pt(s),s.subtreeFlags&6&&(s.flags|=8192)):pt(s),null;case 24:return null;case 25:return null}throw Error(n(156,s.tag))}function _C(r,s){switch(uc(s),s.tag){case 1:return Ct(s.type)&&Sa(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ki(),De(xt),De(ht),Sc(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return wc(s),null;case 13:if(De(je),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(n(340));xi()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return De(je),null;case 4:return ki(),null;case 10:return mc(s.type._context),null;case 22:case 23:return ed(),null;case 24:return null;default:return null}}var Wa=!1,mt=!1,wC=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ni(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){We(r,s,c)}else a.current=null}function Wc(r,s,a){try{a()}catch(c){We(r,s,c)}}var Bg=!1;function EC(r,s){if(ec=la,r=_m(),Ku(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,E=-1,x=-1,R=0,F=0,V=r,M=null;t:for(;;){for(var q;V!==a||h!==0&&V.nodeType!==3||(E=v+h),V!==p||c!==0&&V.nodeType!==3||(x=v+c),V.nodeType===3&&(v+=V.nodeValue.length),(q=V.firstChild)!==null;)M=V,V=q;for(;;){if(V===r)break t;if(M===a&&++R===h&&(E=v),M===p&&++F===c&&(x=v),(q=V.nextSibling)!==null)break;V=M,M=V.parentNode}V=q}a=E===-1||x===-1?null:{start:E,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(tc={focusedElem:r,selectionRange:a},la=!1,Y=s;Y!==null;)if(s=Y,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Y=r;else for(;Y!==null;){s=Y;try{var Q=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var X=Q.memoizedProps,Ke=Q.memoizedState,k=s.stateNode,T=k.getSnapshotBeforeUpdate(s.elementType===s.type?X:Jt(s.type,X),Ke);k.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var P=s.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(W){We(s,s.return,W)}if(r=s.sibling,r!==null){r.return=s.return,Y=r;break}Y=s.return}return Q=Bg,Bg=!1,Q}function Hs(r,s,a){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&r)===r){var p=h.destroy;h.destroy=void 0,p!==void 0&&Wc(s,a,p)}h=h.next}while(h!==c)}}function za(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}}function zc(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Wg(r){var s=r.alternate;s!==null&&(r.alternate=null,Wg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[cn],delete s[Ms],delete s[sc],delete s[rC],delete s[iC])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function zg(r){return r.tag===5||r.tag===3||r.tag===4}function $g(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||zg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $c(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=wa));else if(c!==4&&(r=r.child,r!==null))for($c(r,s,a),r=r.sibling;r!==null;)$c(r,s,a),r=r.sibling}function Hc(r,s,a){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(c!==4&&(r=r.child,r!==null))for(Hc(r,s,a),r=r.sibling;r!==null;)Hc(r,s,a),r=r.sibling}var ot=null,Zt=!1;function Zn(r,s,a){for(a=a.child;a!==null;)Hg(r,s,a),a=a.sibling}function Hg(r,s,a){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(na,a)}catch{}switch(a.tag){case 5:mt||Ni(a,s);case 6:var c=ot,h=Zt;ot=null,Zn(r,s,a),ot=c,Zt=h,ot!==null&&(Zt?(r=ot,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):ot.removeChild(a.stateNode));break;case 18:ot!==null&&(Zt?(r=ot,a=a.stateNode,r.nodeType===8?ic(r.parentNode,a):r.nodeType===1&&ic(r,a),xs(r)):ic(ot,a.stateNode));break;case 4:c=ot,h=Zt,ot=a.stateNode.containerInfo,Zt=!0,Zn(r,s,a),ot=c,Zt=h;break;case 0:case 11:case 14:case 15:if(!mt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var p=h,v=p.destroy;p=p.tag,v!==void 0&&((p&2)!==0||(p&4)!==0)&&Wc(a,s,v),h=h.next}while(h!==c)}Zn(r,s,a);break;case 1:if(!mt&&(Ni(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(E){We(a,s,E)}Zn(r,s,a);break;case 21:Zn(r,s,a);break;case 22:a.mode&1?(mt=(c=mt)||a.memoizedState!==null,Zn(r,s,a),mt=c):Zn(r,s,a);break;default:Zn(r,s,a)}}function Kg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new wC),s.forEach(function(c){var h=RC.bind(null,r,c);a.has(c)||(a.add(c),c.then(h,h))})}}function en(r,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var p=r,v=s,E=v;e:for(;E!==null;){switch(E.tag){case 5:ot=E.stateNode,Zt=!1;break e;case 3:ot=E.stateNode.containerInfo,Zt=!0;break e;case 4:ot=E.stateNode.containerInfo,Zt=!0;break e}E=E.return}if(ot===null)throw Error(n(160));Hg(p,v,h),ot=null,Zt=!1;var x=h.alternate;x!==null&&(x.return=null),h.return=null}catch(R){We(h,s,R)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Gg(s,r),s=s.sibling}function Gg(r,s){var a=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(en(s,r),fn(r),c&4){try{Hs(3,r,r.return),za(3,r)}catch(X){We(r,r.return,X)}try{Hs(5,r,r.return)}catch(X){We(r,r.return,X)}}break;case 1:en(s,r),fn(r),c&512&&a!==null&&Ni(a,a.return);break;case 5:if(en(s,r),fn(r),c&512&&a!==null&&Ni(a,a.return),r.flags&32){var h=r.stateNode;try{hs(h,"")}catch(X){We(r,r.return,X)}}if(c&4&&(h=r.stateNode,h!=null)){var p=r.memoizedProps,v=a!==null?a.memoizedProps:p,E=r.type,x=r.updateQueue;if(r.updateQueue=null,x!==null)try{E==="input"&&p.type==="radio"&&p.name!=null&&Ep(h,p),Su(E,v);var R=Su(E,p);for(v=0;v<x.length;v+=2){var F=x[v],V=x[v+1];F==="style"?Np(h,V):F==="dangerouslySetInnerHTML"?kp(h,V):F==="children"?hs(h,V):b(h,F,V,R)}switch(E){case"input":yu(h,p);break;case"textarea":Cp(h,p);break;case"select":var M=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var q=p.value;q!=null?li(h,!!p.multiple,q,!1):M!==!!p.multiple&&(p.defaultValue!=null?li(h,!!p.multiple,p.defaultValue,!0):li(h,!!p.multiple,p.multiple?[]:"",!1))}h[Ms]=p}catch(X){We(r,r.return,X)}}break;case 6:if(en(s,r),fn(r),c&4){if(r.stateNode===null)throw Error(n(162));h=r.stateNode,p=r.memoizedProps;try{h.nodeValue=p}catch(X){We(r,r.return,X)}}break;case 3:if(en(s,r),fn(r),c&4&&a!==null&&a.memoizedState.isDehydrated)try{xs(s.containerInfo)}catch(X){We(r,r.return,X)}break;case 4:en(s,r),fn(r);break;case 13:en(s,r),fn(r),h=r.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(qc=He())),c&4&&Kg(r);break;case 22:if(F=a!==null&&a.memoizedState!==null,r.mode&1?(mt=(R=mt)||F,en(s,r),mt=R):en(s,r),fn(r),c&8192){if(R=r.memoizedState!==null,(r.stateNode.isHidden=R)&&!F&&(r.mode&1)!==0)for(Y=r,F=r.child;F!==null;){for(V=Y=F;Y!==null;){switch(M=Y,q=M.child,M.tag){case 0:case 11:case 14:case 15:Hs(4,M,M.return);break;case 1:Ni(M,M.return);var Q=M.stateNode;if(typeof Q.componentWillUnmount=="function"){c=M,a=M.return;try{s=c,Q.props=s.memoizedProps,Q.state=s.memoizedState,Q.componentWillUnmount()}catch(X){We(c,a,X)}}break;case 5:Ni(M,M.return);break;case 22:if(M.memoizedState!==null){Qg(V);continue}}q!==null?(q.return=M,Y=q):Qg(V)}F=F.sibling}e:for(F=null,V=r;;){if(V.tag===5){if(F===null){F=V;try{h=V.stateNode,R?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(E=V.stateNode,x=V.memoizedProps.style,v=x!=null&&x.hasOwnProperty("display")?x.display:null,E.style.display=Pp("display",v))}catch(X){We(r,r.return,X)}}}else if(V.tag===6){if(F===null)try{V.stateNode.nodeValue=R?"":V.memoizedProps}catch(X){We(r,r.return,X)}}else if((V.tag!==22&&V.tag!==23||V.memoizedState===null||V===r)&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===r)break e;for(;V.sibling===null;){if(V.return===null||V.return===r)break e;F===V&&(F=null),V=V.return}F===V&&(F=null),V.sibling.return=V.return,V=V.sibling}}break;case 19:en(s,r),fn(r),c&4&&Kg(r);break;case 21:break;default:en(s,r),fn(r)}}function fn(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(zg(a)){var c=a;break e}a=a.return}throw Error(n(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(hs(h,""),c.flags&=-33);var p=$g(r);Hc(r,p,h);break;case 3:case 4:var v=c.stateNode.containerInfo,E=$g(r);$c(r,E,v);break;default:throw Error(n(161))}}catch(x){We(r,r.return,x)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function SC(r,s,a){Y=r,qg(r)}function qg(r,s,a){for(var c=(r.mode&1)!==0;Y!==null;){var h=Y,p=h.child;if(h.tag===22&&c){var v=h.memoizedState!==null||Wa;if(!v){var E=h.alternate,x=E!==null&&E.memoizedState!==null||mt;E=Wa;var R=mt;if(Wa=v,(mt=x)&&!R)for(Y=h;Y!==null;)v=Y,x=v.child,v.tag===22&&v.memoizedState!==null?Xg(h):x!==null?(x.return=v,Y=x):Xg(h);for(;p!==null;)Y=p,qg(p),p=p.sibling;Y=h,Wa=E,mt=R}Yg(r)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,Y=p):Yg(r)}}function Yg(r){for(;Y!==null;){var s=Y;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:mt||za(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!mt)if(a===null)c.componentDidMount();else{var h=s.elementType===s.type?a.memoizedProps:Jt(s.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=s.updateQueue;p!==null&&Qm(s,p,c);break;case 3:var v=s.updateQueue;if(v!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Qm(s,v,a)}break;case 5:var E=s.stateNode;if(a===null&&s.flags&4){a=E;var x=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var R=s.alternate;if(R!==null){var F=R.memoizedState;if(F!==null){var V=F.dehydrated;V!==null&&xs(V)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}mt||s.flags&512&&zc(s)}catch(M){We(s,s.return,M)}}if(s===r){Y=null;break}if(a=s.sibling,a!==null){a.return=s.return,Y=a;break}Y=s.return}}function Qg(r){for(;Y!==null;){var s=Y;if(s===r){Y=null;break}var a=s.sibling;if(a!==null){a.return=s.return,Y=a;break}Y=s.return}}function Xg(r){for(;Y!==null;){var s=Y;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{za(4,s)}catch(x){We(s,a,x)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var h=s.return;try{c.componentDidMount()}catch(x){We(s,h,x)}}var p=s.return;try{zc(s)}catch(x){We(s,p,x)}break;case 5:var v=s.return;try{zc(s)}catch(x){We(s,v,x)}}}catch(x){We(s,s.return,x)}if(s===r){Y=null;break}var E=s.sibling;if(E!==null){E.return=s.return,Y=E;break}Y=s.return}}var xC=Math.ceil,$a=O.ReactCurrentDispatcher,Kc=O.ReactCurrentOwner,Bt=O.ReactCurrentBatchConfig,me=0,et=null,qe=null,at=0,Lt=0,Ri=qn(0),Je=0,Ks=null,Or=0,Ha=0,Gc=0,Gs=null,It=null,qc=0,Ai=1/0,kn=null,Ka=!1,Yc=null,er=null,Ga=!1,tr=null,qa=0,qs=0,Qc=null,Ya=-1,Qa=0;function _t(){return(me&6)!==0?He():Ya!==-1?Ya:Ya=He()}function nr(r){return(r.mode&1)===0?1:(me&2)!==0&&at!==0?at&-at:oC.transition!==null?(Qa===0&&(Qa=$p()),Qa):(r=Ce,r!==0||(r=window.event,r=r===void 0?16:Zp(r.type)),r)}function tn(r,s,a,c){if(50<qs)throw qs=0,Qc=null,Error(n(185));vs(r,a,c),((me&2)===0||r!==et)&&(r===et&&((me&2)===0&&(Ha|=a),Je===4&&rr(r,at)),kt(r,c),a===1&&me===0&&(s.mode&1)===0&&(Ai=He()+500,Ca&&Qn()))}function kt(r,s){var a=r.callbackNode;ox(r,s);var c=sa(r,r===et?at:0);if(c===0)a!==null&&Bp(a),r.callbackNode=null,r.callbackPriority=0;else if(s=c&-c,r.callbackPriority!==s){if(a!=null&&Bp(a),s===1)r.tag===0?sC(Zg.bind(null,r)):jm(Zg.bind(null,r)),tC(function(){(me&6)===0&&Qn()}),a=null;else{switch(Hp(c)){case 1:a=Nu;break;case 4:a=Wp;break;case 16:a=ta;break;case 536870912:a=zp;break;default:a=ta}a=ay(a,Jg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Jg(r,s){if(Ya=-1,Qa=0,(me&6)!==0)throw Error(n(327));var a=r.callbackNode;if(bi()&&r.callbackNode!==a)return null;var c=sa(r,r===et?at:0);if(c===0)return null;if((c&30)!==0||(c&r.expiredLanes)!==0||s)s=Xa(r,c);else{s=c;var h=me;me|=2;var p=ty();(et!==r||at!==s)&&(kn=null,Ai=He()+500,Fr(r,s));do try{IC();break}catch(E){ey(r,E)}while(!0);pc(),$a.current=p,me=h,qe!==null?s=0:(et=null,at=0,s=Je)}if(s!==0){if(s===2&&(h=Ru(r),h!==0&&(c=h,s=Xc(r,h))),s===1)throw a=Ks,Fr(r,0),rr(r,c),kt(r,He()),a;if(s===6)rr(r,c);else{if(h=r.current.alternate,(c&30)===0&&!CC(h)&&(s=Xa(r,c),s===2&&(p=Ru(r),p!==0&&(c=p,s=Xc(r,p))),s===1))throw a=Ks,Fr(r,0),rr(r,c),kt(r,He()),a;switch(r.finishedWork=h,r.finishedLanes=c,s){case 0:case 1:throw Error(n(345));case 2:jr(r,It,kn);break;case 3:if(rr(r,c),(c&130023424)===c&&(s=qc+500-He(),10<s)){if(sa(r,0)!==0)break;if(h=r.suspendedLanes,(h&c)!==c){_t(),r.pingedLanes|=r.suspendedLanes&h;break}r.timeoutHandle=rc(jr.bind(null,r,It,kn),s);break}jr(r,It,kn);break;case 4:if(rr(r,c),(c&4194240)===c)break;for(s=r.eventTimes,h=-1;0<c;){var v=31-Yt(c);p=1<<v,v=s[v],v>h&&(h=v),c&=~p}if(c=h,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*xC(c/1960))-c,10<c){r.timeoutHandle=rc(jr.bind(null,r,It,kn),c);break}jr(r,It,kn);break;case 5:jr(r,It,kn);break;default:throw Error(n(329))}}}return kt(r,He()),r.callbackNode===a?Jg.bind(null,r):null}function Xc(r,s){var a=Gs;return r.current.memoizedState.isDehydrated&&(Fr(r,s).flags|=256),r=Xa(r,s),r!==2&&(s=It,It=a,s!==null&&Jc(s)),r}function Jc(r){It===null?It=r:It.push.apply(It,r)}function CC(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],p=h.getSnapshot;h=h.value;try{if(!Qt(p(),h))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rr(r,s){for(s&=~Gc,s&=~Ha,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Yt(s),c=1<<a;r[a]=-1,s&=~c}}function Zg(r){if((me&6)!==0)throw Error(n(327));bi();var s=sa(r,0);if((s&1)===0)return kt(r,He()),null;var a=Xa(r,s);if(r.tag!==0&&a===2){var c=Ru(r);c!==0&&(s=c,a=Xc(r,c))}if(a===1)throw a=Ks,Fr(r,0),rr(r,s),kt(r,He()),a;if(a===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,jr(r,It,kn),kt(r,He()),null}function Zc(r,s){var a=me;me|=1;try{return r(s)}finally{me=a,me===0&&(Ai=He()+500,Ca&&Qn())}}function Lr(r){tr!==null&&tr.tag===0&&(me&6)===0&&bi();var s=me;me|=1;var a=Bt.transition,c=Ce;try{if(Bt.transition=null,Ce=1,r)return r()}finally{Ce=c,Bt.transition=a,me=s,(me&6)===0&&Qn()}}function ed(){Lt=Ri.current,De(Ri)}function Fr(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,eC(a)),qe!==null)for(a=qe.return;a!==null;){var c=a;switch(uc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Sa();break;case 3:ki(),De(xt),De(ht),Sc();break;case 5:wc(c);break;case 4:ki();break;case 13:De(je);break;case 19:De(je);break;case 10:mc(c.type._context);break;case 22:case 23:ed()}a=a.return}if(et=r,qe=r=ir(r.current,null),at=Lt=s,Je=0,Ks=null,Gc=Ha=Or=0,It=Gs=null,br!==null){for(s=0;s<br.length;s++)if(a=br[s],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,p=a.pending;if(p!==null){var v=p.next;p.next=h,c.next=v}a.pending=c}br=null}return r}function ey(r,s){do{var a=qe;try{if(pc(),Ma.current=ja,Oa){for(var c=Ve.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}Oa=!1}if(Mr=0,Ze=Xe=Ve=null,Us=!1,Bs=0,Kc.current=null,a===null||a.return===null){Je=1,Ks=s,qe=null;break}e:{var p=r,v=a.return,E=a,x=s;if(s=at,E.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var R=x,F=E,V=F.tag;if((F.mode&1)===0&&(V===0||V===11||V===15)){var M=F.alternate;M?(F.updateQueue=M.updateQueue,F.memoizedState=M.memoizedState,F.lanes=M.lanes):(F.updateQueue=null,F.memoizedState=null)}var q=Tg(v);if(q!==null){q.flags&=-257,Ig(q,v,E,p,s),q.mode&1&&Cg(p,R,s),s=q,x=R;var Q=s.updateQueue;if(Q===null){var X=new Set;X.add(x),s.updateQueue=X}else Q.add(x);break e}else{if((s&1)===0){Cg(p,R,s),td();break e}x=Error(n(426))}}else if(Oe&&E.mode&1){var Ke=Tg(v);if(Ke!==null){(Ke.flags&65536)===0&&(Ke.flags|=256),Ig(Ke,v,E,p,s),hc(Pi(x,E));break e}}p=x=Pi(x,E),Je!==4&&(Je=2),Gs===null?Gs=[p]:Gs.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,s&=-s,p.lanes|=s;var k=Sg(p,x,s);Ym(p,k);break e;case 1:E=x;var T=p.type,P=p.stateNode;if((p.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(er===null||!er.has(P)))){p.flags|=65536,s&=-s,p.lanes|=s;var W=xg(p,E,s);Ym(p,W);break e}}p=p.return}while(p!==null)}ry(a)}catch(Z){s=Z,qe===a&&a!==null&&(qe=a=a.return);continue}break}while(!0)}function ty(){var r=$a.current;return $a.current=ja,r===null?ja:r}function td(){(Je===0||Je===3||Je===2)&&(Je=4),et===null||(Or&268435455)===0&&(Ha&268435455)===0||rr(et,at)}function Xa(r,s){var a=me;me|=2;var c=ty();(et!==r||at!==s)&&(kn=null,Fr(r,s));do try{TC();break}catch(h){ey(r,h)}while(!0);if(pc(),me=a,$a.current=c,qe!==null)throw Error(n(261));return et=null,at=0,Je}function TC(){for(;qe!==null;)ny(qe)}function IC(){for(;qe!==null&&!XS();)ny(qe)}function ny(r){var s=oy(r.alternate,r,Lt);r.memoizedProps=r.pendingProps,s===null?ry(r):qe=s,Kc.current=null}function ry(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=vC(a,s,Lt),a!==null){qe=a;return}}else{if(a=_C(a,s),a!==null){a.flags&=32767,qe=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Je=6,qe=null;return}}if(s=s.sibling,s!==null){qe=s;return}qe=s=r}while(s!==null);Je===0&&(Je=5)}function jr(r,s,a){var c=Ce,h=Bt.transition;try{Bt.transition=null,Ce=1,kC(r,s,a,c)}finally{Bt.transition=h,Ce=c}return null}function kC(r,s,a,c){do bi();while(tr!==null);if((me&6)!==0)throw Error(n(327));a=r.finishedWork;var h=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var p=a.lanes|a.childLanes;if(ax(r,p),r===et&&(qe=et=null,at=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ga||(Ga=!0,ay(ta,function(){return bi(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Bt.transition,Bt.transition=null;var v=Ce;Ce=1;var E=me;me|=4,Kc.current=null,EC(r,a),Gg(a,r),Gx(tc),la=!!ec,tc=ec=null,r.current=a,SC(a),JS(),me=E,Ce=v,Bt.transition=p}else r.current=a;if(Ga&&(Ga=!1,tr=r,qa=h),p=r.pendingLanes,p===0&&(er=null),tx(a.stateNode),kt(r,He()),s!==null)for(c=r.onRecoverableError,a=0;a<s.length;a++)h=s[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(Ka)throw Ka=!1,r=Yc,Yc=null,r;return(qa&1)!==0&&r.tag!==0&&bi(),p=r.pendingLanes,(p&1)!==0?r===Qc?qs++:(qs=0,Qc=r):qs=0,Qn(),null}function bi(){if(tr!==null){var r=Hp(qa),s=Bt.transition,a=Ce;try{if(Bt.transition=null,Ce=16>r?16:r,tr===null)var c=!1;else{if(r=tr,tr=null,qa=0,(me&6)!==0)throw Error(n(331));var h=me;for(me|=4,Y=r.current;Y!==null;){var p=Y,v=p.child;if((Y.flags&16)!==0){var E=p.deletions;if(E!==null){for(var x=0;x<E.length;x++){var R=E[x];for(Y=R;Y!==null;){var F=Y;switch(F.tag){case 0:case 11:case 15:Hs(8,F,p)}var V=F.child;if(V!==null)V.return=F,Y=V;else for(;Y!==null;){F=Y;var M=F.sibling,q=F.return;if(Wg(F),F===R){Y=null;break}if(M!==null){M.return=q,Y=M;break}Y=q}}}var Q=p.alternate;if(Q!==null){var X=Q.child;if(X!==null){Q.child=null;do{var Ke=X.sibling;X.sibling=null,X=Ke}while(X!==null)}}Y=p}}if((p.subtreeFlags&2064)!==0&&v!==null)v.return=p,Y=v;else e:for(;Y!==null;){if(p=Y,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:Hs(9,p,p.return)}var k=p.sibling;if(k!==null){k.return=p.return,Y=k;break e}Y=p.return}}var T=r.current;for(Y=T;Y!==null;){v=Y;var P=v.child;if((v.subtreeFlags&2064)!==0&&P!==null)P.return=v,Y=P;else e:for(v=T;Y!==null;){if(E=Y,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:za(9,E)}}catch(Z){We(E,E.return,Z)}if(E===v){Y=null;break e}var W=E.sibling;if(W!==null){W.return=E.return,Y=W;break e}Y=E.return}}if(me=h,Qn(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(na,r)}catch{}c=!0}return c}finally{Ce=a,Bt.transition=s}}return!1}function iy(r,s,a){s=Pi(a,s),s=Sg(r,s,1),r=Jn(r,s,1),s=_t(),r!==null&&(vs(r,1,s),kt(r,s))}function We(r,s,a){if(r.tag===3)iy(r,r,a);else for(;s!==null;){if(s.tag===3){iy(s,r,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(er===null||!er.has(c))){r=Pi(a,r),r=xg(s,r,1),s=Jn(s,r,1),r=_t(),s!==null&&(vs(s,1,r),kt(s,r));break}}s=s.return}}function PC(r,s,a){var c=r.pingCache;c!==null&&c.delete(s),s=_t(),r.pingedLanes|=r.suspendedLanes&a,et===r&&(at&a)===a&&(Je===4||Je===3&&(at&130023424)===at&&500>He()-qc?Fr(r,0):Gc|=a),kt(r,s)}function sy(r,s){s===0&&((r.mode&1)===0?s=1:(s=ia,ia<<=1,(ia&130023424)===0&&(ia=4194304)));var a=_t();r=Cn(r,s),r!==null&&(vs(r,s,a),kt(r,a))}function NC(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),sy(r,a)}function RC(r,s){var a=0;switch(r.tag){case 13:var c=r.stateNode,h=r.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=r.stateNode;break;default:throw Error(n(314))}c!==null&&c.delete(s),sy(r,a)}var oy;oy=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||xt.current)Tt=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return Tt=!1,yC(r,s,a);Tt=(r.flags&131072)!==0}else Tt=!1,Oe&&(s.flags&1048576)!==0&&Vm(s,Ia,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;Ba(r,s),r=s.pendingProps;var h=wi(s,ht.current);Ii(s,a),h=Tc(null,s,c,r,h,a);var p=Ic();return s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ct(c)?(p=!0,xa(s)):p=!1,s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,vc(s),h.updater=Va,s.stateNode=h,h._reactInternals=s,bc(s,c,r,a),s=Lc(null,s,c,!0,p,a)):(s.tag=0,Oe&&p&&lc(s),vt(null,s,h,a),s=s.child),s;case 16:c=s.elementType;e:{switch(Ba(r,s),r=s.pendingProps,h=c._init,c=h(c._payload),s.type=c,h=s.tag=bC(c),r=Jt(c,r),h){case 0:s=Oc(null,s,c,r,a);break e;case 1:s=bg(null,s,c,r,a);break e;case 11:s=kg(null,s,c,r,a);break e;case 14:s=Pg(null,s,c,Jt(c.type,r),a);break e}throw Error(n(306,c,""))}return s;case 0:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Jt(c,h),Oc(r,s,c,h,a);case 1:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Jt(c,h),bg(r,s,c,h,a);case 3:e:{if(Dg(s),r===null)throw Error(n(387));c=s.pendingProps,p=s.memoizedState,h=p.element,qm(r,s),ba(s,c,null,a);var v=s.memoizedState;if(c=v.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){h=Pi(Error(n(423)),s),s=Mg(r,s,c,a,h);break e}else if(c!==h){h=Pi(Error(n(424)),s),s=Mg(r,s,c,a,h);break e}else for(Ot=Gn(s.stateNode.containerInfo.firstChild),Mt=s,Oe=!0,Xt=null,a=Km(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(xi(),c===h){s=In(r,s,a);break e}vt(r,s,c,a)}s=s.child}return s;case 5:return Xm(s),r===null&&dc(s),c=s.type,h=s.pendingProps,p=r!==null?r.memoizedProps:null,v=h.children,nc(c,h)?v=null:p!==null&&nc(c,p)&&(s.flags|=32),Ag(r,s),vt(r,s,v,a),s.child;case 6:return r===null&&dc(s),null;case 13:return Og(r,s,a);case 4:return _c(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=Ci(s,null,c,a):vt(r,s,c,a),s.child;case 11:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Jt(c,h),kg(r,s,c,h,a);case 7:return vt(r,s,s.pendingProps,a),s.child;case 8:return vt(r,s,s.pendingProps.children,a),s.child;case 12:return vt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(c=s.type._context,h=s.pendingProps,p=s.memoizedProps,v=h.value,Ne(Na,c._currentValue),c._currentValue=v,p!==null)if(Qt(p.value,v)){if(p.children===h.children&&!xt.current){s=In(r,s,a);break e}}else for(p=s.child,p!==null&&(p.return=s);p!==null;){var E=p.dependencies;if(E!==null){v=p.child;for(var x=E.firstContext;x!==null;){if(x.context===c){if(p.tag===1){x=Tn(-1,a&-a),x.tag=2;var R=p.updateQueue;if(R!==null){R=R.shared;var F=R.pending;F===null?x.next=x:(x.next=F.next,F.next=x),R.pending=x}}p.lanes|=a,x=p.alternate,x!==null&&(x.lanes|=a),gc(p.return,a,s),E.lanes|=a;break}x=x.next}}else if(p.tag===10)v=p.type===s.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(n(341));v.lanes|=a,E=v.alternate,E!==null&&(E.lanes|=a),gc(v,a,s),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===s){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}vt(r,s,h.children,a),s=s.child}return s;case 9:return h=s.type,c=s.pendingProps.children,Ii(s,a),h=Vt(h),c=c(h),s.flags|=1,vt(r,s,c,a),s.child;case 14:return c=s.type,h=Jt(c,s.pendingProps),h=Jt(c.type,h),Pg(r,s,c,h,a);case 15:return Ng(r,s,s.type,s.pendingProps,a);case 17:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:Jt(c,h),Ba(r,s),s.tag=1,Ct(c)?(r=!0,xa(s)):r=!1,Ii(s,a),wg(s,c,h),bc(s,c,h,a),Lc(null,s,c,!0,r,a);case 19:return Fg(r,s,a);case 22:return Rg(r,s,a)}throw Error(n(156,s.tag))};function ay(r,s){return Up(r,s)}function AC(r,s,a,c){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(r,s,a,c){return new AC(r,s,a,c)}function nd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function bC(r){if(typeof r=="function")return nd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===ee)return 11;if(r===Fe)return 14}return 2}function ir(r,s){var a=r.alternate;return a===null?(a=Wt(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Ja(r,s,a,c,h,p){var v=2;if(c=r,typeof r=="function")nd(r)&&(v=1);else if(typeof r=="string")v=5;else e:switch(r){case J:return Vr(a.children,h,p,s);case $:v=8,h|=8;break;case ge:return r=Wt(12,a,s,h|2),r.elementType=ge,r.lanes=p,r;case Ee:return r=Wt(13,a,s,h),r.elementType=Ee,r.lanes=p,r;case Se:return r=Wt(19,a,s,h),r.elementType=Se,r.lanes=p,r;case le:return Za(a,h,p,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case Ie:v=10;break e;case dt:v=9;break e;case ee:v=11;break e;case Fe:v=14;break e;case Qe:v=16,c=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return s=Wt(v,a,s,h),s.elementType=r,s.type=c,s.lanes=p,s}function Vr(r,s,a,c){return r=Wt(7,r,c,s),r.lanes=a,r}function Za(r,s,a,c){return r=Wt(22,r,c,s),r.elementType=le,r.lanes=a,r.stateNode={isHidden:!1},r}function rd(r,s,a){return r=Wt(6,r,null,s),r.lanes=a,r}function id(r,s,a){return s=Wt(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function DC(r,s,a,c,h){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Au(0),this.expirationTimes=Au(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Au(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function sd(r,s,a,c,h,p,v,E,x){return r=new DC(r,s,a,E,x),s===1?(s=1,p===!0&&(s|=8)):s=0,p=Wt(3,null,null,s),r.current=p,p.stateNode=r,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},vc(p),r}function MC(r,s,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:c==null?null:""+c,children:r,containerInfo:s,implementation:a}}function ly(r){if(!r)return Yn;r=r._reactInternals;e:{if(kr(r)!==r||r.tag!==1)throw Error(n(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ct(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(n(171))}if(r.tag===1){var a=r.type;if(Ct(a))return Lm(r,a,s)}return s}function uy(r,s,a,c,h,p,v,E,x){return r=sd(a,c,!0,r,h,p,v,E,x),r.context=ly(null),a=r.current,c=_t(),h=nr(a),p=Tn(c,h),p.callback=s??null,Jn(a,p,h),r.current.lanes=h,vs(r,h,c),kt(r,c),r}function el(r,s,a,c){var h=s.current,p=_t(),v=nr(h);return a=ly(a),s.context===null?s.context=a:s.pendingContext=a,s=Tn(p,v),s.payload={element:r},c=c===void 0?null:c,c!==null&&(s.callback=c),r=Jn(h,s,v),r!==null&&(tn(r,h,v,p),Aa(r,h,v)),v}function tl(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function cy(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function od(r,s){cy(r,s),(r=r.alternate)&&cy(r,s)}function OC(){return null}var dy=typeof reportError=="function"?reportError:function(r){console.error(r)};function ad(r){this._internalRoot=r}nl.prototype.render=ad.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(n(409));el(r,s,null,null)},nl.prototype.unmount=ad.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Lr(function(){el(null,r,null,null)}),s[wn]=null}};function nl(r){this._internalRoot=r}nl.prototype.unstable_scheduleHydration=function(r){if(r){var s=qp();r={blockedOn:null,target:r,priority:s};for(var a=0;a<$n.length&&s!==0&&s<$n[a].priority;a++);$n.splice(a,0,r),a===0&&Xp(r)}};function ld(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function rl(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function hy(){}function LC(r,s,a,c,h){if(h){if(typeof c=="function"){var p=c;c=function(){var R=tl(v);p.call(R)}}var v=uy(s,c,r,0,null,!1,!1,"",hy);return r._reactRootContainer=v,r[wn]=v.current,bs(r.nodeType===8?r.parentNode:r),Lr(),v}for(;h=r.lastChild;)r.removeChild(h);if(typeof c=="function"){var E=c;c=function(){var R=tl(x);E.call(R)}}var x=sd(r,0,!1,null,null,!1,!1,"",hy);return r._reactRootContainer=x,r[wn]=x.current,bs(r.nodeType===8?r.parentNode:r),Lr(function(){el(s,x,a,c)}),x}function il(r,s,a,c,h){var p=a._reactRootContainer;if(p){var v=p;if(typeof h=="function"){var E=h;h=function(){var x=tl(v);E.call(x)}}el(s,v,r,h)}else v=LC(a,s,r,h,c);return tl(v)}Kp=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=ys(s.pendingLanes);a!==0&&(bu(s,a|1),kt(s,He()),(me&6)===0&&(Ai=He()+500,Qn()))}break;case 13:Lr(function(){var c=Cn(r,1);if(c!==null){var h=_t();tn(c,r,1,h)}}),od(r,1)}},Du=function(r){if(r.tag===13){var s=Cn(r,134217728);if(s!==null){var a=_t();tn(s,r,134217728,a)}od(r,134217728)}},Gp=function(r){if(r.tag===13){var s=nr(r),a=Cn(r,s);if(a!==null){var c=_t();tn(a,r,s,c)}od(r,s)}},qp=function(){return Ce},Yp=function(r,s){var a=Ce;try{return Ce=r,s()}finally{Ce=a}},Tu=function(r,s,a){switch(s){case"input":if(yu(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==r&&c.form===r.form){var h=Ea(c);if(!h)throw Error(n(90));_p(c),yu(c,h)}}}break;case"textarea":Cp(r,a);break;case"select":s=a.value,s!=null&&li(r,!!a.multiple,s,!1)}},Dp=Zc,Mp=Lr;var FC={usingClientEntryPoint:!1,Events:[Os,vi,Ea,Ap,bp,Zc]},Ys={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jC={bundleType:Ys.bundleType,version:Ys.version,rendererPackageName:Ys.rendererPackageName,rendererConfig:Ys.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=jp(r),r===null?null:r.stateNode},findFiberByHostInstance:Ys.findFiberByHostInstance||OC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sl.isDisabled&&sl.supportsFiber)try{na=sl.inject(jC),un=sl}catch{}}return Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FC,Pt.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ld(s))throw Error(n(200));return MC(r,s,null,a)},Pt.createRoot=function(r,s){if(!ld(r))throw Error(n(299));var a=!1,c="",h=dy;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),s=sd(r,1,!1,null,null,a,!1,c,h),r[wn]=s.current,bs(r.nodeType===8?r.parentNode:r),new ad(s)},Pt.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=jp(s),r=r===null?null:r.stateNode,r},Pt.flushSync=function(r){return Lr(r)},Pt.hydrate=function(r,s,a){if(!rl(s))throw Error(n(200));return il(null,r,s,!0,a)},Pt.hydrateRoot=function(r,s,a){if(!ld(r))throw Error(n(405));var c=a!=null&&a.hydratedSources||null,h=!1,p="",v=dy;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),s=uy(s,null,r,1,a??null,h,!1,p,v),r[wn]=s.current,bs(r),c)for(r=0;r<c.length;r++)a=c[r],h=a._getVersion,h=h(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,h]:s.mutableSourceEagerHydrationData.push(a,h);return new nl(s)},Pt.render=function(r,s,a){if(!rl(s))throw Error(n(200));return il(null,r,s,!1,a)},Pt.unmountComponentAtNode=function(r){if(!rl(r))throw Error(n(40));return r._reactRootContainer?(Lr(function(){il(null,null,r,!1,function(){r._reactRootContainer=null,r[wn]=null})}),!0):!1},Pt.unstable_batchedUpdates=Zc,Pt.unstable_renderSubtreeIntoContainer=function(r,s,a,c){if(!rl(a))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return il(r,s,a,!1,c)},Pt.version="18.3.1-next-f1338f8080-20240426",Pt}var wy;function GC(){if(wy)return dd.exports;wy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),dd.exports=KC(),dd.exports}var Ey;function qC(){if(Ey)return ol;Ey=1;var t=GC();return ol.createRoot=t.createRoot,ol.hydrateRoot=t.hydrateRoot,ol}var YC=qC();const QC=Z_(YC);var Sy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z=function(t,e){if(!t)throw ts(e)},ts=function(t){return new Error("Firebase Database ("+e0.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},XC=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],u=t[n++],d=t[n++],f=((o&7)<<18|(l&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const l=t[n++],u=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|u&63)}}return e.join("")},jh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const l=t[o],u=o+1<t.length,d=u?t[o+1]:0,f=o+2<t.length,m=f?t[o+2]:0,g=l>>2,y=(l&3)<<4|d>>4;let _=(d&15)<<2|m>>6,S=m&63;f||(S=64,u||(_=64)),i.push(n[g],n[y],n[_],n[S])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(t0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],d=o<t.length?n[t.charAt(o)]:0;++o;const m=o<t.length?n[t.charAt(o)]:64;++o;const y=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||d==null||m==null||y==null)throw new JC;const _=l<<2|d>>4;if(i.push(_),m!==64){const S=d<<4&240|m>>2;if(i.push(S),y!==64){const C=m<<6&192|y;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const n0=function(t){const e=t0(t);return jh.encodeByteArray(e,!0)},Sl=function(t){return n0(t).replace(/\./g,"")},xl=function(t){try{return jh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t){return r0(void 0,t)}function r0(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!eT(n)||(t[n]=r0(t[n],e[n]));return t}function eT(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=()=>tT().__FIREBASE_DEFAULTS__,rT=()=>{if(typeof process>"u"||typeof Sy>"u")return;const t=Sy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xl(t[1]);return e&&JSON.parse(e)},Vh=()=>{try{return nT()||rT()||iT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},i0=t=>{var e,n;return(n=(e=Vh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},sT=t=>{const e=i0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},s0=()=>{var t;return(t=Vh())===null||t===void 0?void 0:t.config},o0=t=>{var e;return(e=Vh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Sl(JSON.stringify(n)),Sl(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Uh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function aT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function a0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uT(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cT(){return e0.NODE_ADMIN===!0}function dT(){try{return typeof indexedDB=="object"}catch{return!1}}function hT(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="FirebaseError";class Sr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=fT,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oo.prototype.create)}}class Oo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],u=l?pT(l,i):"Error",d=`${this.serviceName}: ${u} (${o}).`;return new Sr(o,d,i)}}function pT(t,e){return t.replace(mT,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const mT=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(t){return JSON.parse(t)}function st(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=function(t){let e={},n={},i={},o="";try{const l=t.split(".");e=yo(xl(l[0])||""),n=yo(xl(l[1])||""),o=l[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:o}},gT=function(t){const e=l0(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},yT=function(t){const e=l0(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ki(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Hd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Cl(t,e,n){const i={};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=e.call(n,t[o],o,t));return i}function Tl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=t[o],u=e[o];if(xy(l)&&xy(u)){if(!Tl(l,u))return!1}else if(l!==u)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function xy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function no(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function ro(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)i[y]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let y=0;y<16;y++)i[y]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let y=16;y<80;y++){const _=i[y-3]^i[y-8]^i[y-14]^i[y-16];i[y]=(_<<1|_>>>31)&4294967295}let o=this.chain_[0],l=this.chain_[1],u=this.chain_[2],d=this.chain_[3],f=this.chain_[4],m,g;for(let y=0;y<80;y++){y<40?y<20?(m=d^l&(u^d),g=1518500249):(m=l^u^d,g=1859775393):y<60?(m=l&u|d&(l|u),g=2400959708):(m=l^u^d,g=3395469782);const _=(o<<5|o>>>27)+m+f+g+i[y]&4294967295;f=d,d=u,u=(l<<30|l>>>2)&4294967295,l=o,o=_}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let o=0;const l=this.buf_;let u=this.inbuf_;for(;o<n;){if(u===0)for(;o<=i;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(l[u]=e.charCodeAt(o),++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}else for(;o<n;)if(l[u]=e[o],++u,++o,u===this.blockSize){this.compress_(l),u=0;break}}this.inbuf_=u,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let o=0;o<5;o++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[o]>>l&255,++i;return e}}function _T(t,e){const n=new wT(t,e);return n.subscribe.bind(n)}class wT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");ET(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=pd),o.error===void 0&&(o.error=pd),o.complete===void 0&&(o.complete=pd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ET(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pd(){}function Ql(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);if(o>=55296&&o<=56319){const l=o-55296;i++,z(i<t.length,"Surrogate pair missing trail surrogate.");const u=t.charCodeAt(i)-56320;o=65536+(l<<10)+u}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Xl=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class Zr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Mo;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TT(e))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Br){return this.instances.has(e)}getOptions(e=Br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&u.resolve(o)}return o}onInit(e,n){var i;const o=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const u=this.instances.get(o);return u&&e(u,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:CT(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Br){return this.component?this.component.multipleInstances?e:Br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CT(t){return t===Br?void 0:t}function TT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const kT={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},PT=ke.INFO,NT={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},RT=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=NT[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bh{constructor(e){this.name=e,this._logLevel=PT,this._logHandler=RT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const AT=(t,e)=>e.some(n=>t instanceof n);let Cy,Ty;function bT(){return Cy||(Cy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DT(){return Ty||(Ty=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u0=new WeakMap,Kd=new WeakMap,c0=new WeakMap,md=new WeakMap,Wh=new WeakMap;function MT(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",u)},l=()=>{n(hr(t.result)),o()},u=()=>{i(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&u0.set(n,t)}).catch(()=>{}),Wh.set(e,t),e}function OT(t){if(Kd.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",u),t.removeEventListener("abort",u)},l=()=>{n(),o()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",u),t.addEventListener("abort",u)});Kd.set(t,e)}let Gd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Kd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||c0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LT(t){Gd=t(Gd)}function FT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(gd(this),e,...n);return c0.set(i,e.sort?e.sort():[e]),hr(i)}:DT().includes(t)?function(...e){return t.apply(gd(this),e),hr(u0.get(this))}:function(...e){return hr(t.apply(gd(this),e))}}function jT(t){return typeof t=="function"?FT(t):(t instanceof IDBTransaction&&OT(t),AT(t,bT())?new Proxy(t,Gd):t)}function hr(t){if(t instanceof IDBRequest)return MT(t);if(md.has(t))return md.get(t);const e=jT(t);return e!==t&&(md.set(t,e),Wh.set(e,t)),e}const gd=t=>Wh.get(t);function VT(t,e,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const u=indexedDB.open(t,e),d=hr(u);return i&&u.addEventListener("upgradeneeded",f=>{i(hr(u.result),f.oldVersion,f.newVersion,hr(u.transaction),f)}),n&&u.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),o&&f.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const UT=["get","getKey","getAll","getAllKeys","count"],BT=["put","add","delete","clear"],yd=new Map;function Iy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yd.get(e))return yd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=BT.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||UT.includes(n)))return;const l=async function(u,...d){const f=this.transaction(u,o?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[n](...d),o&&f.done]))[0]};return yd.set(e,l),l}LT(t=>({...t,get:(e,n,i)=>Iy(e,n)||t.get(e,n,i),has:(e,n)=>!!Iy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zT(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function zT(t){const e=t.getComponent();return e?.type==="VERSION"}const qd="@firebase/app",ky="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On=new Bh("@firebase/app"),$T="@firebase/app-compat",HT="@firebase/analytics-compat",KT="@firebase/analytics",GT="@firebase/app-check-compat",qT="@firebase/app-check",YT="@firebase/auth",QT="@firebase/auth-compat",XT="@firebase/database",JT="@firebase/data-connect",ZT="@firebase/database-compat",eI="@firebase/functions",tI="@firebase/functions-compat",nI="@firebase/installations",rI="@firebase/installations-compat",iI="@firebase/messaging",sI="@firebase/messaging-compat",oI="@firebase/performance",aI="@firebase/performance-compat",lI="@firebase/remote-config",uI="@firebase/remote-config-compat",cI="@firebase/storage",dI="@firebase/storage-compat",hI="@firebase/firestore",fI="@firebase/vertexai-preview",pI="@firebase/firestore-compat",mI="firebase",gI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="[DEFAULT]",yI={[qd]:"fire-core",[$T]:"fire-core-compat",[KT]:"fire-analytics",[HT]:"fire-analytics-compat",[qT]:"fire-app-check",[GT]:"fire-app-check-compat",[YT]:"fire-auth",[QT]:"fire-auth-compat",[XT]:"fire-rtdb",[JT]:"fire-data-connect",[ZT]:"fire-rtdb-compat",[eI]:"fire-fn",[tI]:"fire-fn-compat",[nI]:"fire-iid",[rI]:"fire-iid-compat",[iI]:"fire-fcm",[sI]:"fire-fcm-compat",[oI]:"fire-perf",[aI]:"fire-perf-compat",[lI]:"fire-rc",[uI]:"fire-rc-compat",[cI]:"fire-gcs",[dI]:"fire-gcs-compat",[hI]:"fire-fst",[pI]:"fire-fst-compat",[fI]:"fire-vertex","fire-js":"fire-js",[mI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new Map,vI=new Map,Qd=new Map;function Py(t,e){try{t.container.addComponent(e)}catch(n){On.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gi(t){const e=t.name;if(Qd.has(e))return On.debug(`There were multiple attempts to register component ${e}.`),!1;Qd.set(e,t);for(const n of Il.values())Py(n,t);for(const n of vI.values())Py(n,t);return!0}function zh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new Oo("app","Firebase",_I);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=gI;function d0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Yd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw fr.create("bad-app-name",{appName:String(o)});if(n||(n=s0()),!n)throw fr.create("no-options");const l=Il.get(o);if(l){if(Tl(n,l.options)&&Tl(i,l.config))return l;throw fr.create("duplicate-app",{appName:o})}const u=new IT(o);for(const f of Qd.values())u.addComponent(f);const d=new wI(n,i,u);return Il.set(o,d),d}function h0(t=Yd){const e=Il.get(t);if(!e&&t===Yd&&s0())return d0();if(!e)throw fr.create("no-app",{appName:t});return e}function pr(t,e,n){var i;let o=(i=yI[t])!==null&&i!==void 0?i:t;n&&(o+=`-${n}`);const l=o.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),On.warn(d.join(" "));return}Gi(new Zr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="firebase-heartbeat-database",SI=1,vo="firebase-heartbeat-store";let vd=null;function f0(){return vd||(vd=VT(EI,SI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vo)}catch(n){console.warn(n)}}}}).catch(t=>{throw fr.create("idb-open",{originalErrorMessage:t.message})})),vd}async function xI(t){try{const n=(await f0()).transaction(vo),i=await n.objectStore(vo).get(p0(t));return await n.done,i}catch(e){if(e instanceof Sr)On.warn(e.message);else{const n=fr.create("idb-get",{originalErrorMessage:e?.message});On.warn(n.message)}}}async function Ny(t,e){try{const i=(await f0()).transaction(vo,"readwrite");await i.objectStore(vo).put(e,p0(t)),await i.done}catch(n){if(n instanceof Sr)On.warn(n.message);else{const i=fr.create("idb-set",{originalErrorMessage:n?.message});On.warn(i.message)}}}function p0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=1024,TI=720*60*60*1e3;class II{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PI(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ry();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=TI}),this._storage.overwrite(this._heartbeatsCache))}catch(i){On.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ry(),{heartbeatsToSend:i,unsentEntries:o}=kI(this._heartbeatsCache.heartbeats),l=Sl(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return On.warn(n),""}}}function Ry(){return new Date().toISOString().substring(0,10)}function kI(t,e=CI){const n=[];let i=t.slice();for(const o of t){const l=n.find(u=>u.agent===o.agent);if(l){if(l.dates.push(o.date),Ay(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Ay(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class PI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dT()?hT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ny(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ny(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ay(t){return Sl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t){Gi(new Zr("platform-logger",e=>new WT(e),"PRIVATE")),Gi(new Zr("heartbeat",e=>new II(e),"PRIVATE")),pr(qd,ky,t),pr(qd,ky,"esm2017"),pr("fire-js","")}NI("");function $h(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function m0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RI=m0,g0=new Oo("auth","Firebase",m0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=new Bh("@firebase/auth");function AI(t,...e){kl.logLevel<=ke.WARN&&kl.warn(`Auth (${rs}): ${t}`,...e)}function fl(t,...e){kl.logLevel<=ke.ERROR&&kl.error(`Auth (${rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t,...e){throw Kh(t,...e)}function on(t,...e){return Kh(t,...e)}function Hh(t,e,n){const i=Object.assign(Object.assign({},RI()),{[e]:n});return new Oo("auth","Firebase",i).create(e,{appName:t.name})}function mr(t){return Hh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bI(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&qt(t,"argument-error"),Hh(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kh(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return g0.create(t,...e)}function se(t,e,...n){if(!t)throw Kh(e,...n)}function Nn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fl(e),new Error(e)}function Ln(t,e){t||Nn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function DI(){return by()==="http:"||by()==="https:"}function by(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DI()||lT()||"connection"in navigator)?navigator.onLine:!0}function OI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ln(n>e,"Short delay should be less than long delay!"),this.isMobile=Uh()||a0()}get(){return MI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(t,e){Ln(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Lo(3e4,6e4);function xr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Un(t,e,n,i,o={}){return v0(t,o,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const d=ns(Object.assign({key:t.config.apiKey},u)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:f},l);return aT()||(m.referrerPolicy="no-referrer"),y0.fetch()(_0(t,t.config.apiHost,n,d),m)})}async function v0(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},LI),e);try{const o=new VI(t),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw al(t,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const d=l.ok?u.errorMessage:u.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw al(t,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw al(t,"email-already-in-use",u);if(f==="USER_DISABLED")throw al(t,"user-disabled",u);const g=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Hh(t,g,m);qt(t,g)}}catch(o){if(o instanceof Sr)throw o;qt(t,"network-request-failed",{message:String(o)})}}async function Jl(t,e,n,i,o={}){const l=await Un(t,e,n,i,o);return"mfaPendingCredential"in l&&qt(t,"multi-factor-auth-required",{_serverResponse:l}),l}function _0(t,e,n,i){const o=`${e}${n}?${i}`;return t.config.emulator?Gh(t.config,o):`${t.config.apiScheme}://${o}`}function jI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(on(this.auth,"network-request-failed")),FI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function al(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=on(t,e,i);return o.customData._tokenResponse=n,o}function Dy(t){return t!==void 0&&t.enterprise!==void 0}class UI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return jI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function BI(t,e){return Un(t,"GET","/v2/recaptchaConfig",xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t,e){return Un(t,"POST","/v1/accounts:delete",e)}async function w0(t,e){return Un(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zI(t,e=!1){const n=yt(t),i=await n.getIdToken(e),o=qh(i);se(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,u=l?.sign_in_provider;return{claims:o,token:i,authTime:so(_d(o.auth_time)),issuedAtTime:so(_d(o.iat)),expirationTime:so(_d(o.exp)),signInProvider:u||null,signInSecondFactor:l?.sign_in_second_factor||null}}function _d(t){return Number(t)*1e3}function qh(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return fl("JWT malformed, contained fewer than 3 sections"),null;try{const o=xl(n);return o?JSON.parse(o):(fl("Failed to decode base64 JWT payload"),null)}catch(o){return fl("Caught error parsing JWT payload as JSON",o?.toString()),null}}function My(t){const e=qh(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Sr&&$I(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function $I({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=so(this.lastLoginAt),this.creationTime=so(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(t){var e;const n=t.auth,i=await t.getIdToken(),o=await _o(t,w0(n,{idToken:i}));se(o?.users.length,n,"internal-error");const l=o.users[0];t._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?E0(l.providerUserInfo):[],d=GI(t.providerData,u),f=t.isAnonymous,m=!(t.email&&l.passwordHash)&&!d?.length,g=f?m:!1,y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Jd(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(t,y)}async function KI(t){const e=yt(t);await Pl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GI(t,e){return[...t.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function E0(t){return t.map(e=>{var{providerId:n}=e,i=$h(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(t,e){const n=await v0(t,{},async()=>{const i=ns({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=t.config,u=_0(t,o,"/v1/token",`key=${l}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",y0.fetch()(u,{method:"POST",headers:d,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YI(t,e){return Un(t,"POST","/v2/accounts:revokeToken",xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):My(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=My(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:l}=await qI(e,n);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:l}=n,u=new Ui;return i&&(se(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),o&&(se(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),l&&(se(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ui,this.toJSON())}_performRefresh(){return Nn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Rn{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,l=$h(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new HI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Jd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await _o(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return zI(this,e)}reload(){return KI(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Rn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Pl(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(mr(this.auth));const e=await this.getIdToken();return await _o(this,WI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,l,u,d,f,m,g;const y=(i=n.displayName)!==null&&i!==void 0?i:void 0,_=(o=n.email)!==null&&o!==void 0?o:void 0,S=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,C=(u=n.photoURL)!==null&&u!==void 0?u:void 0,N=(d=n.tenantId)!==null&&d!==void 0?d:void 0,A=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,U=(m=n.createdAt)!==null&&m!==void 0?m:void 0,B=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:b,emailVerified:O,isAnonymous:H,providerData:j,stsTokenManager:J}=n;se(b&&J,e,"internal-error");const $=Ui.fromJSON(this.name,J);se(typeof b=="string",e,"internal-error"),or(y,e.name),or(_,e.name),se(typeof O=="boolean",e,"internal-error"),se(typeof H=="boolean",e,"internal-error"),or(S,e.name),or(C,e.name),or(N,e.name),or(A,e.name),or(U,e.name),or(B,e.name);const ge=new Rn({uid:b,auth:e,email:_,emailVerified:O,displayName:y,isAnonymous:H,photoURL:C,phoneNumber:S,tenantId:N,stsTokenManager:$,createdAt:U,lastLoginAt:B});return j&&Array.isArray(j)&&(ge.providerData=j.map(Ie=>Object.assign({},Ie))),A&&(ge._redirectEventId=A),ge}static async _fromIdTokenResponse(e,n,i=!1){const o=new Ui;o.updateFromServerResponse(n);const l=new Rn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Pl(l),l}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?E0(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!l?.length,d=new Ui;d.updateFromIdToken(i);const f=new Rn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:u}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Jd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=new Map;function An(t){Ln(t instanceof Function,"Expected a class definition");let e=Oy.get(t);return e?(Ln(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Oy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}S0.type="NONE";const Ly=S0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(t,e,n){return`firebase:${t}:${e}:${n}`}class Bi{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=pl(this.userKey,o.apiKey,l),this.fullPersistenceKey=pl("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Bi(An(Ly),e,i);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||An(Ly);const u=pl(i,e.config.apiKey,e.name);let d=null;for(const m of n)try{const g=await m._get(u);if(g){const y=Rn._fromJSON(e,g);m!==l&&(d=y),l=m;break}}catch{}const f=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Bi(l,e,i):(l=f[0],d&&await l._set(u,d.toJSON()),await Promise.all(n.map(async m=>{if(m!==l)try{await m._remove(u)}catch{}})),new Bi(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(x0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(P0(e))return"Blackberry";if(N0(e))return"Webos";if(C0(e))return"Safari";if((e.includes("chrome/")||T0(e))&&!e.includes("edge/"))return"Chrome";if(k0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function x0(t=St()){return/firefox\//i.test(t)}function C0(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T0(t=St()){return/crios\//i.test(t)}function I0(t=St()){return/iemobile/i.test(t)}function k0(t=St()){return/android/i.test(t)}function P0(t=St()){return/blackberry/i.test(t)}function N0(t=St()){return/webos/i.test(t)}function Yh(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function QI(t=St()){var e;return Yh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function XI(){return uT()&&document.documentMode===10}function R0(t=St()){return Yh(t)||k0(t)||N0(t)||P0(t)||/windows phone/i.test(t)||I0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t,e=[]){let n;switch(t){case"Browser":n=Fy(St());break;case"Worker":n=`${Fy(St())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rs}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=l=>new Promise((u,d)=>{try{const f=e(l);u(f)}catch(f){d(f)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(t,e={}){return Un(t,"GET","/v2/passwordPolicy",xr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=6;class tk{constructor(e){var n,i,o,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:ek,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,l,u,d;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(o=f.containsLowercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(l=f.containsUppercaseLetter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(d=f.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),f}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jy(this),this.idTokenSubscription=new jy(this),this.beforeStateQueue=new JI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=An(n)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Bi.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await w0(this,{idToken:e}),i=await Rn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=o?._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===d)&&f?.user&&(o=f.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(u){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(mr(this));const n=e?yt(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(An(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZI(this),n=new tk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await YI(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&An(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Bi.create(this,[An(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(d,this,"internal-error"),d.then(()=>{u||l(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,o);return()=>{u=!0,f()}}else{const f=e.addObserver(n);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&AI(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Cr(t){return yt(t)}class jy{constructor(e){this.auth=e,this.observer=null,this.addObserver=_T(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rk(t){Zl=t}function b0(t){return Zl.loadJS(t)}function ik(){return Zl.recaptchaEnterpriseScript}function sk(){return Zl.gapiScript}function ok(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const ak="recaptcha-enterprise",lk="NO_RECAPTCHA";class uk{constructor(e){this.type=ak,this.auth=Cr(e)}async verify(e="verify",n=!1){async function i(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,d)=>{BI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new UI(f);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,u(m.siteKey)}}).catch(f=>{d(f)})})}function o(l,u,d){const f=window.grecaptcha;Dy(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(m=>{u(m)}).catch(()=>{u(lk)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((l,u)=>{i(this.auth).then(d=>{if(!n&&Dy(window.grecaptcha))o(d,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=ik();f.length!==0&&(f+=d),b0(f).then(()=>{o(d,l,u)}).catch(m=>{u(m)})}}).catch(d=>{u(d)})})}}async function Vy(t,e,n,i=!1){const o=new uk(t);let l;try{l=await o.verify(n)}catch{l=await o.verify(n,!0)}const u=Object.assign({},e);return i?Object.assign(u,{captchaResp:l}):Object.assign(u,{captchaResponse:l}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Zd(t,e,n,i){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Vy(t,e,n,n==="getOobCode");return i(t,l)}else return i(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Vy(t,e,n,n==="getOobCode");return i(t,u)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){const n=zh(t,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(Tl(l,e??{}))return o;qt(o,"already-initialized")}return n.initialize({options:e})}function dk(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(An);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function hk(t,e,n){const i=Cr(t);se(i._canInitEmulator,i,"emulator-config-failed"),se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=D0(e),{host:u,port:d}=fk(e),f=d===null?"":`:${d}`;i.config.emulator={url:`${l}//${u}${f}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:u,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),pk()}function D0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fk(t){const e=D0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Uy(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:Uy(u)}}}function Uy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nn("not implemented")}_getIdTokenResponse(e){return Nn("not implemented")}_linkToIdToken(e,n){return Nn("not implemented")}_getReauthenticationResolver(e){return Nn("not implemented")}}async function mk(t,e){return Un(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e){return Jl(t,"POST","/v1/accounts:signInWithPassword",xr(t,e))}async function yk(t,e){return Un(t,"POST","/v1/accounts:sendOobCode",xr(t,e))}async function vk(t,e){return yk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _k(t,e){return Jl(t,"POST","/v1/accounts:signInWithEmailLink",xr(t,e))}async function wk(t,e){return Jl(t,"POST","/v1/accounts:signInWithEmailLink",xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends Qh{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new wo(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new wo(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zd(e,n,"signInWithPassword",gk);case"emailLink":return _k(e,{email:this._email,oobCode:this._password});default:qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zd(e,i,"signUpPassword",mk);case"emailLink":return wk(e,{idToken:n,email:this._email,oobCode:this._password});default:qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(t,e){return Jl(t,"POST","/v1/accounts:signInWithIdp",xr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek="http://localhost";class ei extends Qh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=n,l=$h(n,["providerId","signInMethod"]);if(!i||!o)return null;const u=new ei(i,o);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Wi(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Wi(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Wi(e,n)}buildRequest(){const e={requestUri:Ek,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ns(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xk(t){const e=no(ro(t)).link,n=e?no(ro(e)).deep_link_id:null,i=no(ro(t)).deep_link_id;return(i?no(ro(i)).link:null)||i||n||e||t}class Xh{constructor(e){var n,i,o,l,u,d;const f=no(ro(e)),m=(n=f.apiKey)!==null&&n!==void 0?n:null,g=(i=f.oobCode)!==null&&i!==void 0?i:null,y=Sk((o=f.mode)!==null&&o!==void 0?o:null);se(m&&g&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=g,this.continueUrl=(l=f.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=f.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(d=f.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const n=xk(e);try{return new Xh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.providerId=is.PROVIDER_ID}static credential(e,n){return wo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Xh.parseLink(n);return se(i,"argument-error"),wo._fromEmailAndCode(e,i.code,i.tenantId)}}is.PROVIDER_ID="password";is.EMAIL_PASSWORD_SIGN_IN_METHOD="password";is.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo extends Jh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Fo{constructor(){super("facebook.com")}static credential(e){return ei._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends Fo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ei._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Pn.credential(n,i)}catch{return null}}}Pn.GOOGLE_SIGN_IN_METHOD="google.com";Pn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Fo{constructor(){super("github.com")}static credential(e){return ei._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.GITHUB_SIGN_IN_METHOD="github.com";ur.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Fo{constructor(){super("twitter.com")}static credential(e,n){return ei._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return cr.credential(n,i)}catch{return null}}}cr.TWITTER_SIGN_IN_METHOD="twitter.com";cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const l=await Rn._fromIdTokenResponse(e,i,o),u=By(i);return new qi({user:l,providerId:u,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=By(i);return new qi({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function By(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl extends Sr{constructor(e,n,i,o){var l;super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Nl.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new Nl(e,n,i,o)}}function M0(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Nl._fromErrorAndOperation(t,l,e,i):l})}async function Ck(t,e,n=!1){const i=await _o(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return qi._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tk(t,e,n=!1){const{auth:i}=t;if(mn(i.app))return Promise.reject(mr(i));const o="reauthenticate";try{const l=await _o(t,M0(i,o,e,t),n);se(l.idToken,i,"internal-error");const u=qh(l.idToken);se(u,i,"internal-error");const{sub:d}=u;return se(t.uid===d,i,"user-mismatch"),qi._forOperation(t,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&qt(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O0(t,e,n=!1){if(mn(t.app))return Promise.reject(mr(t));const i="signIn",o=await M0(t,i,e),l=await qi._fromIdTokenResponse(t,i,o);return n||await t._updateCurrentUser(l.user),l}async function Ik(t,e){return O0(Cr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(t){const e=Cr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Pk(t,e,n){const i=Cr(t);await Zd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",vk)}function Nk(t,e,n){return mn(t.app)?Promise.reject(mr(t)):Ik(yt(t),is.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&kk(t),i})}function Rk(t,e,n,i){return yt(t).onIdTokenChanged(e,n,i)}function Ak(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function jo(t,e,n,i){return yt(t).onAuthStateChanged(e,n,i)}function bk(t){return yt(t).signOut()}const Rl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rl,"1"),this.storage.removeItem(Rl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=1e3,Mk=10;class F0 extends L0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(i);!n&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);XI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,Mk):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Dk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}F0.type="LOCAL";const Ok=F0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends L0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}j0.type="SESSION";const V0=j0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new eu(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:l}=n.data,u=this.handlersMap[o];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(u).map(async m=>m(n.origin,l)),f=await Lk(d);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,u;return new Promise((d,f)=>{const m=Zh("",20);o.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:o,onMessage(y){const _=y;if(_.data.eventId===m)switch(_.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(_.data.response);break;default:clearTimeout(g),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return window}function jk(t){gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(){return typeof gn().WorkerGlobalScope<"u"&&typeof gn().importScripts=="function"}async function Vk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Uk(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Bk(){return U0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="firebaseLocalStorageDb",Wk=1,Al="firebaseLocalStorage",W0="fbase_key";class Vo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function tu(t,e){return t.transaction([Al],e?"readwrite":"readonly").objectStore(Al)}function zk(){const t=indexedDB.deleteDatabase(B0);return new Vo(t).toPromise()}function eh(){const t=indexedDB.open(B0,Wk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Al,{keyPath:W0})}catch(o){n(o)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Al)?e(i):(i.close(),await zk(),e(await eh()))})})}async function Wy(t,e,n){const i=tu(t,!0).put({[W0]:e,value:n});return new Vo(i).toPromise()}async function $k(t,e){const n=tu(t,!1).get(e),i=await new Vo(n).toPromise();return i===void 0?null:i.value}function zy(t,e){const n=tu(t,!0).delete(e);return new Vo(n).toPromise()}const Hk=800,Kk=3;class z0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>Kk)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return U0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eu._getInstance(Bk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Vk(),!this.activeServiceWorker)return;this.sender=new Fk(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Uk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eh();return await Wy(e,Rl,"1"),await zy(e,Rl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Wy(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>$k(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=tu(o,!1).getAll();return new Vo(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z0.type="LOCAL";const Gk=z0;new Lo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t,e){return e?An(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends Qh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Wi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qk(t){return O0(t.auth,new ef(t),t.bypassAuthState)}function Yk(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),Tk(n,new ef(t),t.bypassAuthState)}async function Qk(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),Ck(n,new ef(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:l,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qk;case"linkViaPopup":case"linkViaRedirect":return Qk;case"reauthViaPopup":case"reauthViaRedirect":return Yk;default:qt(this.auth,"internal-error")}}resolve(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new Lo(2e3,1e4);async function Jk(t,e,n){if(mn(t.app))return Promise.reject(on(t,"operation-not-supported-in-this-environment"));const i=Cr(t);bI(t,e,Jh);const o=$0(i,n);return new $r(i,"signInViaPopup",e,o).executeNotNull()}class $r extends H0{constructor(e,n,i,o,l){super(e,n,o,l),this.provider=i,this.authWindow=null,this.pollId=null,$r.currentPopupAction&&$r.currentPopupAction.cancel(),$r.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Ln(this.filter.length===1,"Popup operations only handle one event");const e=Zh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$r.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Xk.get())};e()}}$r.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="pendingRedirect",ml=new Map;class e1 extends H0{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=ml.get(this.auth._key());if(!e){try{const i=await t1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}ml.set(this.auth._key(),e)}return this.bypassAuthState||ml.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function t1(t,e){const n=i1(e),i=r1(t);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function n1(t,e){ml.set(t._key(),e)}function r1(t){return An(t._redirectPersistence)}function i1(t){return pl(Zk,t.config.apiKey,t.name)}async function s1(t,e,n=!1){if(mn(t.app))return Promise.reject(mr(t));const i=Cr(t),o=$0(i,e),u=await new e1(i,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=600*1e3;class a1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!l1(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!K0(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(on(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o1&&this.cachedEventUids.clear(),this.cachedEventUids.has($y(e))}saveEventToCache(e){this.cachedEventUids.add($y(e)),this.lastProcessedEventTime=Date.now()}}function $y(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function K0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function l1(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u1(t,e={}){return Un(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d1=/^https?/;async function h1(t){if(t.config.emulator)return;const{authorizedDomains:e}=await u1(t);for(const n of e)try{if(f1(n))return}catch{}qt(t,"unauthorized-domain")}function f1(t){const e=Xd(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===i}if(!d1.test(n))return!1;if(c1.test(t))return i===t;const o=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new Lo(3e4,6e4);function Hy(){const t=gn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function m1(t){return new Promise((e,n)=>{var i,o,l;function u(){Hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hy(),n(on(t,"network-request-failed"))},timeout:p1.get()})}if(!((o=(i=gn().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=gn().gapi)===null||l===void 0)&&l.load)u();else{const d=ok("iframefcb");return gn()[d]=()=>{gapi.load?u():n(on(t,"network-request-failed"))},b0(`${sk()}?onload=${d}`).catch(f=>n(f))}}).catch(e=>{throw gl=null,e})}let gl=null;function g1(t){return gl=gl||m1(t),gl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=new Lo(5e3,15e3),v1="__/auth/iframe",_1="emulator/auth/iframe",w1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function S1(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gh(e,_1):`https://${t.config.authDomain}/${v1}`,i={apiKey:e.apiKey,appName:t.name,v:rs},o=E1.get(t.config.apiHost);o&&(i.eid=o);const l=t._getFrameworks();return l.length&&(i.fw=l.join(",")),`${n}?${ns(i).slice(1)}`}async function x1(t){const e=await g1(t),n=gn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:S1(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:w1,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const u=on(t,"network-request-failed"),d=gn().setTimeout(()=>{l(u)},y1.get());function f(){gn().clearTimeout(d),o(i)}i.ping(f).then(f,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},T1=500,I1=600,k1="_blank",P1="http://localhost";class Ky{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N1(t,e,n,i=T1,o=I1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f=Object.assign(Object.assign({},C1),{width:i.toString(),height:o.toString(),top:l,left:u}),m=St().toLowerCase();n&&(d=T0(m)?k1:n),x0(m)&&(e=e||P1,f.scrollbars="yes");const g=Object.entries(f).reduce((_,[S,C])=>`${_}${S}=${C},`,"");if(QI(m)&&d!=="_self")return R1(e||"",d),new Ky(null);const y=window.open(e||"",d,g);se(y,t,"popup-blocked");try{y.focus()}catch{}return new Ky(y)}function R1(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="__/auth/handler",b1="emulator/auth/handler",D1=encodeURIComponent("fac");async function Gy(t,e,n,i,o,l){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:rs,eventId:o};if(e instanceof Jh){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",Hd(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))u[g]=y}if(e instanceof Fo){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(u.scopes=g.join(","))}t.tenantId&&(u.tid=t.tenantId);const d=u;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const f=await t._getAppCheckToken(),m=f?`#${D1}=${encodeURIComponent(f)}`:"";return`${M1(t)}?${ns(d).slice(1)}${m}`}function M1({config:t}){return t.emulator?Gh(t,b1):`https://${t.authDomain}/${A1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="webStorageSupport";class O1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V0,this._completeRedirectFn=s1,this._overrideRedirectResult=n1}async _openPopup(e,n,i,o){var l;Ln((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Gy(e,n,i,Xd(),o);return N1(e,u,Zh())}async _openRedirect(e,n,i,o){await this._originValidation(e);const l=await Gy(e,n,i,Xd(),o);return jk(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(Ln(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await x1(e),i=new a1(e);return n.register("authEvent",o=>(se(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wd,{type:wd},o=>{var l;const u=(l=o?.[0])===null||l===void 0?void 0:l[wd];u!==void 0&&n(!!u),qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h1(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R0()||C0()||Yh()}}const L1=O1;var qy="@firebase/auth",Yy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V1(t){Gi(new Zr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=i.options;se(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A0(t)},m=new nk(i,o,l,f);return dk(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Gi(new Zr("auth-internal",e=>{const n=Cr(e.getProvider("auth").getImmediate());return(i=>new F1(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(qy,Yy,j1(t)),pr(qy,Yy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=300,B1=o0("authIdTokenMaxAge")||U1;let Qy=null;const W1=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>B1)return;const o=n?.token;Qy!==o&&(Qy=o,await fetch(t,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function z1(t=h0()){const e=zh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ck(t,{popupRedirectResolver:L1,persistence:[Gk,Ok,V0]}),i=o0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=W1(l.toString());Ak(n,u,()=>u(n.currentUser)),Rk(n,d=>u(d))}}const o=i0("auth");return o&&hk(n,`http://${o}`),n}function $1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}rk({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=o=>{const l=on("internal-error");l.customData=o,n(l)},i.type="text/javascript",i.charset="UTF-8",$1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V1("Browser");var H1="firebase",K1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(H1,K1,"app");var Xy={};const Jy="@firebase/database",Zy="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let G0="";function G1(t){G0=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),st(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:yo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return _n(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new q1(e)}}catch{}return new Y1},Hr=q0("localStorage"),Q1=q0("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new Bh("@firebase/database"),X1=(function(){let t=1;return function(){return t++}})(),Y0=function(t){const e=ST(t),n=new vT;n.update(e);const i=n.digest();return jh.encodeByteArray(i)},Uo=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Uo.apply(null,i):typeof i=="object"?e+=st(i):e+=i,e+=" "}return e};let oo=null,ev=!0;const J1=function(t,e){z(!0,"Can't turn on custom loggers persistently."),zi.logLevel=ke.VERBOSE,oo=zi.log.bind(zi)},ut=function(...t){if(ev===!0&&(ev=!1,oo===null&&Q1.get("logging_enabled")===!0&&J1()),oo){const e=Uo.apply(null,t);oo(e)}},Bo=function(t){return function(...e){ut(t,...e)}},th=function(...t){const e="FIREBASE INTERNAL ERROR: "+Uo(...t);zi.error(e)},Fn=function(...t){const e=`FIREBASE FATAL ERROR: ${Uo(...t)}`;throw zi.error(e),new Error(e)},Et=function(...t){const e="FIREBASE WARNING: "+Uo(...t);zi.warn(e)},Z1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Et("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},tf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},eP=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ti="[MIN_NAME]",yr="[MAX_NAME]",si=function(t,e){if(t===e)return 0;if(t===ti||e===yr)return-1;if(e===ti||t===yr)return 1;{const n=tv(t),i=tv(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},tP=function(t,e){return t===e?0:t<e?-1:1},Xs=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+st(e))},nf=function(t){if(typeof t!="object"||t===null)return st(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=st(e[i]),n+=":",n+=nf(t[e[i]]);return n+="}",n},Q0=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let o=0;o<n;o+=e)o+e>n?i.push(t.substring(o,n)):i.push(t.substring(o,o+e));return i};function ct(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const X0=function(t){z(!tf(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let o,l,u,d,f;t===0?(l=0,u=0,o=1/t===-1/0?1:0):(o=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(t)/Math.LN2),i),l=d+i,u=Math.round(t*Math.pow(2,n-d)-Math.pow(2,n))):(l=0,u=Math.round(t/Math.pow(2,1-i-n))));const m=[];for(f=n;f;f-=1)m.push(u%2?1:0),u=Math.floor(u/2);for(f=e;f;f-=1)m.push(l%2?1:0),l=Math.floor(l/2);m.push(o?1:0),m.reverse();const g=m.join("");let y="";for(f=0;f<64;f+=8){let _=parseInt(g.substr(f,8),2).toString(16);_.length===1&&(_="0"+_),y=y+_}return y.toLowerCase()},nP=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},rP=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function iP(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const sP=new RegExp("^-?(0*)\\d{1,10}$"),oP=-2147483648,aP=2147483647,tv=function(t){if(sP.test(t)){const e=Number(t);if(e>=oP&&e<=aP)return e}return null},ss=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Et("Exception was thrown by user callback.",n),e},Math.floor(0))}},lP=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ao=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Et(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ut("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Et(e)}}class yl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}yl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="5",J0="v",Z0="s",ew="r",tw="f",nw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rw="ls",iw="p",nh="ac",sw="websocket",ow="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n,i,o,l=!1,u="",d=!1,f=!1){this.secure=n,this.namespace=i,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function dP(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function lw(t,e,n){z(typeof e=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");let i;if(e===sw)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ow)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);dP(t)&&(n.ns=t.namespace);const o=[];return ct(n,(l,u)=>{o.push(l+"="+u)}),i+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this.counters_={}}incrementCounter(e,n=1){_n(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return ZC(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed={},Sd={};function sf(t){const e=t.toString();return Ed[e]||(Ed[e]=new hP),Ed[e]}function fP(t,e){const n=t.toString();return Sd[n]||(Sd[n]=e()),Sd[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<i.length;++o)i[o]&&ss(()=>{this.onMessage_(i[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="start",mP="close",gP="pLPCommand",yP="pRTLPCB",uw="id",cw="pw",dw="ser",vP="cb",_P="seg",wP="ts",EP="d",SP="dframe",hw=1870,fw=30,xP=hw-fw,CP=25e3,TP=3e4;class Mi{constructor(e,n,i,o,l,u,d){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Bo(e),this.stats_=sf(n),this.urlFn=f=>(this.appCheckToken&&(f[nh]=this.appCheckToken),lw(n,ow,f))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new pP(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(TP)),eP(()=>{if(this.isClosed_)return;this.scriptTagHolder=new of((...l)=>{const[u,d,f,m,g]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===nv)this.id=d,this.password=f;else if(u===mP)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...l)=>{const[u,d]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const i={};i[nv]="t",i[dw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[vP]=this.scriptTagHolder.uniqueCallbackIdentifier),i[J0]=rf,this.transportSessionId&&(i[Z0]=this.transportSessionId),this.lastSessionId&&(i[rw]=this.lastSessionId),this.applicationId&&(i[iw]=this.applicationId),this.appCheckToken&&(i[nh]=this.appCheckToken),typeof location<"u"&&location.hostname&&nw.test(location.hostname)&&(i[ew]=tw);const o=this.urlFn(i);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mi.forceAllow_=!0}static forceDisallow(){Mi.forceDisallow_=!0}static isAvailable(){return Mi.forceAllow_?!0:!Mi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nP()&&!rP()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=st(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=n0(n),o=Q0(i,xP);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[SP]="t",i[uw]=e,i[cw]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=st(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class of{constructor(e,n,i,o){this.onDisconnect=i,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=X1(),window[gP+this.uniqueCallbackIdentifier]=e,window[yP+this.uniqueCallbackIdentifier]=n,this.myIFrame=of.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){ut("frame writing exception"),d.stack&&ut(d.stack),ut(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ut("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[uw]=this.myID,e[cw]=this.myPW,e[dw]=this.currentSerial;let n=this.urlFn(e),i="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fw+i.length<=hw;){const u=this.pendingSegs.shift();i=i+"&"+_P+o+"="+u.seg+"&"+wP+o+"="+u.ts+"&"+EP+o+"="+u.d,o++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(i,Math.floor(CP)),l=()=>{clearTimeout(o),i()};this.addTag(e,l)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const o=i.readyState;(!o||o==="loaded"||o==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{ut("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=16384,kP=45e3;let bl=null;typeof MozWebSocket<"u"?bl=MozWebSocket:typeof WebSocket<"u"&&(bl=WebSocket);class rn{constructor(e,n,i,o,l,u,d){this.connId=e,this.applicationId=i,this.appCheckToken=o,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Bo(this.connId),this.stats_=sf(n),this.connURL=rn.connectionURL_(n,u,d,o,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,o,l){const u={};return u[J0]=rf,typeof location<"u"&&location.hostname&&nw.test(location.hostname)&&(u[ew]=tw),n&&(u[Z0]=n),i&&(u[rw]=i),o&&(u[nh]=o),l&&(u[iw]=l),lw(e,sw,u)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hr.set("previous_websocket_failure",!0);try{let i;cT(),this.mySock=new bl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){rn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&bl!==null&&!rn.forceDisallow_}static previouslyFailed(){return Hr.isInMemoryStorage||Hr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Hr.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=yo(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(z(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=st(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=Q0(n,IP);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(kP))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rn.responsesRequiredToBeHealthy=2;rn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Mi,rn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=rn&&rn.isAvailable();let i=n&&!rn.previouslyFailed();if(e.webSocketOnly&&(n||Et("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[rn];else{const o=this.transports_=[];for(const l of Eo.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l);Eo.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Eo.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=6e4,NP=5e3,RP=10*1024,AP=100*1024,xd="t",rv="d",bP="s",iv="r",DP="e",sv="o",ov="a",av="n",lv="p",MP="h";class OP{constructor(e,n,i,o,l,u,d,f,m,g){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Bo("c:"+this.id+":"),this.transportManager_=new Eo(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=ao(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>AP?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>RP?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(xd in e){const n=e[xd];n===ov?this.upgradeIfSecondaryHealthy_():n===iv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===sv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Xs("t",e),i=Xs("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:lv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ov,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:av,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Xs("t",e),i=Xs("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Xs(xd,e);if(rv in e){const i=e[rv];if(n===MP){const o=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===av){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===bP?this.onConnectionShutdown_(i):n===iv?this.onReset_(i):n===DP?th("Server Error: "+i):n===sv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):th("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),rf!==i&&Et("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),ao(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(PP))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ao(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(NP))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:lv,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{put(e,n,i,o){}merge(e,n,i,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let o=0;o<i.length;o++)i[o].callback.apply(i[o].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const o=this.getInitialEvent(e);o&&n.apply(i,o)}off(e,n,i){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===n&&(!i||i===o[l].context)){o.splice(l,1);return}}validateEventType_(e){z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends mw{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Uh()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Dl}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=32,cv=768;class Te{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[i]=this.pieces_[o],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function we(){return new Te("")}function de(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function vr(t){return t.pieces_.length-t.pieceNum_}function Ae(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Te(t.pieces_,e)}function af(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function LP(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function So(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function gw(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Te(e,0)}function $e(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Te)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let o=0;o<i.length;o++)i[o].length>0&&n.push(i[o])}return new Te(n,0)}function he(t){return t.pieceNum_>=t.pieces_.length}function Nt(t,e){const n=de(t),i=de(e);if(n===null)return e;if(n===i)return Nt(Ae(t),Ae(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function FP(t,e){const n=So(t,0),i=So(e,0);for(let o=0;o<n.length&&o<i.length;o++){const l=si(n[o],i[o]);if(l!==0)return l}return n.length===i.length?0:n.length<i.length?-1:1}function lf(t,e){if(vr(t)!==vr(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Ht(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(vr(t)>vr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class jP{constructor(e,n){this.errorPrefix_=n,this.parts_=So(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Xl(this.parts_[i]);yw(this)}}function VP(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Xl(e),yw(t)}function UP(t){const e=t.parts_.pop();t.byteLength_-=Xl(e),t.parts_.length>0&&(t.byteLength_-=1)}function yw(t){if(t.byteLength_>cv)throw new Error(t.errorPrefix_+"has a key path longer than "+cv+" bytes ("+t.byteLength_+").");if(t.parts_.length>uv)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+uv+") or object contains a cycle "+Wr(t))}function Wr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf extends mw{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new uf}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=1e3,BP=300*1e3,dv=30*1e3,WP=1.3,zP=3e4,$P="server_kill",hv=3;class Dn extends pw{constructor(e,n,i,o,l,u,d,f){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=l,this.authTokenProvider_=u,this.appCheckTokenProvider_=d,this.authOverride_=f,this.id=Dn.nextPersistentConnectionId_++,this.log_=Bo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Js,this.maxReconnectDelay_=BP,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");uf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Dl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const o=++this.requestNumber_,l={r:o,a:e,b:n};this.log_(st(l)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[o]=i)}get(e){this.initConnection_();const n=new Mo,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const d=u.d;u.s==="ok"?n.resolve(d):n.reject(d)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),n.promise}listen(e,n,i,o){this.initConnection_();const l=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+l),this.listens.has(u)||this.listens.set(u,new Map),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(u).has(l),"listen() called twice for same path/queryId.");const d={onComplete:o,hashFn:n,query:e,tag:i};this.listens.get(u).set(l,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+i+" for "+o);const l={p:i},u="q";e.tag&&(l.q=n._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(u,l,d=>{const f=d.d,m=d.s;Dn.warnOnListenWarnings_(f,n),(this.listens.get(i)&&this.listens.get(i).get(o))===e&&(this.log_("listen response",d),m!=="ok"&&this.removeListen_(i,o),e.onComplete&&e.onComplete(m,f))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&_n(e,"w")){const i=Ki(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',l=n._path.toString();Et(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||yT(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=dv)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=gT(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,o=>{const l=o.s,u=o.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),z(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,e._queryObject,n)}sendUnlisten_(e,n,i,o){this.log_("Unlisten on "+e+" for "+n);const l={p:e},u="n";o&&(l.q=i,l.t=o),this.sendRequest(u,l)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,o){const l={p:n,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,u=>{o&&setTimeout(()=>{o(u.s,u.d)},Math.floor(0))})}put(e,n,i,o){this.putInternal("p",e,n,i,o)}merge(e,n,i,o){this.putInternal("m",e,n,i,o)}putInternal(e,n,i,o,l){this.initConnection_();const u={p:n,d:i};l!==void 0&&(u.h=l),this.outstandingPuts_.push({action:e,request:u,onComplete:o}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,l=>{this.log_(n+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(l.s,l.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+st(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):th("Unrecognized action received from server: "+st(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Js,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Js,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zP&&(this.reconnectDelay_=Js),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*WP)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+Dn.nextConnectionId_++,l=this.lastSessionId;let u=!1,d=null;const f=function(){d?d.close():(u=!0,i())},m=function(y){z(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(y)};this.realtime_={close:f,sendRequest:m};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,_]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);u?ut("getToken() completed but was canceled"):(ut("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=_&&_.token,d=new OP(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,S=>{Et(S+" ("+this.repoInfo_.toString()+")"),this.interrupt($P)},l))}catch(y){this.log_("Failed to get token: "+y),u||(this.repoInfo_.nodeAdmin&&Et(y),f())}}}interrupt(e){ut("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ut("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Hd(this.interruptReasons_)&&(this.reconnectDelay_=Js,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(l=>nf(l)).join("$"):i="default";const o=this.removeListen_(e,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const i=new Te(e).toString();let o;if(this.listens.has(i)){const l=this.listens.get(i);o=l.get(n),l.delete(n),l.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(e,n){ut("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=hv&&(this.reconnectDelay_=dv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ut("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=hv&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+G0.replace(/\./g,"-")]=1,Uh()?e["framework.cordova"]=1:a0()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Dl.getInstance().currentlyOnline();return Hd(this.interruptReasons_)&&e}}Dn.nextPersistentConnectionId_=0;Dn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new fe(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new fe(ti,e),o=new fe(ti,n);return this.compare(i,o)!==0}minPost(){return fe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll;class vw extends nu{static get __EMPTY_NODE(){return ll}static set __EMPTY_NODE(e){ll=e}compare(e,n){return si(e.name,n.name)}isDefinedOn(e){throw ts("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return fe.MIN}maxPost(){return new fe(yr,ll)}makePost(e,n){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new fe(e,ll)}toString(){return".key"}}const qr=new vw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,i,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=n?i(e.key,n):1,o&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class rt{constructor(e,n,i,o,l){this.key=e,this.value=n,this.color=i??rt.RED,this.left=o??Rt.EMPTY_NODE,this.right=l??Rt.EMPTY_NODE}copy(e,n,i,o,l){return new rt(e??this.key,n??this.value,i??this.color,o??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const l=i(e,o.key);return l<0?o=o.copy(null,null,null,o.left.insert(e,n,i),null):l===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,o;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Rt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}rt.RED=!0;rt.BLACK=!1;class HP{copy(e,n,i,o,l){return this}insert(e,n,i){return new rt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Rt{constructor(e,n=Rt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Rt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,rt.BLACK,null,null))}remove(e){return new Rt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,rt.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,o=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return o?o.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(o=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ul(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ul(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ul(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ul(this.root_,null,this.comparator_,!0,e)}}Rt.EMPTY_NODE=new HP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t,e){return si(t.name,e.name)}function cf(t,e){return si(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rh;function GP(t){rh=t}const _w=function(t){return typeof t=="number"?"number:"+X0(t):"string:"+t},ww=function(t){if(t.isLeafNode()){const e=t.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&_n(e,".sv"),"Priority must be a string or number.")}else z(t===rh||t.isEmpty(),"priority of unexpected type.");z(t===rh||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv;class nt{constructor(e,n=nt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ww(this.priorityNode_)}static set __childrenNodeConstructor(e){fv=e}static get __childrenNodeConstructor(){return fv}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new nt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:nt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return he(e)?this:de(e)===".priority"?this.priorityNode_:nt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:nt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=de(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(z(i!==".priority"||vr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,nt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ae(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+_w(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=X0(this.value_):e+=this.value_,this.lazyHash_=Y0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===nt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof nt.__childrenNodeConstructor?-1:(z(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,o=nt.VALUE_TYPE_ORDER.indexOf(n),l=nt.VALUE_TYPE_ORDER.indexOf(i);return z(o>=0,"Unknown leaf type: "+n),z(l>=0,"Unknown leaf type: "+i),o===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}nt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ew,Sw;function qP(t){Ew=t}function YP(t){Sw=t}class QP extends nu{compare(e,n){const i=e.node.getPriority(),o=n.node.getPriority(),l=i.compareTo(o);return l===0?si(e.name,n.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return fe.MIN}maxPost(){return new fe(yr,new nt("[PRIORITY-POST]",Sw))}makePost(e,n){const i=Ew(e);return new fe(n,new nt("[PRIORITY-POST]",i))}toString(){return".priority"}}const Be=new QP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=Math.log(2);class JP{constructor(e){const n=l=>parseInt(Math.log(l)/XP,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=i(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ml=function(t,e,n,i){t.sort(e);const o=function(f,m){const g=m-f;let y,_;if(g===0)return null;if(g===1)return y=t[f],_=n?n(y):y,new rt(_,y.node,rt.BLACK,null,null);{const S=parseInt(g/2,10)+f,C=o(f,S),N=o(S+1,m);return y=t[S],_=n?n(y):y,new rt(_,y.node,rt.BLACK,C,N)}},l=function(f){let m=null,g=null,y=t.length;const _=function(C,N){const A=y-C,U=y;y-=C;const B=o(A+1,U),b=t[A],O=n?n(b):b;S(new rt(O,b.node,N,null,B))},S=function(C){m?(m.left=C,m=C):(g=C,m=C)};for(let C=0;C<f.count;++C){const N=f.nextBitIsOne(),A=Math.pow(2,f.count-(C+1));N?_(A,rt.BLACK):(_(A,rt.BLACK),_(A,rt.RED))}return g},u=new JP(t.length),d=l(u);return new Rt(i||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd;const Di={};class bn{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return z(Di&&Be,"ChildrenNode.ts has not been loaded"),Cd=Cd||new bn({".priority":Di},{".priority":Be}),Cd}get(e){const n=Ki(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Rt?n:null}hasIndex(e){return _n(this.indexSet_,e.toString())}addIndex(e,n){z(e!==qr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let o=!1;const l=n.getIterator(fe.Wrap);let u=l.getNext();for(;u;)o=o||e.isDefinedOn(u.node),i.push(u),u=l.getNext();let d;o?d=Ml(i,e.getCompare()):d=Di;const f=e.toString(),m=Object.assign({},this.indexSet_);m[f]=e;const g=Object.assign({},this.indexes_);return g[f]=d,new bn(g,m)}addToIndexes(e,n){const i=Cl(this.indexes_,(o,l)=>{const u=Ki(this.indexSet_,l);if(z(u,"Missing index implementation for "+l),o===Di)if(u.isDefinedOn(e.node)){const d=[],f=n.getIterator(fe.Wrap);let m=f.getNext();for(;m;)m.name!==e.name&&d.push(m),m=f.getNext();return d.push(e),Ml(d,u.getCompare())}else return Di;else{const d=n.get(e.name);let f=o;return d&&(f=f.remove(new fe(e.name,d))),f.insert(e,e.node)}});return new bn(i,this.indexSet_)}removeFromIndexes(e,n){const i=Cl(this.indexes_,o=>{if(o===Di)return o;{const l=n.get(e.name);return l?o.remove(new fe(e.name,l)):o}});return new bn(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs;class oe{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ww(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Zs||(Zs=new oe(new Rt(cf),null,bn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Zs}updatePriority(e){return this.children_.isEmpty()?this:new oe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Zs:n}}getChild(e){const n=de(e);return n===null?this:this.getImmediateChild(n).getChild(Ae(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(z(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new fe(e,n);let o,l;n.isEmpty()?(o=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(i,this.children_));const u=o.isEmpty()?Zs:this.priorityNode_;return new oe(o,u,l)}}updateChild(e,n){const i=de(e);if(i===null)return n;{z(de(e)!==".priority"||vr(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Ae(e),n);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,o=0,l=!0;if(this.forEachChild(Be,(u,d)=>{n[u]=d.val(e),i++,l&&oe.INTEGER_REGEXP_.test(u)?o=Math.max(o,Number(u)):l=!1}),!e&&l&&o<2*i){const u=[];for(const d in n)u[d]=n[d];return u}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+_w(this.getPriority().val())+":"),this.forEachChild(Be,(n,i)=>{const o=i.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":Y0(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const o=this.resolveIndex_(i);if(o){const l=o.getPredecessorKey(new fe(e,n));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new fe(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new fe(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,fe.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)<0;)o.getNext(),l=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,fe.Wrap);let l=o.peek();for(;l!=null&&n.compare(l,e)>0;)o.getNext(),l=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Wo?-1:0}withIndex(e){if(e===qr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new oe(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===qr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Be),o=n.getIterator(Be);let l=i.getNext(),u=o.getNext();for(;l&&u;){if(l.name!==u.name||!l.node.equals(u.node))return!1;l=i.getNext(),u=o.getNext()}return l===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===qr?null:this.indexMap_.get(e.toString())}}oe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class ZP extends oe{constructor(){super(new Rt(cf),oe.EMPTY_NODE,bn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return oe.EMPTY_NODE}isEmpty(){return!1}}const Wo=new ZP;Object.defineProperties(fe,{MIN:{value:new fe(ti,oe.EMPTY_NODE)},MAX:{value:new fe(yr,Wo)}});vw.__EMPTY_NODE=oe.EMPTY_NODE;nt.__childrenNodeConstructor=oe;GP(Wo);YP(Wo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=!0;function it(t,e=null){if(t===null)return oe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new nt(n,it(e))}if(!(t instanceof Array)&&eN){const n=[];let i=!1;if(ct(t,(u,d)=>{if(u.substring(0,1)!=="."){const f=it(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),n.push(new fe(u,f)))}}),n.length===0)return oe.EMPTY_NODE;const l=Ml(n,KP,u=>u.name,cf);if(i){const u=Ml(n,Be.getCompare());return new oe(l,it(e),new bn({".priority":u},{".priority":Be}))}else return new oe(l,it(e),bn.Default)}else{let n=oe.EMPTY_NODE;return ct(t,(i,o)=>{if(_n(t,i)&&i.substring(0,1)!=="."){const l=it(o);(l.isLeafNode()||!l.isEmpty())&&(n=n.updateImmediateChild(i,l))}}),n.updatePriority(it(e))}}qP(it);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df extends nu{constructor(e){super(),this.indexPath_=e,z(!he(e)&&de(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),o=this.extractChild(n.node),l=i.compareTo(o);return l===0?si(e.name,n.name):l}makePost(e,n){const i=it(e),o=oe.EMPTY_NODE.updateChild(this.indexPath_,i);return new fe(n,o)}maxPost(){const e=oe.EMPTY_NODE.updateChild(this.indexPath_,Wo);return new fe(yr,e)}toString(){return So(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN extends nu{compare(e,n){const i=e.node.compareTo(n.node);return i===0?si(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return fe.MIN}maxPost(){return fe.MAX}makePost(e,n){const i=it(e);return new fe(n,i)}toString(){return".value"}}const xw=new tN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t){return{type:"value",snapshotNode:t}}function Yi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function xo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Co(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function nN(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this.index_=e}updateChild(e,n,i,o,l,u){z(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(n);return d.getChild(o).equals(i.getChild(o))&&d.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(n)?u.trackChildChange(xo(n,d)):z(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(Yi(n,i)):u.trackChildChange(Co(n,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Be,(o,l)=>{n.hasChild(o)||i.trackChildChange(xo(o,l))}),n.isLeafNode()||n.forEachChild(Be,(o,l)=>{if(e.hasChild(o)){const u=e.getImmediateChild(o);u.equals(l)||i.trackChildChange(Co(o,l,u))}else i.trackChildChange(Yi(o,l))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?oe.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.indexedFilter_=new hf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=To.getStartPost_(e),this.endPost_=To.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,o,l,u){return this.matches(new fe(n,i))||(i=oe.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,o,l,u)}updateFullNode(e,n,i){n.isLeafNode()&&(n=oe.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(oe.EMPTY_NODE);const l=this;return n.forEachChild(Be,(u,d)=>{l.matches(new fe(u,d))||(o=o.updateImmediateChild(u,oe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new To(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,o,l,u){return this.rangedFilter_.matches(new fe(n,i))||(i=oe.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,o,l,u):this.fullLimitUpdateChild_(e,n,i,l,u)}updateFullNode(e,n,i){let o;if(n.isLeafNode()||n.isEmpty())o=oe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=oe.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;l.hasNext()&&u<this.limit_;){const d=l.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))o=o.updateImmediateChild(d.name,d.node),u++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(oe.EMPTY_NODE);let l;this.reverse_?l=o.getReverseIterator(this.index_):l=o.getIterator(this.index_);let u=0;for(;l.hasNext();){const d=l.getNext();u<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?u++:o=o.updateImmediateChild(d.name,oe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,o,l){let u;if(this.reverse_){const y=this.index_.getCompare();u=(_,S)=>y(S,_)}else u=this.index_.getCompare();const d=e;z(d.numChildren()===this.limit_,"");const f=new fe(n,i),m=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(d.hasChild(n)){const y=d.getImmediateChild(n);let _=o.getChildAfterChild(this.index_,m,this.reverse_);for(;_!=null&&(_.name===n||d.hasChild(_.name));)_=o.getChildAfterChild(this.index_,_,this.reverse_);const S=_==null?1:u(_,f);if(g&&!i.isEmpty()&&S>=0)return l?.trackChildChange(Co(n,i,y)),d.updateImmediateChild(n,i);{l?.trackChildChange(xo(n,y));const N=d.updateImmediateChild(n,oe.EMPTY_NODE);return _!=null&&this.rangedFilter_.matches(_)?(l?.trackChildChange(Yi(_.name,_.node)),N.updateImmediateChild(_.name,_.node)):N}}else return i.isEmpty()?e:g&&u(m,f)>=0?(l!=null&&(l.trackChildChange(xo(m.name,m.node)),l.trackChildChange(Yi(n,i))),d.updateImmediateChild(n,i).updateImmediateChild(m.name,oe.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Be}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ti}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Be}copy(){const e=new ff;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iN(t){return t.loadsAllData()?new hf(t.getIndex()):t.hasLimit()?new rN(t):new To(t)}function sN(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function oN(t,e,n){const i=t.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,n!=null?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function aN(t,e,n){const i=t.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,n!==void 0?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function lN(t,e){const n=t.copy();return n.index_=e,n}function pv(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Be?n="$priority":t.index_===xw?n="$value":t.index_===qr?n="$key":(z(t.index_ instanceof df,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=st(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=st(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+st(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=st(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+st(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function mv(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Be&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends pw{constructor(e,n,i,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=o,this.log_=Bo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const u=Ol.getListenId_(e,i),d={};this.listens_[u]=d;const f=pv(e._queryParams);this.restRequest_(l+".json",f,(m,g)=>{let y=g;if(m===404&&(y=null,m=null),m===null&&this.onDataUpdate_(l,y,!1,i),Ki(this.listens_,u)===d){let _;m?m===401?_="permission_denied":_="rest_error:"+m:_="ok",o(_,null)}})}unlisten(e,n){const i=Ol.getListenId_(e,n);delete this.listens_[i]}get(e){const n=pv(e._queryParams),i=e._path.toString(),o=new Mo;return this.restRequest_(i+".json",n,(l,u)=>{let d=u;l===404&&(d=null,l=null),l===null?(this.onDataUpdate_(i,d,!1,null),o.resolve(d)):o.reject(new Error(d))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(n.auth=o.accessToken),l&&l.token&&(n.ac=l.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ns(n);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&d.readyState===4){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=yo(d.responseText)}catch{Et("Failed to parse JSON response for "+u+": "+d.responseText)}i(null,f)}else d.status!==401&&d.status!==404&&Et("Got unsuccessful REST response for "+u+" Status: "+d.status),i(d.status);i=null}},d.open("GET",u,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.rootNode_=oe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(){return{value:null,children:new Map}}function Tw(t,e,n){if(he(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=de(e);t.children.has(i)||t.children.set(i,Ll());const o=t.children.get(i);e=Ae(e),Tw(o,e,n)}}function ih(t,e,n){t.value!==null?n(e,t.value):cN(t,(i,o)=>{const l=new Te(e.toString()+"/"+i);ih(o,l,n)})}function cN(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ct(this.last_,(i,o)=>{n[i]=n[i]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=10*1e3,hN=30*1e3,fN=300*1e3;class pN{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new dN(e);const i=gv+(hN-gv)*Math.random();ao(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;ct(e,(o,l)=>{l>0&&_n(this.statsToReport_,o)&&(n[o]=l,i=!0)}),i&&this.server_.reportStats(n),ao(this.reportStats_.bind(this),Math.floor(Math.random()*2*fN))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(sn||(sn={}));function pf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function mf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function gf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=sn.ACK_USER_WRITE,this.source=pf()}operationForChild(e){if(he(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Te(e));return new Fl(we(),n,this.revert)}}else return z(de(this.path)===e,"operationForChild called for unrelated child."),new Fl(Ae(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.source=e,this.path=n,this.type=sn.LISTEN_COMPLETE}operationForChild(e){return he(this.path)?new Io(this.source,we()):new Io(this.source,Ae(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=sn.OVERWRITE}operationForChild(e){return he(this.path)?new ni(this.source,we(),this.snap.getImmediateChild(e)):new ni(this.source,Ae(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=sn.MERGE}operationForChild(e){if(he(this.path)){const n=this.children.subtree(new Te(e));return n.isEmpty()?null:n.value?new ni(this.source,we(),n.value):new Qi(this.source,we(),n)}else return z(de(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qi(this.source,Ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(he(e))return this.isFullyInitialized()&&!this.filtered_;const n=de(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function gN(t,e,n,i){const o=[],l=[];return e.forEach(u=>{u.type==="child_changed"&&t.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&l.push(nN(u.childName,u.snapshotNode))}),eo(t,o,"child_removed",e,i,n),eo(t,o,"child_added",e,i,n),eo(t,o,"child_moved",l,i,n),eo(t,o,"child_changed",e,i,n),eo(t,o,"value",e,i,n),o}function eo(t,e,n,i,o,l){const u=i.filter(d=>d.type===n);u.sort((d,f)=>vN(t,d,f)),u.forEach(d=>{const f=yN(t,d,l);o.forEach(m=>{m.respondsTo(d.type)&&e.push(m.createEvent(f,t.query_))})})}function yN(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function vN(t,e,n){if(e.childName==null||n.childName==null)throw ts("Should only compare child_ events.");const i=new fe(e.childName,e.snapshotNode),o=new fe(n.childName,n.snapshotNode);return t.index_.compare(i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t,e){return{eventCache:t,serverCache:e}}function lo(t,e,n,i){return ru(new ri(e,n,i),t.serverCache)}function Iw(t,e,n,i){return ru(t.eventCache,new ri(e,n,i))}function sh(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ii(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td;const _N=()=>(Td||(Td=new Rt(tP)),Td);class Re{constructor(e,n=_N()){this.value=e,this.children=n}static fromObject(e){let n=new Re(null);return ct(e,(i,o)=>{n=n.set(new Te(i),o)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:we(),value:this.value};if(he(e))return null;{const i=de(e),o=this.children.get(i);if(o!==null){const l=o.findRootMostMatchingPathAndValue(Ae(e),n);return l!=null?{path:$e(new Te(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(he(e))return this;{const n=de(e),i=this.children.get(n);return i!==null?i.subtree(Ae(e)):new Re(null)}}set(e,n){if(he(e))return new Re(n,this.children);{const i=de(e),l=(this.children.get(i)||new Re(null)).set(Ae(e),n),u=this.children.insert(i,l);return new Re(this.value,u)}}remove(e){if(he(e))return this.children.isEmpty()?new Re(null):new Re(null,this.children);{const n=de(e),i=this.children.get(n);if(i){const o=i.remove(Ae(e));let l;return o.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,o),this.value===null&&l.isEmpty()?new Re(null):new Re(this.value,l)}else return this}}get(e){if(he(e))return this.value;{const n=de(e),i=this.children.get(n);return i?i.get(Ae(e)):null}}setTree(e,n){if(he(e))return n;{const i=de(e),l=(this.children.get(i)||new Re(null)).setTree(Ae(e),n);let u;return l.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,l),new Re(this.value,u)}}fold(e){return this.fold_(we(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((o,l)=>{i[o]=l.fold_($e(e,o),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,we(),n)}findOnPath_(e,n,i){const o=this.value?i(n,this.value):!1;if(o)return o;if(he(e))return null;{const l=de(e),u=this.children.get(l);return u?u.findOnPath_(Ae(e),$e(n,l),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,we(),n)}foreachOnPath_(e,n,i){if(he(e))return this;{this.value&&i(n,this.value);const o=de(e),l=this.children.get(o);return l?l.foreachOnPath_(Ae(e),$e(n,o),i):new Re(null)}}foreach(e){this.foreach_(we(),e)}foreach_(e,n){this.children.inorderTraversal((i,o)=>{o.foreach_($e(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.writeTree_=e}static empty(){return new an(new Re(null))}}function uo(t,e,n){if(he(e))return new an(new Re(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const o=i.path;let l=i.value;const u=Nt(o,e);return l=l.updateChild(u,n),new an(t.writeTree_.set(o,l))}else{const o=new Re(n),l=t.writeTree_.setTree(e,o);return new an(l)}}}function oh(t,e,n){let i=t;return ct(n,(o,l)=>{i=uo(i,$e(e,o),l)}),i}function yv(t,e){if(he(e))return an.empty();{const n=t.writeTree_.setTree(e,new Re(null));return new an(n)}}function ah(t,e){return oi(t,e)!=null}function oi(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Nt(n.path,e)):null}function vv(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Be,(i,o)=>{e.push(new fe(i,o))}):t.writeTree_.children.inorderTraversal((i,o)=>{o.value!=null&&e.push(new fe(i,o.value))}),e}function gr(t,e){if(he(e))return t;{const n=oi(t,e);return n!=null?new an(new Re(n)):new an(t.writeTree_.subtree(e))}}function lh(t){return t.writeTree_.isEmpty()}function Xi(t,e){return kw(we(),t.writeTree_,e)}function kw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((o,l)=>{o===".priority"?(z(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):n=kw($e(t,o),l,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild($e(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t,e){return Aw(e,t)}function wN(t,e,n,i,o){z(i>t.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:o}),o&&(t.visibleWrites=uo(t.visibleWrites,e,n)),t.lastWriteId=i}function EN(t,e,n,i){z(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=oh(t.visibleWrites,e,n),t.lastWriteId=i}function SN(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function xN(t,e){const n=t.allWrites.findIndex(d=>d.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let o=i.visible,l=!1,u=t.allWrites.length-1;for(;o&&u>=0;){const d=t.allWrites[u];d.visible&&(u>=n&&CN(d,i.path)?o=!1:Ht(i.path,d.path)&&(l=!0)),u--}if(o){if(l)return TN(t),!0;if(i.snap)t.visibleWrites=yv(t.visibleWrites,i.path);else{const d=i.children;ct(d,f=>{t.visibleWrites=yv(t.visibleWrites,$e(i.path,f))})}return!0}else return!1}function CN(t,e){if(t.snap)return Ht(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ht($e(t.path,n),e))return!0;return!1}function TN(t){t.visibleWrites=Pw(t.allWrites,IN,we()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function IN(t){return t.visible}function Pw(t,e,n){let i=an.empty();for(let o=0;o<t.length;++o){const l=t[o];if(e(l)){const u=l.path;let d;if(l.snap)Ht(n,u)?(d=Nt(n,u),i=uo(i,d,l.snap)):Ht(u,n)&&(d=Nt(u,n),i=uo(i,we(),l.snap.getChild(d)));else if(l.children){if(Ht(n,u))d=Nt(n,u),i=oh(i,d,l.children);else if(Ht(u,n))if(d=Nt(u,n),he(d))i=oh(i,we(),l.children);else{const f=Ki(l.children,de(d));if(f){const m=f.getChild(Ae(d));i=uo(i,we(),m)}}}else throw ts("WriteRecord should have .snap or .children")}}return i}function Nw(t,e,n,i,o){if(!i&&!o){const l=oi(t.visibleWrites,e);if(l!=null)return l;{const u=gr(t.visibleWrites,e);if(lh(u))return n;if(n==null&&!ah(u,we()))return null;{const d=n||oe.EMPTY_NODE;return Xi(u,d)}}}else{const l=gr(t.visibleWrites,e);if(!o&&lh(l))return n;if(!o&&n==null&&!ah(l,we()))return null;{const u=function(m){return(m.visible||o)&&(!i||!~i.indexOf(m.writeId))&&(Ht(m.path,e)||Ht(e,m.path))},d=Pw(t.allWrites,u,e),f=n||oe.EMPTY_NODE;return Xi(d,f)}}}function kN(t,e,n){let i=oe.EMPTY_NODE;const o=oi(t.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Be,(l,u)=>{i=i.updateImmediateChild(l,u)}),i;if(n){const l=gr(t.visibleWrites,e);return n.forEachChild(Be,(u,d)=>{const f=Xi(gr(l,new Te(u)),d);i=i.updateImmediateChild(u,f)}),vv(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const l=gr(t.visibleWrites,e);return vv(l).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function PN(t,e,n,i,o){z(i||o,"Either existingEventSnap or existingServerSnap must exist");const l=$e(e,n);if(ah(t.visibleWrites,l))return null;{const u=gr(t.visibleWrites,l);return lh(u)?o.getChild(n):Xi(u,o.getChild(n))}}function NN(t,e,n,i){const o=$e(e,n),l=oi(t.visibleWrites,o);if(l!=null)return l;if(i.isCompleteForChild(n)){const u=gr(t.visibleWrites,o);return Xi(u,i.getNode().getImmediateChild(n))}else return null}function RN(t,e){return oi(t.visibleWrites,e)}function AN(t,e,n,i,o,l,u){let d;const f=gr(t.visibleWrites,e),m=oi(f,we());if(m!=null)d=m;else if(n!=null)d=Xi(f,n);else return[];if(d=d.withIndex(u),!d.isEmpty()&&!d.isLeafNode()){const g=[],y=u.getCompare(),_=l?d.getReverseIteratorFrom(i,u):d.getIteratorFrom(i,u);let S=_.getNext();for(;S&&g.length<o;)y(S,i)!==0&&g.push(S),S=_.getNext();return g}else return[]}function bN(){return{visibleWrites:an.empty(),allWrites:[],lastWriteId:-1}}function jl(t,e,n,i){return Nw(t.writeTree,t.treePath,e,n,i)}function vf(t,e){return kN(t.writeTree,t.treePath,e)}function _v(t,e,n,i){return PN(t.writeTree,t.treePath,e,n,i)}function Vl(t,e){return RN(t.writeTree,$e(t.treePath,e))}function DN(t,e,n,i,o,l){return AN(t.writeTree,t.treePath,e,n,i,o,l)}function _f(t,e,n){return NN(t.writeTree,t.treePath,e,n)}function Rw(t,e){return Aw($e(t.treePath,e),t.writeTree)}function Aw(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(i!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(i);if(o){const l=o.type;if(n==="child_added"&&l==="child_removed")this.changeMap.set(i,Co(i,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&l==="child_changed")this.changeMap.set(i,xo(i,o.oldSnap));else if(n==="child_changed"&&l==="child_added")this.changeMap.set(i,Yi(i,e.snapshotNode));else if(n==="child_changed"&&l==="child_changed")this.changeMap.set(i,Co(i,e.snapshotNode,o.oldSnap));else throw ts("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const bw=new ON;class wf{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ri(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _f(this.writes_,e,i)}}getChildAfterChild(e,n,i){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ii(this.viewCache_),l=DN(this.writes_,o,n,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){return{filter:t}}function FN(t,e){z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function jN(t,e,n,i,o){const l=new MN;let u,d;if(n.type===sn.OVERWRITE){const m=n;m.source.fromUser?u=uh(t,e,m.path,m.snap,i,o,l):(z(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered()&&!he(m.path),u=Ul(t,e,m.path,m.snap,i,o,d,l))}else if(n.type===sn.MERGE){const m=n;m.source.fromUser?u=UN(t,e,m.path,m.children,i,o,l):(z(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered(),u=ch(t,e,m.path,m.children,i,o,d,l))}else if(n.type===sn.ACK_USER_WRITE){const m=n;m.revert?u=zN(t,e,m.path,i,o,l):u=BN(t,e,m.path,m.affectedTree,i,o,l)}else if(n.type===sn.LISTEN_COMPLETE)u=WN(t,e,n.path,i,l);else throw ts("Unknown operation type: "+n.type);const f=l.getChanges();return VN(e,u,f),{viewCache:u,changes:f}}function VN(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const o=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=sh(t);(n.length>0||!t.eventCache.isFullyInitialized()||o&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&n.push(Cw(sh(e)))}}function Dw(t,e,n,i,o,l){const u=e.eventCache;if(Vl(i,n)!=null)return e;{let d,f;if(he(n))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=ii(e),g=m instanceof oe?m:oe.EMPTY_NODE,y=vf(i,g);d=t.filter.updateFullNode(e.eventCache.getNode(),y,l)}else{const m=jl(i,ii(e));d=t.filter.updateFullNode(e.eventCache.getNode(),m,l)}else{const m=de(n);if(m===".priority"){z(vr(n)===1,"Can't have a priority with additional path components");const g=u.getNode();f=e.serverCache.getNode();const y=_v(i,n,g,f);y!=null?d=t.filter.updatePriority(g,y):d=u.getNode()}else{const g=Ae(n);let y;if(u.isCompleteForChild(m)){f=e.serverCache.getNode();const _=_v(i,n,u.getNode(),f);_!=null?y=u.getNode().getImmediateChild(m).updateChild(g,_):y=u.getNode().getImmediateChild(m)}else y=_f(i,m,e.serverCache);y!=null?d=t.filter.updateChild(u.getNode(),m,y,g,o,l):d=u.getNode()}}return lo(e,d,u.isFullyInitialized()||he(n),t.filter.filtersNodes())}}function Ul(t,e,n,i,o,l,u,d){const f=e.serverCache;let m;const g=u?t.filter:t.filter.getIndexedFilter();if(he(n))m=g.updateFullNode(f.getNode(),i,null);else if(g.filtersNodes()&&!f.isFiltered()){const S=f.getNode().updateChild(n,i);m=g.updateFullNode(f.getNode(),S,null)}else{const S=de(n);if(!f.isCompleteForPath(n)&&vr(n)>1)return e;const C=Ae(n),A=f.getNode().getImmediateChild(S).updateChild(C,i);S===".priority"?m=g.updatePriority(f.getNode(),A):m=g.updateChild(f.getNode(),S,A,C,bw,null)}const y=Iw(e,m,f.isFullyInitialized()||he(n),g.filtersNodes()),_=new wf(o,y,l);return Dw(t,y,n,o,_,d)}function uh(t,e,n,i,o,l,u){const d=e.eventCache;let f,m;const g=new wf(o,e,l);if(he(n))m=t.filter.updateFullNode(e.eventCache.getNode(),i,u),f=lo(e,m,!0,t.filter.filtersNodes());else{const y=de(n);if(y===".priority")m=t.filter.updatePriority(e.eventCache.getNode(),i),f=lo(e,m,d.isFullyInitialized(),d.isFiltered());else{const _=Ae(n),S=d.getNode().getImmediateChild(y);let C;if(he(_))C=i;else{const N=g.getCompleteChild(y);N!=null?af(_)===".priority"&&N.getChild(gw(_)).isEmpty()?C=N:C=N.updateChild(_,i):C=oe.EMPTY_NODE}if(S.equals(C))f=e;else{const N=t.filter.updateChild(d.getNode(),y,C,_,g,u);f=lo(e,N,d.isFullyInitialized(),t.filter.filtersNodes())}}}return f}function wv(t,e){return t.eventCache.isCompleteForChild(e)}function UN(t,e,n,i,o,l,u){let d=e;return i.foreach((f,m)=>{const g=$e(n,f);wv(e,de(g))&&(d=uh(t,d,g,m,o,l,u))}),i.foreach((f,m)=>{const g=$e(n,f);wv(e,de(g))||(d=uh(t,d,g,m,o,l,u))}),d}function Ev(t,e,n){return n.foreach((i,o)=>{e=e.updateChild(i,o)}),e}function ch(t,e,n,i,o,l,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,m;he(n)?m=i:m=new Re(null).setTree(n,i);const g=e.serverCache.getNode();return m.children.inorderTraversal((y,_)=>{if(g.hasChild(y)){const S=e.serverCache.getNode().getImmediateChild(y),C=Ev(t,S,_);f=Ul(t,f,new Te(y),C,o,l,u,d)}}),m.children.inorderTraversal((y,_)=>{const S=!e.serverCache.isCompleteForChild(y)&&_.value===null;if(!g.hasChild(y)&&!S){const C=e.serverCache.getNode().getImmediateChild(y),N=Ev(t,C,_);f=Ul(t,f,new Te(y),N,o,l,u,d)}}),f}function BN(t,e,n,i,o,l,u){if(Vl(o,n)!=null)return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(he(n)&&f.isFullyInitialized()||f.isCompleteForPath(n))return Ul(t,e,n,f.getNode().getChild(n),o,l,d,u);if(he(n)){let m=new Re(null);return f.getNode().forEachChild(qr,(g,y)=>{m=m.set(new Te(g),y)}),ch(t,e,n,m,o,l,d,u)}else return e}else{let m=new Re(null);return i.foreach((g,y)=>{const _=$e(n,g);f.isCompleteForPath(_)&&(m=m.set(g,f.getNode().getChild(_)))}),ch(t,e,n,m,o,l,d,u)}}function WN(t,e,n,i,o){const l=e.serverCache,u=Iw(e,l.getNode(),l.isFullyInitialized()||he(n),l.isFiltered());return Dw(t,u,n,i,bw,o)}function zN(t,e,n,i,o,l){let u;if(Vl(i,n)!=null)return e;{const d=new wf(i,e,o),f=e.eventCache.getNode();let m;if(he(n)||de(n)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=jl(i,ii(e));else{const y=e.serverCache.getNode();z(y instanceof oe,"serverChildren would be complete if leaf node"),g=vf(i,y)}g=g,m=t.filter.updateFullNode(f,g,l)}else{const g=de(n);let y=_f(i,g,e.serverCache);y==null&&e.serverCache.isCompleteForChild(g)&&(y=f.getImmediateChild(g)),y!=null?m=t.filter.updateChild(f,g,y,Ae(n),d,l):e.eventCache.getNode().hasChild(g)?m=t.filter.updateChild(f,g,oe.EMPTY_NODE,Ae(n),d,l):m=f,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=jl(i,ii(e)),u.isLeafNode()&&(m=t.filter.updateFullNode(m,u,l)))}return u=e.serverCache.isFullyInitialized()||Vl(i,we())!=null,lo(e,m,u,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,o=new hf(i.getIndex()),l=iN(i);this.processor_=LN(l);const u=n.serverCache,d=n.eventCache,f=o.updateFullNode(oe.EMPTY_NODE,u.getNode(),null),m=l.updateFullNode(oe.EMPTY_NODE,d.getNode(),null),g=new ri(f,u.isFullyInitialized(),o.filtersNodes()),y=new ri(m,d.isFullyInitialized(),l.filtersNodes());this.viewCache_=ru(y,g),this.eventGenerator_=new mN(this.query_)}get query(){return this.query_}}function HN(t){return t.viewCache_.serverCache.getNode()}function KN(t,e){const n=ii(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!he(e)&&!n.getImmediateChild(de(e)).isEmpty())?n.getChild(e):null}function Sv(t){return t.eventRegistrations_.length===0}function GN(t,e){t.eventRegistrations_.push(e)}function xv(t,e,n){const i=[];if(n){z(e==null,"A cancel should cancel all event registrations.");const o=t.query._path;t.eventRegistrations_.forEach(l=>{const u=l.createCancelEvent(n,o);u&&i.push(u)})}if(e){let o=[];for(let l=0;l<t.eventRegistrations_.length;++l){const u=t.eventRegistrations_[l];if(!u.matches(e))o.push(u);else if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(l+1));break}}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function Cv(t,e,n,i){e.type===sn.MERGE&&e.source.queryId!==null&&(z(ii(t.viewCache_),"We should always have a full cache before handling merges"),z(sh(t.viewCache_),"Missing event cache, even though we have a server cache"));const o=t.viewCache_,l=jN(t.processor_,o,e,n,i);return FN(t.processor_,l.viewCache),z(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=l.viewCache,Mw(t,l.changes,l.viewCache.eventCache.getNode(),null)}function qN(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Be,(l,u)=>{i.push(Yi(l,u))}),n.isFullyInitialized()&&i.push(Cw(n.getNode())),Mw(t,i,n.getNode(),e)}function Mw(t,e,n,i){const o=i?[i]:t.eventRegistrations_;return gN(t.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl;class YN{constructor(){this.views=new Map}}function QN(t){z(!Bl,"__referenceConstructor has already been defined"),Bl=t}function XN(){return z(Bl,"Reference.ts has not been loaded"),Bl}function JN(t){return t.views.size===0}function Ef(t,e,n,i){const o=e.source.queryId;if(o!==null){const l=t.views.get(o);return z(l!=null,"SyncTree gave us an op for an invalid query."),Cv(l,e,n,i)}else{let l=[];for(const u of t.views.values())l=l.concat(Cv(u,e,n,i));return l}}function ZN(t,e,n,i,o){const l=e._queryIdentifier,u=t.views.get(l);if(!u){let d=jl(n,o?i:null),f=!1;d?f=!0:i instanceof oe?(d=vf(n,i),f=!1):(d=oe.EMPTY_NODE,f=!1);const m=ru(new ri(d,f,!1),new ri(i,o,!1));return new $N(e,m)}return u}function eR(t,e,n,i,o,l){const u=ZN(t,e,i,o,l);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,u),GN(u,n),qN(u,n)}function tR(t,e,n,i){const o=e._queryIdentifier,l=[];let u=[];const d=_r(t);if(o==="default")for(const[f,m]of t.views.entries())u=u.concat(xv(m,n,i)),Sv(m)&&(t.views.delete(f),m.query._queryParams.loadsAllData()||l.push(m.query));else{const f=t.views.get(o);f&&(u=u.concat(xv(f,n,i)),Sv(f)&&(t.views.delete(o),f.query._queryParams.loadsAllData()||l.push(f.query)))}return d&&!_r(t)&&l.push(new(XN())(e._repo,e._path)),{removed:l,events:u}}function Ow(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function $i(t,e){let n=null;for(const i of t.views.values())n=n||KN(i,e);return n}function Lw(t,e){if(e._queryParams.loadsAllData())return iu(t);{const i=e._queryIdentifier;return t.views.get(i)}}function Fw(t,e){return Lw(t,e)!=null}function _r(t){return iu(t)!=null}function iu(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl;function nR(t){z(!Wl,"__referenceConstructor has already been defined"),Wl=t}function rR(){return z(Wl,"Reference.ts has not been loaded"),Wl}let iR=1;class Tv{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Re(null),this.pendingWriteTree_=bN(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function jw(t,e,n,i,o){return wN(t.pendingWriteTree_,e,n,i,o),o?os(t,new ni(pf(),e,n)):[]}function sR(t,e,n,i){EN(t.pendingWriteTree_,e,n,i);const o=Re.fromObject(n);return os(t,new Qi(pf(),e,o))}function dr(t,e,n=!1){const i=SN(t.pendingWriteTree_,e);if(xN(t.pendingWriteTree_,e)){let l=new Re(null);return i.snap!=null?l=l.set(we(),!0):ct(i.children,u=>{l=l.set(new Te(u),!0)}),os(t,new Fl(i.path,l,n))}else return[]}function su(t,e,n){return os(t,new ni(mf(),e,n))}function oR(t,e,n){const i=Re.fromObject(n);return os(t,new Qi(mf(),e,i))}function aR(t,e){return os(t,new Io(mf(),e))}function lR(t,e,n){const i=xf(t,n);if(i){const o=Cf(i),l=o.path,u=o.queryId,d=Nt(l,e),f=new Io(gf(u),d);return Tf(t,l,f)}else return[]}function dh(t,e,n,i,o=!1){const l=e._path,u=t.syncPointTree_.get(l);let d=[];if(u&&(e._queryIdentifier==="default"||Fw(u,e))){const f=tR(u,e,n,i);JN(u)&&(t.syncPointTree_=t.syncPointTree_.remove(l));const m=f.removed;if(d=f.events,!o){const g=m.findIndex(_=>_._queryParams.loadsAllData())!==-1,y=t.syncPointTree_.findOnPath(l,(_,S)=>_r(S));if(g&&!y){const _=t.syncPointTree_.subtree(l);if(!_.isEmpty()){const S=dR(_);for(let C=0;C<S.length;++C){const N=S[C],A=N.query,U=Bw(t,N);t.listenProvider_.startListening(co(A),zl(t,A),U.hashFn,U.onComplete)}}}!y&&m.length>0&&!i&&(g?t.listenProvider_.stopListening(co(e),null):m.forEach(_=>{const S=t.queryToTagMap.get(ou(_));t.listenProvider_.stopListening(co(_),S)}))}hR(t,m)}return d}function uR(t,e,n,i){const o=xf(t,i);if(o!=null){const l=Cf(o),u=l.path,d=l.queryId,f=Nt(u,e),m=new ni(gf(d),f,n);return Tf(t,u,m)}else return[]}function cR(t,e,n,i){const o=xf(t,i);if(o){const l=Cf(o),u=l.path,d=l.queryId,f=Nt(u,e),m=Re.fromObject(n),g=new Qi(gf(d),f,m);return Tf(t,u,g)}else return[]}function Iv(t,e,n,i=!1){const o=e._path;let l=null,u=!1;t.syncPointTree_.foreachOnPath(o,(_,S)=>{const C=Nt(_,o);l=l||$i(S,C),u=u||_r(S)});let d=t.syncPointTree_.get(o);d?(u=u||_r(d),l=l||$i(d,we())):(d=new YN,t.syncPointTree_=t.syncPointTree_.set(o,d));let f;l!=null?f=!0:(f=!1,l=oe.EMPTY_NODE,t.syncPointTree_.subtree(o).foreachChild((S,C)=>{const N=$i(C,we());N&&(l=l.updateImmediateChild(S,N))}));const m=Fw(d,e);if(!m&&!e._queryParams.loadsAllData()){const _=ou(e);z(!t.queryToTagMap.has(_),"View does not exist, but we have a tag");const S=fR();t.queryToTagMap.set(_,S),t.tagToQueryMap.set(S,_)}const g=yf(t.pendingWriteTree_,o);let y=eR(d,e,n,g,l,f);if(!m&&!u&&!i){const _=Lw(d,e);y=y.concat(pR(t,e,_))}return y}function Sf(t,e,n){const o=t.pendingWriteTree_,l=t.syncPointTree_.findOnPath(e,(u,d)=>{const f=Nt(u,e),m=$i(d,f);if(m)return m});return Nw(o,e,l,n,!0)}function os(t,e){return Vw(e,t.syncPointTree_,null,yf(t.pendingWriteTree_,we()))}function Vw(t,e,n,i){if(he(t.path))return Uw(t,e,n,i);{const o=e.get(we());n==null&&o!=null&&(n=$i(o,we()));let l=[];const u=de(t.path),d=t.operationForChild(u),f=e.children.get(u);if(f&&d){const m=n?n.getImmediateChild(u):null,g=Rw(i,u);l=l.concat(Vw(d,f,m,g))}return o&&(l=l.concat(Ef(o,t,i,n))),l}}function Uw(t,e,n,i){const o=e.get(we());n==null&&o!=null&&(n=$i(o,we()));let l=[];return e.children.inorderTraversal((u,d)=>{const f=n?n.getImmediateChild(u):null,m=Rw(i,u),g=t.operationForChild(u);g&&(l=l.concat(Uw(g,d,f,m)))}),o&&(l=l.concat(Ef(o,t,i,n))),l}function Bw(t,e){const n=e.query,i=zl(t,n);return{hashFn:()=>(HN(e)||oe.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return i?lR(t,n._path,i):aR(t,n._path);{const l=iP(o,n);return dh(t,n,null,l)}}}}function zl(t,e){const n=ou(e);return t.queryToTagMap.get(n)}function ou(t){return t._path.toString()+"$"+t._queryIdentifier}function xf(t,e){return t.tagToQueryMap.get(e)}function Cf(t){const e=t.indexOf("$");return z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Te(t.substr(0,e))}}function Tf(t,e,n){const i=t.syncPointTree_.get(e);z(i,"Missing sync point for query tag that we're tracking");const o=yf(t.pendingWriteTree_,e);return Ef(i,n,o,null)}function dR(t){return t.fold((e,n,i)=>{if(n&&_r(n))return[iu(n)];{let o=[];return n&&(o=Ow(n)),ct(i,(l,u)=>{o=o.concat(u)}),o}})}function co(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(rR())(t._repo,t._path):t}function hR(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const o=ou(i),l=t.queryToTagMap.get(o);t.queryToTagMap.delete(o),t.tagToQueryMap.delete(l)}}}function fR(){return iR++}function pR(t,e,n){const i=e._path,o=zl(t,e),l=Bw(t,n),u=t.listenProvider_.startListening(co(e),o,l.hashFn,l.onComplete),d=t.syncPointTree_.subtree(i);if(o)z(!_r(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((m,g,y)=>{if(!he(m)&&g&&_r(g))return[iu(g).query];{let _=[];return g&&(_=_.concat(Ow(g).map(S=>S.query))),ct(y,(S,C)=>{_=_.concat(C)}),_}});for(let m=0;m<f.length;++m){const g=f[m];t.listenProvider_.stopListening(co(g),zl(t,g))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new If(n)}node(){return this.node_}}class kf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=$e(this.path_,e);return new kf(this.syncTree_,n)}node(){return Sf(this.syncTree_,this.path_)}}const mR=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},kv=function(t,e,n){if(!t||typeof t!="object")return t;if(z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return gR(t[".sv"],e,n);if(typeof t[".sv"]=="object")return yR(t[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},gR=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+t)}},yR=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&z(!1,"Unexpected increment value: "+i);const o=e.node();if(z(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return i;const u=o.getValue();return typeof u!="number"?i:u+i},Ww=function(t,e,n,i){return Pf(e,new kf(n,t),i)},zw=function(t,e,n){return Pf(t,new If(e),n)};function Pf(t,e,n){const i=t.getPriority().val(),o=kv(i,e.getImmediateChild(".priority"),n);let l;if(t.isLeafNode()){const u=t,d=kv(u.getValue(),e,n);return d!==u.getValue()||o!==u.getPriority().val()?new nt(d,it(o)):t}else{const u=t;return l=u,o!==u.getPriority().val()&&(l=l.updatePriority(new nt(o))),u.forEachChild(Be,(d,f)=>{const m=Pf(f,e.getImmediateChild(d),n);m!==f&&(l=l.updateImmediateChild(d,m))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Rf(t,e){let n=e instanceof Te?e:new Te(e),i=t,o=de(n);for(;o!==null;){const l=Ki(i.node.children,o)||{children:{},childCount:0};i=new Nf(o,i,l),n=Ae(n),o=de(n)}return i}function as(t){return t.node.value}function $w(t,e){t.node.value=e,hh(t)}function Hw(t){return t.node.childCount>0}function vR(t){return as(t)===void 0&&!Hw(t)}function au(t,e){ct(t.node.children,(n,i)=>{e(new Nf(n,t,i))})}function Kw(t,e,n,i){n&&e(t),au(t,o=>{Kw(o,e,!0)})}function _R(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function zo(t){return new Te(t.parent===null?t.name:zo(t.parent)+"/"+t.name)}function hh(t){t.parent!==null&&wR(t.parent,t.name,t)}function wR(t,e,n){const i=vR(n),o=_n(t.node.children,e);i&&o?(delete t.node.children[e],t.node.childCount--,hh(t)):!i&&!o&&(t.node.children[e]=n.node,t.node.childCount++,hh(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=/[\[\].#$\/\u0000-\u001F\u007F]/,SR=/[\[\].#$\u0000-\u001F\u007F]/,Id=10*1024*1024,Af=function(t){return typeof t=="string"&&t.length!==0&&!ER.test(t)},Gw=function(t){return typeof t=="string"&&t.length!==0&&!SR.test(t)},xR=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Gw(t)},fh=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!tf(t)||t&&typeof t=="object"&&_n(t,".sv")},$o=function(t,e,n,i){i&&e===void 0||lu(Ql(t,"value"),e,n)},lu=function(t,e,n){const i=n instanceof Te?new jP(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Wr(i));if(typeof e=="function")throw new Error(t+"contains a function "+Wr(i)+" with contents = "+e.toString());if(tf(e))throw new Error(t+"contains "+e.toString()+" "+Wr(i));if(typeof e=="string"&&e.length>Id/3&&Xl(e)>Id)throw new Error(t+"contains a string greater than "+Id+" utf8 bytes "+Wr(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,l=!1;if(ct(e,(u,d)=>{if(u===".value")o=!0;else if(u!==".priority"&&u!==".sv"&&(l=!0,!Af(u)))throw new Error(t+" contains an invalid key ("+u+") "+Wr(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);VP(i,u),lu(t,d,i),UP(i)}),o&&l)throw new Error(t+' contains ".value" child '+Wr(i)+" in addition to actual children.")}},CR=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const l=So(i);for(let u=0;u<l.length;u++)if(!(l[u]===".priority"&&u===l.length-1)){if(!Af(l[u]))throw new Error(t+"contains an invalid key ("+l[u]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(FP);let o=null;for(n=0;n<e.length;n++){if(i=e[n],o!==null&&Ht(o,i))throw new Error(t+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}},TR=function(t,e,n,i){const o=Ql(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];ct(e,(u,d)=>{const f=new Te(u);if(lu(o,d,$e(n,f)),af(f)===".priority"&&!fh(d))throw new Error(o+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(f)}),CR(o,l)},bf=function(t,e,n,i){if(!Gw(n))throw new Error(Ql(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},IR=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),bf(t,e,n)},Df=function(t,e){if(de(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},kR=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Af(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!xR(n))throw new Error(Ql(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uu(t,e){let n=null;for(let i=0;i<e.length;i++){const o=e[i],l=o.getPath();n!==null&&!lf(l,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:l}),n.events.push(o)}n&&t.eventLists_.push(n)}function qw(t,e,n){uu(t,n),Yw(t,i=>lf(i,e))}function ln(t,e,n){uu(t,n),Yw(t,i=>Ht(i,e)||Ht(e,i))}function Yw(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const o=t.eventLists_[i];if(o){const l=o.path;e(l)?(NR(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function NR(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();oo&&ut("event: "+n.toString()),ss(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="repo_interrupt",AR=25;class bR{constructor(e,n,i,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new PR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ll(),this.transactionQueueTree_=new Nf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function DR(t,e,n){if(t.stats_=sf(t.repoInfo_),t.forceRestClient_||lP())t.server_=new Ol(t.repoInfo_,(i,o,l,u)=>{Pv(t,i,o,l,u)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Nv(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{st(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Dn(t.repoInfo_,e,(i,o,l,u)=>{Pv(t,i,o,l,u)},i=>{Nv(t,i)},i=>{MR(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=fP(t.repoInfo_,()=>new pN(t.stats_,t.server_)),t.infoData_=new uN,t.infoSyncTree_=new Tv({startListening:(i,o,l,u)=>{let d=[];const f=t.infoData_.getNode(i._path);return f.isEmpty()||(d=su(t.infoSyncTree_,i._path,f),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),Mf(t,"connected",!1),t.serverSyncTree_=new Tv({startListening:(i,o,l,u)=>(t.server_.listen(i,l,o,(d,f)=>{const m=u(d,f);ln(t.eventQueue_,i._path,m)}),[]),stopListening:(i,o)=>{t.server_.unlisten(i,o)}})}function Qw(t){const n=t.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function cu(t){return mR({timestamp:Qw(t)})}function Pv(t,e,n,i,o){t.dataUpdateCount++;const l=new Te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let u=[];if(o)if(i){const f=Cl(n,m=>it(m));u=cR(t.serverSyncTree_,l,f,o)}else{const f=it(n);u=uR(t.serverSyncTree_,l,f,o)}else if(i){const f=Cl(n,m=>it(m));u=oR(t.serverSyncTree_,l,f)}else{const f=it(n);u=su(t.serverSyncTree_,l,f)}let d=l;u.length>0&&(d=Ji(t,l)),ln(t.eventQueue_,d,u)}function Nv(t,e){Mf(t,"connected",e),e===!1&&FR(t)}function MR(t,e){ct(e,(n,i)=>{Mf(t,n,i)})}function Mf(t,e,n){const i=new Te("/.info/"+e),o=it(n);t.infoData_.updateSnapshot(i,o);const l=su(t.infoSyncTree_,i,o);ln(t.eventQueue_,i,l)}function Of(t){return t.nextWriteId_++}function OR(t,e,n,i,o){du(t,"set",{path:e.toString(),value:n,priority:i});const l=cu(t),u=it(n,i),d=Sf(t.serverSyncTree_,e),f=zw(u,d,l),m=Of(t),g=jw(t.serverSyncTree_,e,f,m,!0);uu(t.eventQueue_,g),t.server_.put(e.toString(),u.val(!0),(_,S)=>{const C=_==="ok";C||Et("set at "+e+" failed: "+_);const N=dr(t.serverSyncTree_,m,!C);ln(t.eventQueue_,e,N),ph(t,o,_,S)});const y=Ff(t,e);Ji(t,y),ln(t.eventQueue_,y,[])}function LR(t,e,n,i){du(t,"update",{path:e.toString(),value:n});let o=!0;const l=cu(t),u={};if(ct(n,(d,f)=>{o=!1,u[d]=Ww($e(e,d),it(f),t.serverSyncTree_,l)}),o)ut("update() called with empty data.  Don't do anything."),ph(t,i,"ok",void 0);else{const d=Of(t),f=sR(t.serverSyncTree_,e,u,d);uu(t.eventQueue_,f),t.server_.merge(e.toString(),n,(m,g)=>{const y=m==="ok";y||Et("update at "+e+" failed: "+m);const _=dr(t.serverSyncTree_,d,!y),S=_.length>0?Ji(t,e):e;ln(t.eventQueue_,S,_),ph(t,i,m,g)}),ct(n,m=>{const g=Ff(t,$e(e,m));Ji(t,g)}),ln(t.eventQueue_,e,[])}}function FR(t){du(t,"onDisconnectEvents");const e=cu(t),n=Ll();ih(t.onDisconnect_,we(),(o,l)=>{const u=Ww(o,l,t.serverSyncTree_,e);Tw(n,o,u)});let i=[];ih(n,we(),(o,l)=>{i=i.concat(su(t.serverSyncTree_,o,l));const u=Ff(t,o);Ji(t,u)}),t.onDisconnect_=Ll(),ln(t.eventQueue_,we(),i)}function jR(t,e,n){let i;de(e._path)===".info"?i=Iv(t.infoSyncTree_,e,n):i=Iv(t.serverSyncTree_,e,n),qw(t.eventQueue_,e._path,i)}function Rv(t,e,n){let i;de(e._path)===".info"?i=dh(t.infoSyncTree_,e,n):i=dh(t.serverSyncTree_,e,n),qw(t.eventQueue_,e._path,i)}function VR(t){t.persistentConnection_&&t.persistentConnection_.interrupt(RR)}function du(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ut(n,...e)}function ph(t,e,n,i){e&&ss(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let l=o;i&&(l+=": "+i);const u=new Error(l);u.code=o,e(u)}})}function Xw(t,e,n){return Sf(t.serverSyncTree_,e,n)||oe.EMPTY_NODE}function Lf(t,e=t.transactionQueueTree_){if(e||hu(t,e),as(e)){const n=Zw(t,e);z(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&UR(t,zo(e),n)}else Hw(e)&&au(e,n=>{Lf(t,n)})}function UR(t,e,n){const i=n.map(m=>m.currentWriteId),o=Xw(t,e,i);let l=o;const u=o.hash();for(let m=0;m<n.length;m++){const g=n[m];z(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const y=Nt(e,g.path);l=l.updateChild(y,g.currentOutputSnapshotRaw)}const d=l.val(!0),f=e;t.server_.put(f.toString(),d,m=>{du(t,"transaction put response",{path:f.toString(),status:m});let g=[];if(m==="ok"){const y=[];for(let _=0;_<n.length;_++)n[_].status=2,g=g.concat(dr(t.serverSyncTree_,n[_].currentWriteId)),n[_].onComplete&&y.push(()=>n[_].onComplete(null,!0,n[_].currentOutputSnapshotResolved)),n[_].unwatcher();hu(t,Rf(t.transactionQueueTree_,e)),Lf(t,t.transactionQueueTree_),ln(t.eventQueue_,e,g);for(let _=0;_<y.length;_++)ss(y[_])}else{if(m==="datastale")for(let y=0;y<n.length;y++)n[y].status===3?n[y].status=4:n[y].status=0;else{Et("transaction at "+f.toString()+" failed: "+m);for(let y=0;y<n.length;y++)n[y].status=4,n[y].abortReason=m}Ji(t,e)}},u)}function Ji(t,e){const n=Jw(t,e),i=zo(n),o=Zw(t,n);return BR(t,o,i),i}function BR(t,e,n){if(e.length===0)return;const i=[];let o=[];const u=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],m=Nt(n,f.path);let g=!1,y;if(z(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,y=f.abortReason,o=o.concat(dr(t.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=AR)g=!0,y="maxretry",o=o.concat(dr(t.serverSyncTree_,f.currentWriteId,!0));else{const _=Xw(t,f.path,u);f.currentInputSnapshot=_;const S=e[d].update(_.val());if(S!==void 0){lu("transaction failed: Data returned ",S,f.path);let C=it(S);typeof S=="object"&&S!=null&&_n(S,".priority")||(C=C.updatePriority(_.getPriority()));const A=f.currentWriteId,U=cu(t),B=zw(C,_,U);f.currentOutputSnapshotRaw=C,f.currentOutputSnapshotResolved=B,f.currentWriteId=Of(t),u.splice(u.indexOf(A),1),o=o.concat(jw(t.serverSyncTree_,f.path,B,f.currentWriteId,f.applyLocally)),o=o.concat(dr(t.serverSyncTree_,A,!0))}else g=!0,y="nodata",o=o.concat(dr(t.serverSyncTree_,f.currentWriteId,!0))}ln(t.eventQueue_,n,o),o=[],g&&(e[d].status=2,(function(_){setTimeout(_,Math.floor(0))})(e[d].unwatcher),e[d].onComplete&&(y==="nodata"?i.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):i.push(()=>e[d].onComplete(new Error(y),!1,null))))}hu(t,t.transactionQueueTree_);for(let d=0;d<i.length;d++)ss(i[d]);Lf(t,t.transactionQueueTree_)}function Jw(t,e){let n,i=t.transactionQueueTree_;for(n=de(e);n!==null&&as(i)===void 0;)i=Rf(i,n),e=Ae(e),n=de(e);return i}function Zw(t,e){const n=[];return eE(t,e,n),n.sort((i,o)=>i.order-o.order),n}function eE(t,e,n){const i=as(e);if(i)for(let o=0;o<i.length;o++)n.push(i[o]);au(e,o=>{eE(t,o,n)})}function hu(t,e){const n=as(e);if(n){let i=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[i]=n[o],i++);n.length=i,$w(e,n.length>0?n:void 0)}au(e,i=>{hu(t,i)})}function Ff(t,e){const n=zo(Jw(t,e)),i=Rf(t.transactionQueueTree_,e);return _R(i,o=>{kd(t,o)}),kd(t,i),Kw(i,o=>{kd(t,o)}),n}function kd(t,e){const n=as(e);if(n){const i=[];let o=[],l=-1;for(let u=0;u<n.length;u++)n[u].status===3||(n[u].status===1?(z(l===u-1,"All SENT items should be at beginning of queue."),l=u,n[u].status=3,n[u].abortReason="set"):(z(n[u].status===0,"Unexpected transaction status in abort"),n[u].unwatcher(),o=o.concat(dr(t.serverSyncTree_,n[u].currentWriteId,!0)),n[u].onComplete&&i.push(n[u].onComplete.bind(null,new Error("set"),!1,null))));l===-1?$w(e,void 0):n.length=l+1,ln(t.eventQueue_,zo(e),o);for(let u=0;u<i.length;u++)ss(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let o=n[i];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function zR(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Et(`Invalid query segment '${n}' in query '${t}'`)}return e}const Av=function(t,e){const n=$R(t),i=n.namespace;n.domain==="firebase.com"&&Fn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Fn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Z1();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new aw(n.host,n.secure,i,o,e,"",i!==n.subdomain),path:new Te(n.pathString)}},$R=function(t){let e="",n="",i="",o="",l="",u=!0,d="https",f=443;if(typeof t=="string"){let m=t.indexOf("//");m>=0&&(d=t.substring(0,m-1),t=t.substring(m+2));let g=t.indexOf("/");g===-1&&(g=t.length);let y=t.indexOf("?");y===-1&&(y=t.length),e=t.substring(0,Math.min(g,y)),g<y&&(o=WR(t.substring(g,y)));const _=zR(t.substring(Math.min(t.length,y)));m=e.indexOf(":"),m>=0?(u=d==="https"||d==="wss",f=parseInt(e.substring(m+1),10)):m=e.length;const S=e.slice(0,m);if(S.toLowerCase()==="localhost")n="localhost";else if(S.split(".").length<=2)n=S;else{const C=e.indexOf(".");i=e.substring(0,C).toLowerCase(),n=e.substring(C+1),l=i}"ns"in _&&(l=_.ns)}return{host:e,port:f,domain:n,subdomain:i,secure:u,scheme:d,pathString:o,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",HR=(function(){let t=0;const e=[];return function(n){const i=n===t;t=n;let o;const l=new Array(8);for(o=7;o>=0;o--)l[o]=bv.charAt(n%64),n=Math.floor(n/64);z(n===0,"Cannot push at time == 0");let u=l.join("");if(i){for(o=11;o>=0&&e[o]===63;o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(Math.random()*64);for(o=0;o<12;o++)u+=bv.charAt(e[o]);return z(u.length===20,"nextPushId: Length should be 20."),u}})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,i,o){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+st(this.snapshot.exportVal())}}class GR{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return z(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,i,o){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=o}get key(){return he(this._path)?null:af(this._path)}get ref(){return new Tr(this._repo,this._path)}get _queryIdentifier(){const e=mv(this._queryParams),n=nf(e);return n==="{}"?"default":n}get _queryObject(){return mv(this._queryParams)}isEqual(e){if(e=yt(e),!(e instanceof ai))return!1;const n=this._repo===e._repo,i=lf(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&i&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+LP(this._path)}}function YR(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function jf(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===qr){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ti)throw new Error(i);if(typeof e!="string")throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==yr)throw new Error(i);if(typeof n!="string")throw new Error(o)}}else if(t.getIndex()===Be){if(e!=null&&!fh(e)||n!=null&&!fh(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(z(t.getIndex()instanceof df||t.getIndex()===xw,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function tE(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Tr extends ai{constructor(e,n){super(e,n,new ff,!1)}get parent(){const e=gw(this._path);return e===null?null:new Tr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class $l{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Te(e),i=ko(this.ref,e);return new $l(this._node.getChild(n),i,Be)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,o)=>e(new $l(o,ko(this.ref,i),Be)))}hasChild(e){const n=new Te(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Yr(t,e){return t=yt(t),t._checkNotDeleted("ref"),e!==void 0?ko(t._root,e):t._root}function ko(t,e){return t=yt(t),de(t._path)===null?IR("child","path",e):bf("child","path",e),new Tr(t._repo,$e(t._path,e))}function QR(t,e){t=yt(t),Df("push",t._path),$o("push",e,t._path,!0);const n=Qw(t._repo),i=HR(n),o=ko(t,i),l=ko(t,i);let u;return u=Promise.resolve(l),o.then=u.then.bind(u),o.catch=u.then.bind(u,void 0),o}function XR(t){return Df("remove",t._path),nE(t,null)}function nE(t,e){t=yt(t),Df("set",t._path),$o("set",e,t._path,!1);const n=new Mo;return OR(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function rE(t,e){TR("update",e,t._path);const n=new Mo;return LR(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class Vf{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new KR("value",this,new $l(e.snapshotNode,new Tr(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new GR(this,e,n):null}matches(e){return e instanceof Vf?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function JR(t,e,n,i,o){let l;if(typeof i=="object"&&(l=void 0,o=i),typeof i=="function"&&(l=i),o&&o.onlyOnce){const f=n,m=(g,y)=>{Rv(t._repo,t,d),f(g,y)};m.userCallback=n.userCallback,m.context=n.context,n=m}const u=new qR(n,l||void 0),d=new Vf(u);return jR(t._repo,t,d),()=>Rv(t._repo,t,d)}function Uf(t,e,n,i){return JR(t,"value",e,n,i)}class Ho{}class ZR extends Ho{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){$o("endAt",this._value,e._path,!0);const n=aN(e._queryParams,this._value,this._key);if(tE(n),jf(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ai(e._repo,e._path,n,e._orderByCalled)}}class eA extends Ho{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){$o("startAt",this._value,e._path,!0);const n=oN(e._queryParams,this._value,this._key);if(tE(n),jf(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ai(e._repo,e._path,n,e._orderByCalled)}}class tA extends Ho{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ai(e._repo,e._path,sN(e._queryParams,this._limit),e._orderByCalled)}}function iE(t){if(Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new tA(t)}class nA extends Ho{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){YR(e,"orderByChild");const n=new Te(this._path);if(he(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new df(n),o=lN(e._queryParams,i);return jf(o),new ai(e._repo,e._path,o,!0)}}function sE(t){return bf("orderByChild","path",t),new nA(t)}class rA extends Ho{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if($o("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ZR(this._value,this._key)._apply(new eA(this._value,this._key)._apply(e))}}function oE(t,e){return new rA(t,e)}function aE(t,...e){let n=yt(t);for(const i of e)n=i._apply(n);return n}QN(Tr);nR(Tr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="FIREBASE_DATABASE_EMULATOR_HOST",mh={};let sA=!1;function oA(t,e,n,i){t.repoInfo_=new aw(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function aA(t,e,n,i,o){let l=i||t.options.databaseURL;l===void 0&&(t.options.projectId||Fn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ut("Using default host for project ",t.options.projectId),l=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u=Av(l,o),d=u.repoInfo,f;typeof process<"u"&&Xy&&(f=Xy[iA]),f?(l=`http://${f}?ns=${d.namespace}`,u=Av(l,o),d=u.repoInfo):u.repoInfo.secure;const m=new cP(t.name,t.options,e);kR("Invalid Firebase Database URL",u),he(u.path)||Fn("Database URL must point to the root of a Firebase Database (not including a child path).");const g=uA(d,t,m,new uP(t.name,n));return new cA(g,t)}function lA(t,e){const n=mh[e];(!n||n[t.key]!==t)&&Fn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),VR(t),delete n[t.key]}function uA(t,e,n,i){let o=mh[e.name];o||(o={},mh[e.name]=o);let l=o[t.toURLString()];return l&&Fn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new bR(t,sA,n,i),o[t.toURLString()]=l,l}class cA{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(DR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tr(this._repo,we())),this._rootInternal}_delete(){return this._rootInternal!==null&&(lA(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Fn("Cannot call "+e+" on a deleted database.")}}function dA(t=h0(),e){const n=zh(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=sT("database");i&&hA(n,...i)}return n}function hA(t,e,n,i={}){t=yt(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Fn("Cannot call useEmulator() after instance has already been initialized.");const o=t._repoInternal;let l;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&Fn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new yl(yl.OWNER);else if(i.mockUserToken){const u=typeof i.mockUserToken=="string"?i.mockUserToken:oT(i.mockUserToken,t.app.options.projectId);l=new yl(u)}oA(o,e,n,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){G1(rs),Gi(new Zr("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return aA(i,o,l,n)},"PUBLIC").setMultipleInstances(!0)),pr(Jy,Zy,t),pr(Jy,Zy,"esm2017")}Dn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Dn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};fA();const pA={apiKey:"AIzaSyBqPm_z-es3gBE7rkwKtjxqz1kVVJQnLHQ",authDomain:"silk-f4d35.firebaseapp.com",databaseURL:"https://silk-f4d35-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"silk-f4d35",storageBucket:"silk-f4d35.appspot.com",messagingSenderId:"385217886123",appId:"1:385217886123:web:8fc0ea599d59e1b19684ee",measurementId:"G-P6XL5EVE7N"},lE=d0(pA),Mn=z1(lE),Qr=dA(lE);function mA({current:t}){const[e,n]=D.useState(null);D.useEffect(()=>{const d=jo(Mn,f=>{n(f)});return()=>d()},[]);const i=async()=>{await bk(Mn),n(null),alert(" .")},o=d=>d?d.split("@")[0]:"",l=()=>w.jsx("a",{href:"#home",className:"flex items-center space-x-3",children:w.jsx("img",{src:"/logo.png",alt:"Sensory Echo Logo",width:130,height:10})}),u=(d,f)=>{const m=t===d;return w.jsxs("a",{href:`#${d}`,className:`relative text-base font-medium py-2 transition-all duration-300
          ${m?"text-white border-b-2 border-indigo-400":"text-gray-400 hover:text-white"}`,children:[f,m&&w.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-[#8877E6] via-[#788AE6] to-[#77ACE6]"})]},d)};return w.jsx("nav",{className:"fixed top-0 inset-x-0 z-20 bg-[#1a1a2e] shadow-xl border-b border-gray-700/50",children:w.jsxs("div",{className:"max-w-5xl mx-auto h-16 px-6 flex items-center justify-between",children:[w.jsx(l,{}),w.jsxs("div",{className:"flex items-center space-x-8",children:[u("home","Home"),u("profile","Profile"),u("explore","Explore"),e?w.jsxs("div",{className:"flex items-center space-x-3 text-white",children:[w.jsx("span",{className:"text-sm font-medium",children:o(e.email)}),w.jsx("button",{onClick:i,className:"text-gray-400 hover:text-red-400 text-xs underline underline-offset-2",children:""})]}):u("login","Login")]})]})})}function uE(t){document.querySelectorAll("audio").forEach(n=>{if(!(t&&n===t))try{n.pause()}catch{}})}const Dv=["square","circle","wave","triangle"],Mv=["chime","rain","piano","drum"],Ov={chime:"/sounds/chime.mp3",rain:"/sounds/rain.mp3",piano:"/sounds/piano.mp3",drum:"/sounds/drum.mp3"},Pd=t=>t&&Ov[t]?Ov[t]:null,gA="https://silk-ai-api-842161501725.asia-northeast3.run.app",Lv=String(gA).replace(/\/+$/,"");async function yA(t){if(!Lv)return{label:parseInt((t.color||"#888888").replace("#",""),16)>8947848?"":"",score:.6};const e=await fetch(`${Lv}/predict`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_hex:t.color,shape:t.shape,sound:t.sound})}),n=await e.json().catch(()=>{throw new Error("AI   ")});if(!e.ok||n?.error)throw new Error(n?.error||`AI HTTP ${e.status}`);const i=n.label||n.prediction,o=typeof n.score=="number"?n.score:n.confidence;if(!i||typeof o!="number")throw new Error("AI   ");return{label:i,score:o}}function Fv({shape:t,color:e,size:n=96}){return w.jsxs("div",{className:"rounded-2xl border shadow-inner grid place-items-center overflow-hidden",style:{width:n,height:n,background:e},title:t,"aria-label":`preview ${t}`,children:[t==="square"&&w.jsx("div",{className:"rounded-lg",style:{width:n*.58,height:n*.58,background:"rgba(255,255,255,0.85)"}}),t==="circle"&&w.jsx("div",{className:"rounded-full",style:{width:n*.66,height:n*.66,background:"rgba(255,255,255,0.85)"}}),t==="triangle"&&w.jsx("div",{style:{width:0,height:0,borderLeft:`${n*.29}px solid transparent`,borderRight:`${n*.29}px solid transparent`,borderBottom:`${n*.5}px solid rgba(255,255,255,0.85)`,transform:"translateY(6px)"}}),t==="wave"&&w.jsx("svg",{width:n*.75,height:n*.45,viewBox:"0 0 100 60","aria-hidden":"true",children:w.jsx("path",{d:"M0 30 Q 15 5 30 30 T 60 30 T 90 30",fill:"none",stroke:"white",strokeOpacity:"0.95",strokeWidth:"6",strokeLinecap:"round"})})]})}function vA(){const[t,e]=D.useState(null),[n,i]=D.useState("#8877E6"),[o,l]=D.useState(Dv[0]),[u,d]=D.useState(Mv[0]),[f,m]=D.useState(!0),[g,y]=D.useState({}),[_,S]=D.useState(!1),[C,N]=D.useState(""),A=D.useRef(null),[U,B]=D.useState(!1);D.useEffect(()=>{const j=jo(Mn,J=>{J||(location.hash="login"),e(J?J.uid:null)});return()=>j()},[]),D.useEffect(()=>{const j=A.current;if(!j)return;j.pause(),B(!1);const J=Pd(u);J&&(j.src=J)},[u]),D.useEffect(()=>()=>{const j=A.current;j&&(j.pause(),j.src="")},[]);const b=async()=>{const j=A.current;if(j)try{if(U)j.pause(),B(!1);else{if(uE(),!j.src){const J=Pd(u);if(!J)return alert("    .");j.src=J}await j.play(),B(!0)}}catch{alert("  .     .")}},O=()=>{if(!navigator.geolocation)return alert("     .");navigator.geolocation.getCurrentPosition(j=>y({lat:j.coords.latitude,lng:j.coords.longitude}),()=>alert("  ."),{enableHighAccuracy:!0,timeout:6e3})},H=async()=>{if(!t)return alert(" .");N(""),S(!0);try{const j=QR(Yr(Qr,"emotions")),$={id:j.key,userId:t,color:n,shape:o,sound:u,timestamp:Date.now(),likes:0};g.lat&&g.lng&&($.lat=g.lat,$.lng=g.lng);try{if(f){const ge=await yA({color:n,shape:o,sound:u});$.label=ge.label,$.score=ge.score}}catch{}await nE(j,$),location.hash="profile"}catch(j){N(j?.message||" ")}finally{S(!1)}};return w.jsxs("div",{className:"min-h-[calc(100vh-64px)] p-4 flex flex-col gap-4",children:[w.jsxs("h2",{className:"text-xl font-bold",children:[w.jsx("span",{className:"bg-gradient-to-r from-[#8877E6] via-[#788AE6] to-[#77ACE6] bg-clip-text text-transparent",children:"SILK"})," ","  "]}),w.jsx("div",{className:"rounded-2xl bg-white border shadow p-4",children:w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx(Fv,{shape:o,color:n}),w.jsxs("div",{className:"flex-1 text-sm text-gray-600",children:[" : ",w.jsx("b",{children:o}),"  : ",w.jsx("b",{children:u}),g.lat&&g.lng?w.jsxs("span",{className:"ml-2 text-gray-500",children:["(",g.lat.toFixed(4),", ",g.lng.toFixed(4),")"]}):null,w.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[": ",n]})]}),w.jsx("button",{onClick:b,className:"px-3 py-2 rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-60",disabled:!Pd(u),"aria-label":" ",children:U?" ":" "}),w.jsx("audio",{ref:A,preload:"none",onEnded:()=>B(!1)}),w.jsx("button",{onClick:O,className:"px-3 py-2 rounded-lg text-white bg-gray-900 hover:bg-black",children:" "})]})}),w.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[w.jsxs("div",{className:"rounded-2xl bg-white border shadow p-4",children:[w.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),w.jsx("input",{type:"color",value:n,onChange:j=>i(j.target.value),className:"w-full h-10 border rounded-md"}),w.jsx("div",{className:"mt-2 text-xs text-gray-500",children:n})]}),w.jsxs("div",{className:"rounded-2xl bg-white border shadow p-4",children:[w.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),w.jsx("div",{className:"grid grid-cols-4 gap-2",children:Dv.map(j=>w.jsx("button",{onClick:()=>l(j),"aria-pressed":o===j,className:`rounded-lg border p-1 hover:bg-gray-50 ${o===j?"ring-2 ring-indigo-500":""}`,children:w.jsx(Fv,{shape:j,color:n,size:72})},j))})]}),w.jsxs("div",{className:"rounded-2xl bg-white border shadow p-4",children:[w.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:""}),w.jsx("div",{className:"flex flex-wrap gap-2",children:Mv.map(j=>w.jsx("button",{onClick:()=>d(j),className:`px-3 py-1.5 rounded-full border ${u===j?"text-white bg-gradient-to-r from-[#8877E6] via-[#788AE6] to-[#77ACE6] border-transparent":"bg-white text-gray-700 border-gray-200"}`,children:j},j))})]})]}),w.jsxs("div",{className:"rounded-2xl bg-white border shadow p-4 flex items-center justify-between",children:[w.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[w.jsx("input",{type:"checkbox",checked:f,onChange:j=>m(j.target.checked)}),"   AI "]}),w.jsx("button",{onClick:H,disabled:_||!t,className:"px-5 py-2.5 rounded-xl text-white font-semibold bg-gradient-to-r from-[#8877E6] via-[#788AE6] to-[#77ACE6] disabled:opacity-60",children:_?" ":""})]}),C&&w.jsx("p",{className:"text-sm text-red-500",children:C})]})}function cE({shape:t}){const e="rgba(0,0,0,0.55)",n="rgba(255,255,255,0.18)";return w.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 100 100","aria-hidden":!0,children:[t==="square"&&w.jsx("rect",{x:"18",y:"18",width:"64",height:"64",rx:"10",fill:n,stroke:e,strokeWidth:2}),t==="circle"&&w.jsx("circle",{cx:"50",cy:"50",r:"28",fill:n,stroke:e,strokeWidth:2}),t==="triangle"&&w.jsx("path",{d:"M50 18 L80 78 L20 78 Z",fill:n,stroke:e,strokeWidth:2}),t==="wave"&&w.jsx("path",{d:"M5 60 C20 40, 30 80, 45 60 S70 40, 95 60",fill:"none",stroke:e,strokeWidth:3,strokeLinecap:"round"}),t==="squiggle"&&w.jsx("path",{d:"M15 55 C25 25, 45 85, 55 55 S85 25, 90 55",fill:"none",stroke:e,strokeWidth:3,strokeLinecap:"round"}),t==="leaf"&&w.jsx("path",{d:"M50 18 C80 35,75 70,50 85 C25 70,20 35,50 18 Z",fill:n,stroke:e,strokeWidth:2})]})}const _A={chime:"/sounds/chime.mp3",rain:"/sounds/rain.mp3",piano:"/sounds/piano.mp3",drum:"/sounds/drum.mp3"};function wA(t){if(!t)return null;const e=t.toLowerCase().trim();return _A[e]??null}function EA({open:t,item:e,onClose:n}){const i=D.useRef(null);if(D.useEffect(()=>{const u=i.current;u&&(u.pause(),u.currentTime=0,u.src=e?.sound?wA(e.sound)??"":"")},[t,e?.id,e?.sound]),D.useEffect(()=>{if(!t){const u=i.current;u&&(u.pause(),u.src="")}},[t]),!t||!e)return null;const o=e.timestamp?new Date(e.timestamp).toLocaleString("ko-KR"):"-",l=typeof e.score=="number"?` (${Math.round(e.score*100)}%)`:"";return w.jsx("div",{className:"fixed inset-0 z-50 bg-black/40 grid place-items-center p-4",role:"dialog","aria-modal":"true",children:w.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-2xl overflow-hidden",children:[w.jsxs("div",{className:"relative h-56",style:{background:e.color},children:[w.jsx(cE,{shape:e.shape}),w.jsx("div",{className:"absolute top-3 left-3 text-xs px-2 py-1 rounded-full bg-black/30 text-white",children:o}),w.jsx("div",{className:"absolute top-3 right-3 text-white text-lg",children:e.lat&&e.lng?"":""})]}),w.jsxs("div",{className:"p-4 space-y-2",children:[w.jsxs("div",{className:"text-sm text-gray-500",children:[e.shape,"  ",e.sound]}),w.jsx("div",{className:"text-lg font-bold",children:e.label?`${e.label}${l}`:" "}),w.jsx("audio",{ref:i,controls:!0,preload:"none",onPlay:()=>uE(i.current),className:"w-full mt-2"},e?.sound),w.jsx("div",{className:"flex justify-end pt-2",children:w.jsx("button",{onClick:n,className:"px-3 py-1.5 rounded-lg border hover:bg-gray-50",children:""})})]})]})})}const SA="https://silk-ai-api-842161501725.asia-northeast3.run.app",jv=String(SA).replace(/\/+$/,"");async function xA(t){if(!jv){const o=parseInt((t.color||"#888888").replace("#",""),16)>8947848;return{label:o?"happy":"calm",score:.6,scores:{happy:o?.6:.2,calm:o?.2:.6}}}const n=await(await fetch(`${jv}/predict`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_hex:t.color,shape:t.shape,sound:t.sound})})).json();if(n?.scores&&!n?.label){const o=Object.entries(n.scores).sort((l,u)=>u[1]-l[1])[0];return{label:o?.[0],score:o?.[1],scores:n.scores}}return{label:n.label,score:n.score,scores:n.scores}}const CA=t=>{switch(t){case"happy":return"text-green-600";case"calm":return"text-blue-600";case"love":return"text-pink-500";case"sad":return"text-purple-600";case"angry":return"text-red-600";case"fear":return"text-amber-600";default:return"text-gray-500"}};let Nd=null;function TA(){if(typeof window<"u"&&window.google?.maps)return Promise.resolve(window.google);if(!Nd){const t="AIzaSyCb1vtltxjuAZ01cP0hB-4Ghyt7iMupoqU";Nd=new Promise((e,n)=>{const i=document.getElementById("google-maps-sdk");if(i){i.addEventListener("load",()=>e(window.google)),i.addEventListener("error",()=>n(new Error("Google Maps  ")));return}const o=document.createElement("script");o.id="google-maps-sdk",o.src=`https://maps.googleapis.com/maps/api/js?key=${t}`,o.async=!0,o.defer=!0,o.onload=()=>e(window.google),o.onerror=()=>n(new Error("Google Maps  ")),document.body.appendChild(o)})}return Nd}function IA(){const[t,e]=D.useState([]),[n,i]=D.useState(null),[o,l]=D.useState(""),u=D.useRef(null),d=D.useRef(null),f=D.useRef(new Map),m=D.useRef([]),[g,y]=D.useState(!1),[_,S]=D.useState(null);D.useEffect(()=>{const b=Uf(Yr(Qr,"emotions"),O=>{const H=O.val()||{},J=Object.keys(H).map($=>({id:$,...H[$]})).filter($=>typeof $?.timestamp=="number").map($=>({...$,id:$.id,userId:$.userId??"anonymous",color:$.color??"#eee",shape:$.shape??"-",sound:$.sound??"-",likes:$.likes??0}));e(J)});return()=>b()},[]);const{groupedCards:C,sortedDates:N}=D.useMemo(()=>{const b=t.reduce((H,j)=>{if(j.timestamp){const J=new Date(j.timestamp),$=`${J.getFullYear()}-${String(J.getMonth()+1).padStart(2,"0")}-${String(J.getDate()).padStart(2,"0")}`;H[$]||(H[$]=[]),H[$].push(j)}return H},{}),O=Object.keys(b).sort((H,j)=>H<j?1:-1);return{groupedCards:b,sortedDates:O}},[t]);D.useEffect(()=>{let b=!1;return TA().then(O=>{b||!u.current||d.current||(d.current=new O.maps.Map(u.current,{center:{lat:37.5665,lng:126.978},zoom:11,fullscreenControl:!1,streetViewControl:!1,mapTypeControl:!1}))}).catch(O=>l(O.message||"  ")),()=>{b=!0}},[]),D.useEffect(()=>{const b=window.google;if(!d.current||!b)return;const O=t.filter(ee=>typeof ee.lat=="number"&&typeof ee.lng=="number"),H=d.current,j=f.current,J=new Map;let $=new b.maps.LatLngBounds;j.forEach((ee,Ee)=>{O.some(Se=>Se.id===Ee)||ee.setMap(null)}),O.forEach(ee=>{const Ee=`
        <div style="min-width:160px">
          <div><b>${ee.label??"unknown"}</b> ${typeof ee.score=="number"?Math.round(ee.score*100)+"%":""}</div>
          <div style="font-size:12px;color:#555">${ee.lat?.toFixed(3)}, ${ee.lng?.toFixed(3)}</div>
        </div>`;if(j.has(ee.id)){const Se=j.get(ee.id);Se.__infoWindow.setContent(Ee),J.set(ee.id,Se)}else{const Se=new b.maps.InfoWindow({content:Ee}),Fe=new b.maps.Marker({position:{lat:ee.lat,lng:ee.lng},map:H,title:ee.label||"emotion",icon:{path:b.maps.SymbolPath.CIRCLE,scale:7,fillColor:ee.color||"#4285F4",fillOpacity:1,strokeColor:"#333",strokeWeight:1}});Fe.__infoWindow=Se,Fe.__emotionId=ee.id,Fe.addListener("click",()=>{f.current.forEach(Qe=>Qe.__infoWindow.close()),Se.open({map:H,anchor:Fe})}),J.set(ee.id,Fe)}$.extend({lat:ee.lat,lng:ee.lng})}),f.current=J,$.isEmpty()||H.fitBounds($),m.current.forEach(ee=>ee.setMap(null)),m.current=[];const ge=O.filter(ee=>{const Ee=ee.scores?.happy??(ee.label==="happy"?ee.score:void 0);return typeof Ee=="number"&&Ee>=.6}),Ie=new Map,dt=(ee,Ee)=>`${ee.toFixed(2)},${Ee.toFixed(2)}`;ge.forEach(ee=>{const Ee=dt(ee.lat,ee.lng),Se=Ie.get(Ee)||{latSum:0,lngSum:0,count:0,scoreSum:0};Se.latSum+=ee.lat,Se.lngSum+=ee.lng,Se.count+=1;const Fe=ee.scores?.happy??ee.score??.6;Se.scoreSum+=Fe,Ie.set(Ee,Se)}),Ie.forEach(ee=>{const Ee={lat:ee.latSum/ee.count,lng:ee.lngSum/ee.count},Se=ee.scoreSum/ee.count,Fe=300+200*ee.count,Qe=Math.max(.15,Math.min(.5,.15+Se*.35)),le=new b.maps.Circle({map:H,center:Ee,radius:Fe,strokeColor:"#4CAF50",strokeOpacity:.6,strokeWeight:1,fillColor:"#4CAF50",fillOpacity:Qe,clickable:!1});m.current.push(le)})},[t]);const A=b=>{if(typeof b.lat!="number"||typeof b.lng!="number"){alert("    .");return}if(!d.current){alert("   .");return}d.current.panTo({lat:b.lat,lng:b.lng}),d.current.setZoom(14)},U=async b=>{if(!n)try{i(b.id);const O=await xA({color:b.color,shape:b.shape,sound:b.sound});await rE(Yr(Qr,`emotions/${b.id}`),{label:O.label,score:O.score,scores:O.scores})}catch(O){alert(O?.message||"AI  ")}finally{i(null)}},B=async(b,O)=>{if(O.stopPropagation(),!!confirm("    ?"))try{await XR(Yr(Qr,`emotions/${b}`)),alert(" ")}catch(H){alert(" : "+H.message)}};return w.jsxs("section",{className:"space-y-3 p-4 pt-20 max-w-5xl mx-auto",children:[w.jsx("h2",{className:"text-lg font-semibold",children:" (/)"}),w.jsx("p",{className:"text-sm text-gray-500",children:"      ."}),w.jsx("div",{ref:u,className:"w-full h-[500px] rounded-lg border"}),o&&w.jsx("p",{className:"text-sm text-red-500",children:o}),w.jsxs("div",{className:"space-y-8 mt-4",children:[N.map(b=>w.jsxs("div",{className:"space-y-4",children:[w.jsx("h3",{className:"text-xl font-bold border-b pb-2 text-gray-700",children:b}),w.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:C[b].map(O=>{const H=!!O.label,j=typeof O.lat=="number"&&typeof O.lng=="number",J=O.timestamp?new Date(O.timestamp).toLocaleDateString("ko-KR").substring(5,12).replace(/\s/g,""):"-";return w.jsxs("div",{onClick:()=>{S(O),y(!0)},className:"rounded-2xl border bg-white shadow-sm p-3 cursor-pointer hover:shadow-md transition-shadow",children:[w.jsxs("div",{className:"relative h-28 rounded-xl bg-white",children:[w.jsx(cE,{shape:O.shape}),w.jsx("div",{className:"absolute top-3 left-3 px-3 py-1 bg-black/30 rounded-full text-xs text-white font-medium z-10",children:J}),w.jsx("div",{className:"absolute top-3 right-3 text-black/70 text-lg z-10",children:j?"":" "})]}),w.jsxs("div",{className:"p-1 flex flex-col justify-center bg-white",children:[w.jsxs("div",{className:"text-xs text-gray-500 font-medium truncate mt-2 mb-1",children:[O.shape,"  ",O.sound]}),w.jsx("div",{className:"text-lg font-extrabold truncate",children:H?w.jsx("span",{className:CA(O.label),children:O.label}):w.jsx("span",{className:"text-gray-400",children:" "})}),w.jsx("div",{className:"text-xs text-gray-400 mt-1",children:H&&`AI ${Math.round((O.score??0)*100)}%`})]}),w.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("button",{onClick:$=>B(O.id,$),className:"p-1 text-xs text-red-500 hover:text-red-700",children:""}),w.jsxs("small",{className:"text-gray-500 text-xs",children:[O.lat?.toFixed?.(3)??"-",", ",O.lng?.toFixed?.(3)??"-"]})]}),j?w.jsx("button",{onClick:$=>{$.stopPropagation(),A(O)},className:"px-2 py-1 text-xs font-semibold rounded-md bg-indigo-500 text-white hover:bg-indigo-600",children:" "}):H?w.jsx("div",{className:"px-2 py-1 text-xs font-semibold rounded-md text-gray-400 border border-gray-300",children:" "}):w.jsx("button",{onClick:$=>{$.stopPropagation(),U(O)},disabled:n===O.id,className:"px-2 py-1 text-xs rounded-md border bg-white hover:bg-gray-50 disabled:opacity-50",children:n===O.id?"":""}),j&&!H&&w.jsx("button",{onClick:$=>{$.stopPropagation(),U(O)},disabled:n===O.id,className:"px-2 py-1 text-xs rounded-md border bg-white hover:bg-gray-50 disabled:opacity-50",children:n===O.id?"":""})]})]},O.id)})})]},b)),N.length===0&&w.jsx("p",{className:"text-center text-gray-500 mt-10",children:"   ."})]}),w.jsx(EA,{open:g,item:_,onClose:()=>y(!1)})]})}function kA(){const[t,e]=D.useState(""),[n,i]=D.useState(""),[o,l]=D.useState(!1),[u,d]=D.useState(""),[f,m]=D.useState(""),g=(C,N=" .    .")=>{switch(C){case"auth/invalid-credential":case"auth/wrong-password":return"    .";case"auth/user-not-found":return"      .";case"auth/too-many-requests":return"  .     .";case"auth/popup-blocked":case"auth/popup-closed-by-user":return"  .      .";case"auth/account-exists-with-different-credential":return"       . Google  .";default:return N}},y=async()=>{d(""),m(""),l(!0);try{const C=new Pn;await Jk(Mn,C),location.hash="feed"}catch(C){d(g(C?.code,"Google  .")),console.error(C)}finally{l(!1)}},_=async C=>{C.preventDefault(),d(""),m(""),l(!0);try{await Nk(Mn,t.trim(),n.trim()),location.hash="feed"}catch(N){d(g(N?.code)),console.error(N)}finally{l(!1)}},S=async()=>{d(""),m("");const C=t.trim();if(!C){d("      .");return}try{await Pk(Mn,C),m("   .   .")}catch(N){d(g(N?.code,"   .")),console.error(N)}};return w.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white px-4",children:w.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-2xl shadow-md border",children:[w.jsx("h1",{className:"text-2xl font-bold text-center mb-6 text-gray-800",children:""}),w.jsx("button",{type:"button",onClick:y,disabled:o,className:`w-full py-3 rounded-lg font-semibold text-white mb-4
                     bg-gradient-to-r from-[#8877E6] via-[#788AE6] to-[#77ACE6] shadow-md disabled:opacity-60`,children:o?" ":"Google "}),w.jsxs("div",{className:"relative my-5",children:[w.jsx("div",{className:"border-t"}),w.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 -top-3 bg-white px-2 text-xs text-gray-400",children:"  "})]}),w.jsxs("form",{onSubmit:_,className:"space-y-3",children:[w.jsx("input",{type:"email",placeholder:"",value:t,onChange:C=>e(C.target.value),className:"w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#788AE6]"}),w.jsx("input",{type:"password",placeholder:"",value:n,onChange:C=>i(C.target.value),className:"w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#788AE6]"}),u&&w.jsx("p",{className:"text-sm text-red-500",children:u}),f&&w.jsx("p",{className:"text-sm text-green-600",children:f}),w.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 rounded-lg font-semibold text-white bg-gray-900 hover:bg-black transition disabled:opacity-60",children:" "})]}),w.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[w.jsx("button",{onClick:S,className:"text-gray-600 hover:text-gray-900 underline underline-offset-2",children:" "}),w.jsx("a",{href:"#signup",className:"text-[#788AE6] font-semibold hover:underline",children:""})]})]})})}function PA(){const[t,e]=D.useState(""),[n,i]=D.useState(""),[o,l]=D.useState(""),u=()=>{if(n!==o)return alert("  .");alert("  .    .")};return w.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:w.jsxs("div",{className:"w-full max-w-md bg-white p-6 rounded-2xl shadow-sm border",children:[w.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:""}),w.jsx("input",{className:"w-full p-3 border rounded-lg mb-3",placeholder:"",value:t,onChange:d=>e(d.target.value)}),w.jsx("input",{className:"w-full p-3 border rounded-lg mb-3",placeholder:"",type:"password",value:n,onChange:d=>i(d.target.value)}),w.jsx("input",{className:"w-full p-3 border rounded-lg mb-3",placeholder:" ",type:"password",value:o,onChange:d=>l(d.target.value)}),w.jsx("button",{onClick:u,className:"w-full bg-indigo-600 text-white p-3 rounded-lg hover:bg-indigo-700 transition",children:""})]})})}function dE({shape:t,color:e,size:n=120,className:i}){const o=n,l="#00000010";if(t==="square")return w.jsx("svg",{width:o,height:o,viewBox:`0 0 ${o} ${o}`,className:i,role:"img","aria-label":" ",children:w.jsx("rect",{x:"8",y:"8",width:o-16,height:o-16,rx:"16",fill:e,stroke:l})});if(t==="circle")return w.jsx("svg",{width:o,height:o,viewBox:`0 0 ${o} ${o}`,className:i,role:"img","aria-label":" ",children:w.jsx("circle",{cx:o/2,cy:o/2,r:o/2-12,fill:e,stroke:l})});if(t==="triangle"){const d=`${o/2},10 ${o-10},${o-10} 10,${o-10}`;return w.jsx("svg",{width:o,height:o,viewBox:`0 0 ${o} ${o}`,className:i,role:"img","aria-label":" ",children:w.jsx("polygon",{points:d,fill:e,stroke:l})})}return w.jsx("svg",{width:o,height:o,viewBox:`0 0 ${o} ${o}`,className:i,role:"img","aria-label":" ",children:w.jsx("path",{d:`
          M 0 ${o*.55}
          C ${o*.15} ${o*.35}, ${o*.35} ${o*.75}, ${o*.5} ${o*.55}
          C ${o*.65} ${o*.35}, ${o*.85} ${o*.75}, ${o} ${o*.55}
          L ${o} ${o} L 0 ${o} Z
        `,fill:e,stroke:l})})}function hE(t){const e=(t||"").toLowerCase().trim();return["square","rect","box"].includes(e)?"square":["circle","round","dot"].includes(e)?"circle":["triangle","tri"].includes(e)?"triangle":["wave","wavy","waveform","sine"].includes(e)?"wave":"square"}const NA="https://silk-ai-api-842161501725.asia-northeast3.run.app",Vv=String(NA).replace(/\/+$/,"");async function RA(t){if(!Vv)return{label:parseInt((t.color||"#888888").replace("#",""),16)>8947848?"":"",score:.6};const e=await fetch(`${Vv}/predict`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({color_hex:t.color,shape:t.shape,sound:t.sound})}),n=await e.json().catch(()=>{throw new Error("AI   ")});if(!e.ok||n?.error)throw new Error(n?.error||`AI HTTP ${e.status}`);const i=n.label||n.prediction,o=typeof n.score=="number"?n.score:n.confidence;if(!i||typeof o!="number")throw new Error("AI   ");return{label:i,score:o}}function AA(){const[t,e]=D.useState(null),[n,i]=D.useState([]),[o,l]=D.useState(!0),[u,d]=D.useState("");D.useEffect(()=>{const S=jo(Mn,C=>{C||(location.hash="login"),e(C?C.uid:null)});return()=>S()},[]),D.useEffect(()=>{if(!t)return;const S=aE(Yr(Qr,"emotions"),sE("userId"),oE(t),iE(100)),C=Uf(S,N=>{const A=[];N.forEach(B=>{A.push(B.val())});const U=A.filter(B=>typeof B?.timestamp=="number").map(B=>({id:B.id,userId:B.userId??"anonymous",color:B.color??"#eee",shape:B.shape??"-",sound:B.sound??"-",label:B.label,score:B.score,timestamp:B.timestamp,likes:B.likes??0,lat:B.lat,lng:B.lng})).sort((B,b)=>b.timestamp-B.timestamp);i(U),l(!1)},N=>{d(N?.message||"  ."),l(!1)});return()=>C()},[t]);const f=D.useMemo(()=>{const S={};for(const C of n){const N=new Date(C.timestamp),A=`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}-${String(N.getDate()).padStart(2,"0")}`;(S[A]||=[]).push(C)}return S},[n]),[m,g]=D.useState(null),y=async S=>{if(!m)try{g(S.id);const C=await RA({color:S.color,shape:S.shape,sound:S.sound});await rE(Yr(Qr,`emotions/${S.id}`),{label:C.label,score:C.score})}catch(C){alert(C?.message||"AI  ")}finally{g(null)}};if(o)return w.jsx("div",{className:"grid place-items-center h-[60vh] text-gray-500",children:" "});if(u)return w.jsx("div",{className:"grid place-items-center h-[60vh] text-red-500",children:u});const _=Object.keys(f).sort((S,C)=>C.localeCompare(S));return w.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[w.jsxs("h2",{className:"text-xl font-bold mb-4",children:[w.jsx("span",{className:"bg-gradient-to-r from-[#8877E6] via-[#788AE6] to-[#77ACE6] bg-clip-text text-transparent",children:"SILK"})," "," "]}),_.length===0&&w.jsx("p",{className:"text-sm text-gray-500",children:"  .    ."}),w.jsx("div",{className:"flex flex-col gap-6",children:_.map(S=>w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:S}),w.jsx("div",{className:"flex flex-col gap-3",children:f[S].map(C=>{const N=hE(C.shape),A=C.color??"#8877E6",U=typeof C.score=="number"?`(${Math.round(C.score*100)}%)`:"";return w.jsx("article",{className:"rounded-2xl bg-white border shadow p-3",children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(dE,{shape:N,color:A,size:48}),w.jsxs("div",{className:"flex-1",children:[w.jsx("div",{className:"text-sm text-gray-800",children:C.label?w.jsxs(w.Fragment,{children:["AI: ",w.jsx("b",{children:C.label})," ",U]}):w.jsx("span",{className:"text-gray-500",children:"AI  "})}),w.jsxs("div",{className:"text-xs text-gray-500",children:[N,"  ",C.sound]})]}),w.jsx("button",{onClick:()=>y(C),disabled:m===C.id,className:"px-3 py-1.5 rounded-lg text-white bg-gradient-to-r from-[#8877E6] via-[#788AE6] to-[#77ACE6] disabled:opacity-60",children:m===C.id?" ":" "})]})},C.id)})})]},S))})]})}function bA(){const[t,e]=D.useState(null),[n,i]=D.useState([]),[o,l]=D.useState(!0),[u,d]=D.useState("");D.useEffect(()=>{const g=jo(Mn,y=>{y||(location.hash="login"),e(y?y.uid:null)});return()=>g()},[]),D.useEffect(()=>{if(!t)return;const g=aE(Yr(Qr,"emotions"),sE("userId"),oE(t),iE(100)),y=Uf(g,_=>{const S=[];_.forEach(N=>S.push(N.val()));const C=S.filter(N=>typeof N?.timestamp=="number").map(N=>({id:N.id,userId:N.userId??"anonymous",color:N.color??"#8877E6",shape:N.shape??"square",sound:N.sound??"-",label:N.label,score:N.score,timestamp:N.timestamp,likes:N.likes??0,lat:N.lat,lng:N.lng})).sort((N,A)=>A.timestamp-N.timestamp);i(C),l(!1)},_=>{d(_?.message||"  ."),l(!1)});return()=>y()},[t]);const f=D.useMemo(()=>{const g={};for(const y of n){const _=new Date(y.timestamp),S=`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}-${String(_.getDate()).padStart(2,"0")}`;(g[S]||=[]).push(y)}return g},[n]);if(o)return w.jsx("div",{className:"text-gray-500",children:" "});if(u)return w.jsx("div",{className:"text-red-500",children:u});const m=Object.keys(f).sort((g,y)=>y.localeCompare(g));return w.jsxs("div",{className:"flex flex-col gap-6",children:[m.length===0&&w.jsx("p",{className:"text-sm text-gray-500",children:"  .    ."}),m.map(g=>w.jsxs("section",{className:"rounded-2xl bg-white/60 p-3",children:[w.jsxs("header",{className:"flex items-center justify-between mb-2",children:[w.jsx("h3",{className:"text-base font-semibold text-gray-800",children:g}),w.jsxs("span",{className:"text-xs text-gray-500",children:[f[g].length," "]})]}),w.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:f[g].map(y=>{const _=hE(y.shape),S=y.color??"#8877E6",C=typeof y.score=="number"?`(${Math.round(y.score*100)}%)`:"";return w.jsxs("div",{className:"shrink-0",children:[w.jsx(dE,{shape:_,color:S,size:64}),w.jsxs("div",{className:"mt-1 text-[11px] text-gray-600 text-center whitespace-nowrap",children:[" : ",w.jsx("b",{children:y.label??" "}),y.label?` ${C}`:""]})]},y.id)})})]},g))]})}function DA(){const t=()=>{location.hash="#write"};return w.jsxs("div",{className:"max-w-3xl mx-auto px-4 pt-20 pb-12",children:[w.jsxs("header",{className:"mb-6 flex items-center justify-between",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-2xl font-bold",children:""}),w.jsx("p",{className:"text-sm text-gray-500",children:"  AI  ."})]}),w.jsxs("button",{onClick:t,className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white
                     bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 transition-colors`,"aria-label":"  ",children:[w.jsx("span",{children:"  "}),w.jsx("span",{"aria-hidden":!0,children:""})]})]}),w.jsxs("section",{className:"mt-8",children:[w.jsx("h2",{className:"mb-3 text-xl font-bold",children:""}),w.jsx(bA,{})]})]})}function MA({mode:t="auto",nextHash:e="#feed",onDone:n}){const[i,o]=D.useState(!1),[l,u]=D.useState(!1);return D.useEffect(()=>{if(window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches){if(o(!0),t==="auto"){const f=setTimeout(()=>{o(!1),n?.(),e&&(location.hash=e)},1200);return()=>clearTimeout(f)}return}if(o(!0),t==="auto"){const f=setTimeout(()=>u(!0),1400),m=setTimeout(()=>{o(!1),n?.(),e&&(location.hash=e)},1800);return()=>{clearTimeout(f),clearTimeout(m)}}},[t,e,n]),!i&&t==="auto"?null:w.jsx("div",{className:`fixed inset-0 z-[9999] grid place-items-center bg-white
                  ${t==="auto"&&l?"intro-fade-out":""}`,"aria-label":"Intro overlay",role:"dialog",children:w.jsxs("div",{className:"w-[380px] sm:w-[460px] relative select-none",children:[w.jsxs("svg",{viewBox:"0 0 358 504",className:"w-[160px] mx-auto intro-stretch","aria-label":"SILK logo",children:[w.jsx("defs",{children:w.jsxs("linearGradient",{id:"silkGrad",x1:"0",y1:"0",x2:"1",y2:"1",children:[w.jsx("stop",{offset:"0%",stopColor:"#8877E6"}),w.jsx("stop",{offset:"50%",stopColor:"#788AE6"}),w.jsx("stop",{offset:"100%",stopColor:"#77ACE6"})]})}),w.jsx("path",{d:"M296 28c-34-19-75-31-118-15-33 12-114 58-174 111-27 24-62 56 18 75 72 17 187 31 14 127-191 106-52 184 152 264 43 16 122 0 108-36-14-36-238-111-161-195 50-54 118-92 143-108 11-7 29-12 29-20 1-20-62-41-102-63-108-58 57-95 134-140 26-15 31-25 3-40z",fill:"url(#silkGrad)"})]}),w.jsx("div",{className:`mt-6 text-center text-4xl sm:text-5xl font-extrabold
                        bg-gradient-to-r from-[#8877E6] via-[#788AE6] to-[#77ACE6]
                        bg-clip-text text-transparent tracking-tight intro-word-reveal`,children:"SILK"}),w.jsx("div",{className:"mt-2 text-center text-sm text-white/60 intro-sub-reveal",children:"sense  image  line  kinesthetics"})]})})}const fE=D.createContext({});function OA(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const Bf=typeof window<"u",LA=Bf?D.useLayoutEffect:D.useEffect,Wf=D.createContext(null);function zf(t,e){t.indexOf(e)===-1&&t.push(e)}function $f(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const jn=(t,e,n)=>n>e?e:n<t?t:n;let Hf=()=>{};const Vn={},pE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function mE(t){return typeof t=="object"&&t!==null}const gE=t=>/^0[^.\s]+$/u.test(t);function Kf(t){let e;return()=>(e===void 0&&(e=t()),e)}const Gt=t=>t,FA=(t,e)=>n=>e(t(n)),Ko=(...t)=>t.reduce(FA),Po=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class Gf{constructor(){this.subscriptions=[]}add(e){return zf(this.subscriptions,e),()=>$f(this.subscriptions,e)}notify(e,n,i){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,i);else for(let l=0;l<o;l++){const u=this.subscriptions[l];u&&u(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yn=t=>t*1e3,Kt=t=>t/1e3;function yE(t,e){return e?t*(1e3/e):0}const vE=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,jA=1e-7,VA=12;function UA(t,e,n,i,o){let l,u,d=0;do u=e+(n-e)/2,l=vE(u,i,o)-t,l>0?n=u:e=u;while(Math.abs(l)>jA&&++d<VA);return u}function Go(t,e,n,i){if(t===e&&n===i)return Gt;const o=l=>UA(l,0,1,t,n);return l=>l===0||l===1?l:vE(o(l),e,i)}const _E=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,wE=t=>e=>1-t(1-e),EE=Go(.33,1.53,.69,.99),qf=wE(EE),SE=_E(qf),xE=t=>(t*=2)<1?.5*qf(t):.5*(2-Math.pow(2,-10*(t-1))),Yf=t=>1-Math.sin(Math.acos(t)),CE=wE(Yf),TE=_E(Yf),BA=Go(.42,0,1,1),WA=Go(0,0,.58,1),IE=Go(.42,0,.58,1),zA=t=>Array.isArray(t)&&typeof t[0]!="number",kE=t=>Array.isArray(t)&&typeof t[0]=="number",$A={linear:Gt,easeIn:BA,easeInOut:IE,easeOut:WA,circIn:Yf,circInOut:TE,circOut:CE,backIn:qf,backInOut:SE,backOut:EE,anticipate:xE},HA=t=>typeof t=="string",Uv=t=>{if(kE(t)){Hf(t.length===4);const[e,n,i,o]=t;return Go(e,n,i,o)}else if(HA(t))return $A[t];return t},cl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function KA(t,e){let n=new Set,i=new Set,o=!1,l=!1;const u=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function f(g){u.has(g)&&(m.schedule(g),t()),g(d)}const m={schedule:(g,y=!1,_=!1)=>{const C=_&&o?n:i;return y&&u.add(g),C.has(g)||C.add(g),g},cancel:g=>{i.delete(g),u.delete(g)},process:g=>{if(d=g,o){l=!0;return}o=!0,[n,i]=[i,n],n.forEach(f),n.clear(),o=!1,l&&(l=!1,m.process(g))}};return m}const GA=40;function PE(t,e){let n=!1,i=!0;const o={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,u=cl.reduce((b,O)=>(b[O]=KA(l),b),{}),{setup:d,read:f,resolveKeyframes:m,preUpdate:g,update:y,preRender:_,render:S,postRender:C}=u,N=()=>{const b=Vn.useManualTiming?o.timestamp:performance.now();n=!1,Vn.useManualTiming||(o.delta=i?1e3/60:Math.max(Math.min(b-o.timestamp,GA),1)),o.timestamp=b,o.isProcessing=!0,d.process(o),f.process(o),m.process(o),g.process(o),y.process(o),_.process(o),S.process(o),C.process(o),o.isProcessing=!1,n&&e&&(i=!1,t(N))},A=()=>{n=!0,i=!0,o.isProcessing||t(N)};return{schedule:cl.reduce((b,O)=>{const H=u[O];return b[O]=(j,J=!1,$=!1)=>(n||A(),H.schedule(j,J,$)),b},{}),cancel:b=>{for(let O=0;O<cl.length;O++)u[cl[O]].cancel(b)},state:o,steps:u}}const{schedule:Le,cancel:wr,state:lt,steps:Rd}=PE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gt,!0);let vl;function qA(){vl=void 0}const At={now:()=>(vl===void 0&&At.set(lt.isProcessing||Vn.useManualTiming?lt.timestamp:performance.now()),vl),set:t=>{vl=t,queueMicrotask(qA)}},NE=t=>e=>typeof e=="string"&&e.startsWith(t),Qf=NE("--"),YA=NE("var(--"),Xf=t=>YA(t)?QA.test(t.split("/*")[0].trim()):!1,QA=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ls={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},No={...ls,transform:t=>jn(0,1,t)},dl={...ls,default:1},ho=t=>Math.round(t*1e5)/1e5,Jf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function XA(t){return t==null}const JA=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zf=(t,e)=>n=>!!(typeof n=="string"&&JA.test(n)&&n.startsWith(t)||e&&!XA(n)&&Object.prototype.hasOwnProperty.call(n,e)),RE=(t,e,n)=>i=>{if(typeof i!="string")return i;const[o,l,u,d]=i.match(Jf);return{[t]:parseFloat(o),[e]:parseFloat(l),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},ZA=t=>jn(0,255,t),Ad={...ls,transform:t=>Math.round(ZA(t))},Kr={test:Zf("rgb","red"),parse:RE("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Ad.transform(t)+", "+Ad.transform(e)+", "+Ad.transform(n)+", "+ho(No.transform(i))+")"};function eb(t){let e="",n="",i="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,i+=i,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:o?parseInt(o,16)/255:1}}const gh={test:Zf("#"),parse:eb,transform:Kr.transform},qo=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ar=qo("deg"),vn=qo("%"),ie=qo("px"),tb=qo("vh"),nb=qo("vw"),Bv={...vn,parse:t=>vn.parse(t)/100,transform:t=>vn.transform(t*100)},Oi={test:Zf("hsl","hue"),parse:RE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+vn.transform(ho(e))+", "+vn.transform(ho(n))+", "+ho(No.transform(i))+")"},Ye={test:t=>Kr.test(t)||gh.test(t)||Oi.test(t),parse:t=>Kr.test(t)?Kr.parse(t):Oi.test(t)?Oi.parse(t):gh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Kr.transform(t):Oi.transform(t),getAnimatableNone:t=>{const e=Ye.parse(t);return e.alpha=0,Ye.transform(e)}},rb=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ib(t){return isNaN(t)&&typeof t=="string"&&(t.match(Jf)?.length||0)+(t.match(rb)?.length||0)>0}const AE="number",bE="color",sb="var",ob="var(",Wv="${}",ab=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ro(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},o=[];let l=0;const d=e.replace(ab,f=>(Ye.test(f)?(i.color.push(l),o.push(bE),n.push(Ye.parse(f))):f.startsWith(ob)?(i.var.push(l),o.push(sb),n.push(f)):(i.number.push(l),o.push(AE),n.push(parseFloat(f))),++l,Wv)).split(Wv);return{values:n,split:d,indexes:i,types:o}}function DE(t){return Ro(t).values}function ME(t){const{split:e,types:n}=Ro(t),i=e.length;return o=>{let l="";for(let u=0;u<i;u++)if(l+=e[u],o[u]!==void 0){const d=n[u];d===AE?l+=ho(o[u]):d===bE?l+=Ye.transform(o[u]):l+=o[u]}return l}}const lb=t=>typeof t=="number"?0:Ye.test(t)?Ye.getAnimatableNone(t):t;function ub(t){const e=DE(t);return ME(t)(e.map(lb))}const Er={test:ib,parse:DE,createTransformer:ME,getAnimatableNone:ub};function bd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function cb({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let o=0,l=0,u=0;if(!e)o=l=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,f=2*n-d;o=bd(f,d,t+1/3),l=bd(f,d,t),u=bd(f,d,t-1/3)}return{red:Math.round(o*255),green:Math.round(l*255),blue:Math.round(u*255),alpha:i}}function Hl(t,e){return n=>n>0?e:t}const Ue=(t,e,n)=>t+(e-t)*n,Dd=(t,e,n)=>{const i=t*t,o=n*(e*e-i)+i;return o<0?0:Math.sqrt(o)},db=[gh,Kr,Oi],hb=t=>db.find(e=>e.test(t));function zv(t){const e=hb(t);if(!e)return!1;let n=e.parse(t);return e===Oi&&(n=cb(n)),n}const $v=(t,e)=>{const n=zv(t),i=zv(e);if(!n||!i)return Hl(t,e);const o={...n};return l=>(o.red=Dd(n.red,i.red,l),o.green=Dd(n.green,i.green,l),o.blue=Dd(n.blue,i.blue,l),o.alpha=Ue(n.alpha,i.alpha,l),Kr.transform(o))},yh=new Set(["none","hidden"]);function fb(t,e){return yh.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function pb(t,e){return n=>Ue(t,e,n)}function ep(t){return typeof t=="number"?pb:typeof t=="string"?Xf(t)?Hl:Ye.test(t)?$v:yb:Array.isArray(t)?OE:typeof t=="object"?Ye.test(t)?$v:mb:Hl}function OE(t,e){const n=[...t],i=n.length,o=t.map((l,u)=>ep(l)(l,e[u]));return l=>{for(let u=0;u<i;u++)n[u]=o[u](l);return n}}function mb(t,e){const n={...t,...e},i={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(i[o]=ep(t[o])(t[o],e[o]));return o=>{for(const l in i)n[l]=i[l](o);return n}}function gb(t,e){const n=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const l=e.types[o],u=t.indexes[l][i[l]],d=t.values[u]??0;n[o]=d,i[l]++}return n}const yb=(t,e)=>{const n=Er.createTransformer(e),i=Ro(t),o=Ro(e);return i.indexes.var.length===o.indexes.var.length&&i.indexes.color.length===o.indexes.color.length&&i.indexes.number.length>=o.indexes.number.length?yh.has(t)&&!o.values.length||yh.has(e)&&!i.values.length?fb(t,e):Ko(OE(gb(i,o),o.values),n):Hl(t,e)};function LE(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ue(t,e,n):ep(t)(t,e)}const vb=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Le.update(e,n),stop:()=>wr(e),now:()=>lt.isProcessing?lt.timestamp:At.now()}},FE=(t,e,n=10)=>{let i="";const o=Math.max(Math.round(e/n),2);for(let l=0;l<o;l++)i+=Math.round(t(l/(o-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Kl=2e4;function tp(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Kl;)e+=n,i=t.next(e);return e>=Kl?1/0:e}function _b(t,e=100,n){const i=n({...t,keyframes:[0,e]}),o=Math.min(tp(i),Kl);return{type:"keyframes",ease:l=>i.next(o*l).value/e,duration:Kt(o)}}const wb=5;function jE(t,e,n){const i=Math.max(e-wb,0);return yE(n-t(i),e-i)}const ze={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Md=.001;function Eb({duration:t=ze.duration,bounce:e=ze.bounce,velocity:n=ze.velocity,mass:i=ze.mass}){let o,l,u=1-e;u=jn(ze.minDamping,ze.maxDamping,u),t=jn(ze.minDuration,ze.maxDuration,Kt(t)),u<1?(o=m=>{const g=m*u,y=g*t,_=g-n,S=vh(m,u),C=Math.exp(-y);return Md-_/S*C},l=m=>{const y=m*u*t,_=y*n+n,S=Math.pow(u,2)*Math.pow(m,2)*t,C=Math.exp(-y),N=vh(Math.pow(m,2),u);return(-o(m)+Md>0?-1:1)*((_-S)*C)/N}):(o=m=>{const g=Math.exp(-m*t),y=(m-n)*t+1;return-Md+g*y},l=m=>{const g=Math.exp(-m*t),y=(n-m)*(t*t);return g*y});const d=5/t,f=xb(o,l,d);if(t=yn(t),isNaN(f))return{stiffness:ze.stiffness,damping:ze.damping,duration:t};{const m=Math.pow(f,2)*i;return{stiffness:m,damping:u*2*Math.sqrt(i*m),duration:t}}}const Sb=12;function xb(t,e,n){let i=n;for(let o=1;o<Sb;o++)i=i-t(i)/e(i);return i}function vh(t,e){return t*Math.sqrt(1-e*e)}const Cb=["duration","bounce"],Tb=["stiffness","damping","mass"];function Hv(t,e){return e.some(n=>t[n]!==void 0)}function Ib(t){let e={velocity:ze.velocity,stiffness:ze.stiffness,damping:ze.damping,mass:ze.mass,isResolvedFromDuration:!1,...t};if(!Hv(t,Tb)&&Hv(t,Cb))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),o=i*i,l=2*jn(.05,1,1-(t.bounce||0))*Math.sqrt(o);e={...e,mass:ze.mass,stiffness:o,damping:l}}else{const n=Eb(t);e={...e,...n,mass:ze.mass},e.isResolvedFromDuration=!0}return e}function Gl(t=ze.visualDuration,e=ze.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:o}=n;const l=n.keyframes[0],u=n.keyframes[n.keyframes.length-1],d={done:!1,value:l},{stiffness:f,damping:m,mass:g,duration:y,velocity:_,isResolvedFromDuration:S}=Ib({...n,velocity:-Kt(n.velocity||0)}),C=_||0,N=m/(2*Math.sqrt(f*g)),A=u-l,U=Kt(Math.sqrt(f/g)),B=Math.abs(A)<5;i||(i=B?ze.restSpeed.granular:ze.restSpeed.default),o||(o=B?ze.restDelta.granular:ze.restDelta.default);let b;if(N<1){const H=vh(U,N);b=j=>{const J=Math.exp(-N*U*j);return u-J*((C+N*U*A)/H*Math.sin(H*j)+A*Math.cos(H*j))}}else if(N===1)b=H=>u-Math.exp(-U*H)*(A+(C+U*A)*H);else{const H=U*Math.sqrt(N*N-1);b=j=>{const J=Math.exp(-N*U*j),$=Math.min(H*j,300);return u-J*((C+N*U*A)*Math.sinh($)+H*A*Math.cosh($))/H}}const O={calculatedDuration:S&&y||null,next:H=>{const j=b(H);if(S)d.done=H>=y;else{let J=H===0?C:0;N<1&&(J=H===0?yn(C):jE(b,H,j));const $=Math.abs(J)<=i,ge=Math.abs(u-j)<=o;d.done=$&&ge}return d.value=d.done?u:j,d},toString:()=>{const H=Math.min(tp(O),Kl),j=FE(J=>O.next(H*J).value,H,30);return H+"ms "+j},toTransition:()=>{}};return O}Gl.applyToOptions=t=>{const e=_b(t,100,Gl);return t.ease=e.ease,t.duration=yn(e.duration),t.type="keyframes",t};function _h({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:o=10,bounceStiffness:l=500,modifyTarget:u,min:d,max:f,restDelta:m=.5,restSpeed:g}){const y=t[0],_={done:!1,value:y},S=$=>d!==void 0&&$<d||f!==void 0&&$>f,C=$=>d===void 0?f:f===void 0||Math.abs(d-$)<Math.abs(f-$)?d:f;let N=n*e;const A=y+N,U=u===void 0?A:u(A);U!==A&&(N=U-y);const B=$=>-N*Math.exp(-$/i),b=$=>U+B($),O=$=>{const ge=B($),Ie=b($);_.done=Math.abs(ge)<=m,_.value=_.done?U:Ie};let H,j;const J=$=>{S(_.value)&&(H=$,j=Gl({keyframes:[_.value,C(_.value)],velocity:jE(b,$,_.value),damping:o,stiffness:l,restDelta:m,restSpeed:g}))};return J(0),{calculatedDuration:null,next:$=>{let ge=!1;return!j&&H===void 0&&(ge=!0,O($),J($)),H!==void 0&&$>=H?j.next($-H):(!ge&&O($),_)}}}function kb(t,e,n){const i=[],o=n||Vn.mix||LE,l=t.length-1;for(let u=0;u<l;u++){let d=o(t[u],t[u+1]);if(e){const f=Array.isArray(e)?e[u]||Gt:e;d=Ko(f,d)}i.push(d)}return i}function Pb(t,e,{clamp:n=!0,ease:i,mixer:o}={}){const l=t.length;if(Hf(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const u=t[0]===t[1];t[0]>t[l-1]&&(t=[...t].reverse(),e=[...e].reverse());const d=kb(e,i,o),f=d.length,m=g=>{if(u&&g<t[0])return e[0];let y=0;if(f>1)for(;y<t.length-2&&!(g<t[y+1]);y++);const _=Po(t[y],t[y+1],g);return d[y](_)};return n?g=>m(jn(t[0],t[l-1],g)):m}function Nb(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const o=Po(0,e,i);t.push(Ue(n,1,o))}}function Rb(t){const e=[0];return Nb(e,t.length-1),e}function Ab(t,e){return t.map(n=>n*e)}function bb(t,e){return t.map(()=>e||IE).splice(0,t.length-1)}function fo({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const o=zA(i)?i.map(Uv):Uv(i),l={done:!1,value:e[0]},u=Ab(n&&n.length===e.length?n:Rb(e),t),d=Pb(u,e,{ease:Array.isArray(o)?o:bb(e,o)});return{calculatedDuration:t,next:f=>(l.value=d(f),l.done=f>=t,l)}}const Db=t=>t!==null;function np(t,{repeat:e,repeatType:n="loop"},i,o=1){const l=t.filter(Db),d=o<0||e&&n!=="loop"&&e%2===1?0:l.length-1;return!d||i===void 0?l[d]:i}const Mb={decay:_h,inertia:_h,tween:fo,keyframes:fo,spring:Gl};function VE(t){typeof t.type=="string"&&(t.type=Mb[t.type])}class rp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Ob=t=>t/100;class ip extends rp{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==At.now()&&this.tick(At.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;VE(e);const{type:n=fo,repeat:i=0,repeatDelay:o=0,repeatType:l,velocity:u=0}=e;let{keyframes:d}=e;const f=n||fo;f!==fo&&typeof d[0]!="number"&&(this.mixKeyframes=Ko(Ob,LE(d[0],d[1])),d=[0,100]);const m=f({...e,keyframes:d});l==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...d].reverse(),velocity:-u})),m.calculatedDuration===null&&(m.calculatedDuration=tp(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+o,this.totalDuration=this.resolvedDuration*(i+1)-o,this.generator=m}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:o,mixKeyframes:l,mirroredGenerator:u,resolvedDuration:d,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:m=0,keyframes:g,repeat:y,repeatType:_,repeatDelay:S,type:C,onUpdate:N,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-o/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const U=this.currentTime-m*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?U<0:U>o;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let b=this.currentTime,O=i;if(y){const $=Math.min(this.currentTime,o)/d;let ge=Math.floor($),Ie=$%1;!Ie&&$>=1&&(Ie=1),Ie===1&&ge--,ge=Math.min(ge,y+1),!!(ge%2)&&(_==="reverse"?(Ie=1-Ie,S&&(Ie-=S/d)):_==="mirror"&&(O=u)),b=jn(0,1,Ie)*d}const H=B?{done:!1,value:g[0]}:O.next(b);l&&(H.value=l(H.value));let{done:j}=H;!B&&f!==null&&(j=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const J=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return J&&C!==_h&&(H.value=np(g,this.options,A,this.speed)),N&&N(H.value),J&&this.finish(),H}then(e,n){return this.finished.then(e,n)}get duration(){return Kt(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Kt(e)}get time(){return Kt(this.currentTime)}set time(e){e=yn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(At.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Kt(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=vb,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(At.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Lb(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Gr=t=>t*180/Math.PI,wh=t=>{const e=Gr(Math.atan2(t[1],t[0]));return Eh(e)},Fb={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:wh,rotateZ:wh,skewX:t=>Gr(Math.atan(t[1])),skewY:t=>Gr(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Eh=t=>(t=t%360,t<0&&(t+=360),t),Kv=wh,Gv=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),qv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),jb={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Gv,scaleY:qv,scale:t=>(Gv(t)+qv(t))/2,rotateX:t=>Eh(Gr(Math.atan2(t[6],t[5]))),rotateY:t=>Eh(Gr(Math.atan2(-t[2],t[0]))),rotateZ:Kv,rotate:Kv,skewX:t=>Gr(Math.atan(t[4])),skewY:t=>Gr(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Sh(t){return t.includes("scale")?1:0}function xh(t,e){if(!t||t==="none")return Sh(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,o;if(n)i=jb,o=n;else{const d=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Fb,o=d}if(!o)return Sh(e);const l=i[e],u=o[1].split(",").map(Ub);return typeof l=="function"?l(u):u[l]}const Vb=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return xh(n,e)};function Ub(t){return parseFloat(t.trim())}const us=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cs=new Set(us),Yv=t=>t===ls||t===ie,Bb=new Set(["x","y","z"]),Wb=us.filter(t=>!Bb.has(t));function zb(t){const e=[];return Wb.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Xr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>xh(e,"x"),y:(t,{transform:e})=>xh(e,"y")};Xr.translateX=Xr.x;Xr.translateY=Xr.y;const Jr=new Set;let Ch=!1,Th=!1,Ih=!1;function UE(){if(Th){const t=Array.from(Jr).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const o=zb(i);o.length&&(n.set(i,o),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const o=n.get(i);o&&o.forEach(([l,u])=>{i.getValue(l)?.set(u)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Th=!1,Ch=!1,Jr.forEach(t=>t.complete(Ih)),Jr.clear()}function BE(){Jr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Th=!0)})}function $b(){Ih=!0,BE(),UE(),Ih=!1}class sp{constructor(e,n,i,o,l,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=o,this.element=l,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Jr.add(this),Ch||(Ch=!0,Le.read(BE),Le.resolveKeyframes(UE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:o}=this;if(e[0]===null){const l=o?.get(),u=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const d=i.readValue(n,u);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=u),o&&l===void 0&&o.set(e[0])}Lb(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Jr.delete(this)}cancel(){this.state==="scheduled"&&(Jr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Hb=t=>t.startsWith("--");function Kb(t,e,n){Hb(e)?t.style.setProperty(e,n):t.style[e]=n}const Gb=Kf(()=>window.ScrollTimeline!==void 0),qb={};function Yb(t,e){const n=Kf(t);return()=>qb[e]??n()}const WE=Yb(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),io=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Qv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:io([0,.65,.55,1]),circOut:io([.55,0,1,.45]),backIn:io([.31,.01,.66,-.59]),backOut:io([.33,1.53,.69,.99])};function zE(t,e){if(t)return typeof t=="function"?WE()?FE(t,e):"ease-out":kE(t)?io(t):Array.isArray(t)?t.map(n=>zE(n,e)||Qv.easeOut):Qv[t]}function Qb(t,e,n,{delay:i=0,duration:o=300,repeat:l=0,repeatType:u="loop",ease:d="easeOut",times:f}={},m=void 0){const g={[e]:n};f&&(g.offset=f);const y=zE(d,o);Array.isArray(y)&&(g.easing=y);const _={delay:i,duration:o,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:u==="reverse"?"alternate":"normal"};return m&&(_.pseudoElement=m),t.animate(g,_)}function $E(t){return typeof t=="function"&&"applyToOptions"in t}function Xb({type:t,...e}){return $E(t)&&WE()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Jb extends rp{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:o,pseudoElement:l,allowFlatten:u=!1,finalKeyframe:d,onComplete:f}=e;this.isPseudoElement=!!l,this.allowFlatten=u,this.options=e,Hf(typeof e.type!="string");const m=Xb(e);this.animation=Qb(n,i,o,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=np(o,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(g):Kb(n,i,g),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Kt(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Kt(e)}get time(){return Kt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=yn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&Gb()?(this.animation.timeline=e,Gt):n(this)}}const HE={anticipate:xE,backInOut:SE,circInOut:TE};function Zb(t){return t in HE}function eD(t){typeof t.ease=="string"&&Zb(t.ease)&&(t.ease=HE[t.ease])}const Xv=10;class tD extends Jb{constructor(e){eD(e),VE(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:o,element:l,...u}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const d=new ip({...u,autoplay:!1}),f=yn(this.finishedTime??this.time);n.setWithVelocity(d.sample(f-Xv).value,d.sample(f).value,Xv),d.stop()}}const Jv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Er.test(t)||t==="0")&&!t.startsWith("url("));function nD(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function rD(t,e,n,i){const o=t[0];if(o===null)return!1;if(e==="display"||e==="visibility")return!0;const l=t[t.length-1],u=Jv(o,e),d=Jv(l,e);return!u||!d?!1:nD(t)||(n==="spring"||$E(n))&&i}function kh(t){t.duration=0,t.type="keyframes"}const iD=new Set(["opacity","clipPath","filter","transform"]),sD=Kf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function oD(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:o,damping:l,type:u}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:m}=e.owner.getProps();return sD()&&n&&iD.has(n)&&(n!=="transform"||!m)&&!f&&!i&&o!=="mirror"&&l!==0&&u!=="inertia"}const aD=40;class lD extends rp{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:o=0,repeatDelay:l=0,repeatType:u="loop",keyframes:d,name:f,motionValue:m,element:g,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=At.now();const _={autoplay:e,delay:n,type:i,repeat:o,repeatDelay:l,repeatType:u,name:f,motionValue:m,element:g,...y},S=g?.KeyframeResolver||sp;this.keyframeResolver=new S(d,(C,N,A)=>this.onKeyframesResolved(C,N,_,!A),f,m,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,o){this.keyframeResolver=void 0;const{name:l,type:u,velocity:d,delay:f,isHandoff:m,onUpdate:g}=i;this.resolvedAt=At.now(),rD(e,l,u,d)||((Vn.instantAnimations||!f)&&g?.(np(e,i,n)),e[0]=e[e.length-1],kh(i),i.repeat=0);const _={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>aD?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},S=!m&&oD(_)?new tD({..._,element:_.motionValue.owner.current}):new ip(_);S.finished.then(()=>this.notifyFinished()).catch(Gt),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),$b()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const uD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cD(t){const e=uD.exec(t);if(!e)return[,];const[,n,i,o]=e;return[`--${n??i}`,o]}function KE(t,e,n=1){const[i,o]=cD(t);if(!i)return;const l=window.getComputedStyle(e).getPropertyValue(i);if(l){const u=l.trim();return pE(u)?parseFloat(u):u}return Xf(o)?KE(o,e,n+1):o}function op(t,e){return t?.[e]??t?.default??t}const GE=new Set(["width","height","top","left","right","bottom",...us]),dD={test:t=>t==="auto",parse:t=>t},qE=t=>e=>e.test(t),YE=[ls,ie,vn,ar,nb,tb,dD],Zv=t=>YE.find(qE(t));function hD(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gE(t):!0}const fD=new Set(["brightness","contrast","saturate","opacity"]);function pD(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Jf)||[];if(!i)return t;const o=n.replace(i,"");let l=fD.has(e)?1:0;return i!==n&&(l*=100),e+"("+l+o+")"}const mD=/\b([a-z-]*)\(.*?\)/gu,Ph={...Er,getAnimatableNone:t=>{const e=t.match(mD);return e?e.map(pD).join(" "):t}},e_={...ls,transform:Math.round},gD={rotate:ar,rotateX:ar,rotateY:ar,rotateZ:ar,scale:dl,scaleX:dl,scaleY:dl,scaleZ:dl,skew:ar,skewX:ar,skewY:ar,distance:ie,translateX:ie,translateY:ie,translateZ:ie,x:ie,y:ie,z:ie,perspective:ie,transformPerspective:ie,opacity:No,originX:Bv,originY:Bv,originZ:ie},ap={borderWidth:ie,borderTopWidth:ie,borderRightWidth:ie,borderBottomWidth:ie,borderLeftWidth:ie,borderRadius:ie,radius:ie,borderTopLeftRadius:ie,borderTopRightRadius:ie,borderBottomRightRadius:ie,borderBottomLeftRadius:ie,width:ie,maxWidth:ie,height:ie,maxHeight:ie,top:ie,right:ie,bottom:ie,left:ie,padding:ie,paddingTop:ie,paddingRight:ie,paddingBottom:ie,paddingLeft:ie,margin:ie,marginTop:ie,marginRight:ie,marginBottom:ie,marginLeft:ie,backgroundPositionX:ie,backgroundPositionY:ie,...gD,zIndex:e_,fillOpacity:No,strokeOpacity:No,numOctaves:e_},yD={...ap,color:Ye,backgroundColor:Ye,outlineColor:Ye,fill:Ye,stroke:Ye,borderColor:Ye,borderTopColor:Ye,borderRightColor:Ye,borderBottomColor:Ye,borderLeftColor:Ye,filter:Ph,WebkitFilter:Ph},QE=t=>yD[t];function XE(t,e){let n=QE(t);return n!==Ph&&(n=Er),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const vD=new Set(["auto","none","0"]);function _D(t,e,n){let i=0,o;for(;i<t.length&&!o;){const l=t[i];typeof l=="string"&&!vD.has(l)&&Ro(l).values.length&&(o=t[i]),i++}if(o&&n)for(const l of e)t[l]=XE(n,o)}class wD extends sp{constructor(e,n,i,o,l){super(e,n,i,o,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let m=e[f];if(typeof m=="string"&&(m=m.trim(),Xf(m))){const g=KE(m,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!GE.has(i)||e.length!==2)return;const[o,l]=e,u=Zv(o),d=Zv(l);if(u!==d)if(Yv(u)&&Yv(d))for(let f=0;f<e.length;f++){const m=e[f];typeof m=="string"&&(e[f]=parseFloat(m))}else Xr[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let o=0;o<e.length;o++)(e[o]===null||hD(e[o]))&&i.push(o);i.length&&_D(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xr[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&e.getValue(i,o).jump(o,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const l=i.length-1,u=i[l];i[l]=Xr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,f])=>{e.getValue(d).set(f)}),this.resolveNoneKeyframes()}}function ED(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const o=n?.[t]??i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const JE=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function SD(t){return mE(t)&&"offsetHeight"in t}const t_=30,xD=t=>!isNaN(parseFloat(t));class CD{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const o=At.now();if(this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=At.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=xD(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Gf);const i=this.events[e].add(n);return e==="change"?()=>{i(),Le.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=At.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>t_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,t_);return yE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zi(t,e){return new CD(t,e)}const{schedule:lp}=PE(queueMicrotask,!1),nn={x:!1,y:!1};function ZE(){return nn.x||nn.y}function TD(t){return t==="x"||t==="y"?nn[t]?null:(nn[t]=!0,()=>{nn[t]=!1}):nn.x||nn.y?null:(nn.x=nn.y=!0,()=>{nn.x=nn.y=!1})}function eS(t,e){const n=ED(t),i=new AbortController,o={passive:!0,...e,signal:i.signal};return[n,o,()=>i.abort()]}function n_(t){return!(t.pointerType==="touch"||ZE())}function ID(t,e,n={}){const[i,o,l]=eS(t,n),u=d=>{if(!n_(d))return;const{target:f}=d,m=e(f,d);if(typeof m!="function"||!f)return;const g=y=>{n_(y)&&(m(y),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,o)};return i.forEach(d=>{d.addEventListener("pointerenter",u,o)}),l}const tS=(t,e)=>e?t===e?!0:tS(t,e.parentElement):!1,up=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,kD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function PD(t){return kD.has(t.tagName)||t.tabIndex!==-1}const _l=new WeakSet;function r_(t){return e=>{e.key==="Enter"&&t(e)}}function Od(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ND=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=r_(()=>{if(_l.has(n))return;Od(n,"down");const o=r_(()=>{Od(n,"up")}),l=()=>Od(n,"cancel");n.addEventListener("keyup",o,e),n.addEventListener("blur",l,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function i_(t){return up(t)&&!ZE()}function RD(t,e,n={}){const[i,o,l]=eS(t,n),u=d=>{const f=d.currentTarget;if(!i_(d))return;_l.add(f);const m=e(f,d),g=(S,C)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",_),_l.has(f)&&_l.delete(f),i_(S)&&typeof m=="function"&&m(S,{success:C})},y=S=>{g(S,f===window||f===document||n.useGlobalTarget||tS(f,S.target))},_=S=>{g(S,!1)};window.addEventListener("pointerup",y,o),window.addEventListener("pointercancel",_,o)};return i.forEach(d=>{(n.useGlobalTarget?window:d).addEventListener("pointerdown",u,o),SD(d)&&(d.addEventListener("focus",m=>ND(m,o)),!PD(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function nS(t){return mE(t)&&"ownerSVGElement"in t}function AD(t){return nS(t)&&t.tagName==="svg"}const gt=t=>!!(t&&t.getVelocity),bD=[...YE,Ye,Er],DD=t=>bD.find(qE(t)),rS=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function MD(t=!0){const e=D.useContext(Wf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:o}=e,l=D.useId();D.useEffect(()=>{if(t)return o(l)},[t]);const u=D.useCallback(()=>t&&i&&i(l),[l,i,t]);return!n&&i?[!1,u]:[!0]}const iS=D.createContext({strict:!1}),s_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},es={};for(const t in s_)es[t]={isEnabled:e=>s_[t].some(n=>!!e[n])};function OD(t){for(const e in t)es[e]={...es[e],...t[e]}}const LD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ql(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||LD.has(t)}let sS=t=>!ql(t);function FD(t){typeof t=="function"&&(sS=e=>e.startsWith("on")?!ql(e):t(e))}try{FD(require("@emotion/is-prop-valid").default)}catch{}function jD(t,e,n){const i={};for(const o in t)o==="values"&&typeof t.values=="object"||(sS(o)||n===!0&&ql(o)||!e&&!ql(o)||t.draggable&&o.startsWith("onDrag"))&&(i[o]=t[o]);return i}const fu=D.createContext({});function pu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ao(t){return typeof t=="string"||Array.isArray(t)}const cp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],dp=["initial",...cp];function mu(t){return pu(t.animate)||dp.some(e=>Ao(t[e]))}function oS(t){return!!(mu(t)||t.variants)}function VD(t,e){if(mu(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Ao(n)?n:void 0,animate:Ao(i)?i:void 0}}return t.inherit!==!1?e:{}}function UD(t){const{initial:e,animate:n}=VD(t,D.useContext(fu));return D.useMemo(()=>({initial:e,animate:n}),[o_(e),o_(n)])}function o_(t){return Array.isArray(t)?t.join(" "):t}const bo={};function BD(t){for(const e in t)bo[e]=t[e],Qf(e)&&(bo[e].isCSSVariable=!0)}function aS(t,{layout:e,layoutId:n}){return cs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!bo[t]||t==="opacity")}const WD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zD=us.length;function $D(t,e,n){let i="",o=!0;for(let l=0;l<zD;l++){const u=us[l],d=t[u];if(d===void 0)continue;let f=!0;if(typeof d=="number"?f=d===(u.startsWith("scale")?1:0):f=parseFloat(d)===0,!f||n){const m=JE(d,ap[u]);if(!f){o=!1;const g=WD[u]||u;i+=`${g}(${m}) `}n&&(e[u]=m)}}return i=i.trim(),n?i=n(e,o?"":i):o&&(i="none"),i}function hp(t,e,n){const{style:i,vars:o,transformOrigin:l}=t;let u=!1,d=!1;for(const f in e){const m=e[f];if(cs.has(f)){u=!0;continue}else if(Qf(f)){o[f]=m;continue}else{const g=JE(m,ap[f]);f.startsWith("origin")?(d=!0,l[f]=g):i[f]=g}}if(e.transform||(u||n?i.transform=$D(e,t.transform,n):i.transform&&(i.transform="none")),d){const{originX:f="50%",originY:m="50%",originZ:g=0}=l;i.transformOrigin=`${f} ${m} ${g}`}}const fp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lS(t,e,n){for(const i in e)!gt(e[i])&&!aS(i,n)&&(t[i]=e[i])}function HD({transformTemplate:t},e){return D.useMemo(()=>{const n=fp();return hp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function KD(t,e){const n=t.style||{},i={};return lS(i,n,t),Object.assign(i,HD(t,e)),i}function GD(t,e){const n={},i=KD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const qD={offset:"stroke-dashoffset",array:"stroke-dasharray"},YD={offset:"strokeDashoffset",array:"strokeDasharray"};function QD(t,e,n=1,i=0,o=!0){t.pathLength=1;const l=o?qD:YD;t[l.offset]=ie.transform(-i);const u=ie.transform(e),d=ie.transform(n);t[l.array]=`${u} ${d}`}function uS(t,{attrX:e,attrY:n,attrScale:i,pathLength:o,pathSpacing:l=1,pathOffset:u=0,...d},f,m,g){if(hp(t,d,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:_}=t;y.transform&&(_.transform=y.transform,delete y.transform),(_.transform||y.transformOrigin)&&(_.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),_.transform&&(_.transformBox=g?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),i!==void 0&&(y.scale=i),o!==void 0&&QD(y,o,l,u,!1)}const cS=()=>({...fp(),attrs:{}}),dS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function XD(t,e,n,i){const o=D.useMemo(()=>{const l=cS();return uS(l,e,dS(i),t.transformTemplate,t.style),{...l.attrs,style:{...l.style}}},[e]);if(t.style){const l={};lS(l,t.style,t),o.style={...l,...o.style}}return o}const JD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pp(t){return typeof t!="string"||t.includes("-")?!1:!!(JD.indexOf(t)>-1||/[A-Z]/u.test(t))}function ZD(t,e,n,{latestValues:i},o,l=!1){const d=(pp(t)?XD:GD)(e,i,o,t),f=jD(e,typeof t=="string",l),m=t!==D.Fragment?{...f,...d,ref:n}:{},{children:g}=e,y=D.useMemo(()=>gt(g)?g.get():g,[g]);return D.createElement(t,{...m,children:y})}function a_(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function mp(t,e,n,i){if(typeof e=="function"){const[o,l]=a_(i);e=e(n!==void 0?n:t.custom,o,l)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[o,l]=a_(i);e=e(n!==void 0?n:t.custom,o,l)}return e}function wl(t){return gt(t)?t.get():t}function eM({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,o){return{latestValues:tM(n,i,o,t),renderState:e()}}function tM(t,e,n,i){const o={},l=i(t,{});for(const _ in l)o[_]=wl(l[_]);let{initial:u,animate:d}=t;const f=mu(t),m=oS(t);e&&m&&!f&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let g=n?n.initial===!1:!1;g=g||u===!1;const y=g?d:u;if(y&&typeof y!="boolean"&&!pu(y)){const _=Array.isArray(y)?y:[y];for(let S=0;S<_.length;S++){const C=mp(t,_[S]);if(C){const{transitionEnd:N,transition:A,...U}=C;for(const B in U){let b=U[B];if(Array.isArray(b)){const O=g?b.length-1:0;b=b[O]}b!==null&&(o[B]=b)}for(const B in N)o[B]=N[B]}}}return o}const hS=t=>(e,n)=>{const i=D.useContext(fu),o=D.useContext(Wf),l=()=>eM(t,e,i,o);return n?l():OA(l)};function gp(t,e,n){const{style:i}=t,o={};for(const l in i)(gt(i[l])||e.style&&gt(e.style[l])||aS(l,t)||n?.getValue(l)?.liveStyle!==void 0)&&(o[l]=i[l]);return o}const nM=hS({scrapeMotionValuesFromProps:gp,createRenderState:fp});function fS(t,e,n){const i=gp(t,e,n);for(const o in t)if(gt(t[o])||gt(e[o])){const l=us.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;i[l]=t[o]}return i}const rM=hS({scrapeMotionValuesFromProps:fS,createRenderState:cS}),iM=Symbol.for("motionComponentSymbol");function Li(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function sM(t,e,n){return D.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Li(n)&&(n.current=i))},[e])}const yp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),oM="framerAppearId",pS="data-"+yp(oM),mS=D.createContext({});function aM(t,e,n,i,o){const{visualElement:l}=D.useContext(fu),u=D.useContext(iS),d=D.useContext(Wf),f=D.useContext(rS).reducedMotion,m=D.useRef(null);i=i||u.renderer,!m.current&&i&&(m.current=i(t,{visualState:e,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:f}));const g=m.current,y=D.useContext(mS);g&&!g.projection&&o&&(g.type==="html"||g.type==="svg")&&lM(m.current,n,o,y);const _=D.useRef(!1);D.useInsertionEffect(()=>{g&&_.current&&g.update(n,d)});const S=n[pS],C=D.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return LA(()=>{g&&(_.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),C.current&&g.animationState&&g.animationState.animateChanges())}),D.useEffect(()=>{g&&(!C.current&&g.animationState&&g.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),C.current=!1),g.enteringChildren=void 0)}),g}function lM(t,e,n,i){const{layoutId:o,layout:l,drag:u,dragConstraints:d,layoutScroll:f,layoutRoot:m,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:gS(t.parent)),t.projection.setOptions({layoutId:o,layout:l,alwaysMeasureLayout:!!u||d&&Li(d),visualElement:t,animationType:typeof l=="string"?l:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:f,layoutRoot:m})}function gS(t){if(t)return t.options.allowProjection!==!1?t.projection:gS(t.parent)}function Ld(t,{forwardMotionProps:e=!1}={},n,i){n&&OD(n);const o=pp(t)?rM:nM;function l(d,f){let m;const g={...D.useContext(rS),...d,layoutId:uM(d)},{isStatic:y}=g,_=UD(d),S=o(d,y);if(!y&&Bf){cM();const C=dM(g);m=C.MeasureLayout,_.visualElement=aM(t,S,g,i,C.ProjectionNode)}return w.jsxs(fu.Provider,{value:_,children:[m&&_.visualElement?w.jsx(m,{visualElement:_.visualElement,...g}):null,ZD(t,d,sM(S,_.visualElement,f),S,y,e)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const u=D.forwardRef(l);return u[iM]=t,u}function uM({layoutId:t}){const e=D.useContext(fE).id;return e&&t!==void 0?e+"-"+t:t}function cM(t,e){D.useContext(iS).strict}function dM(t){const{drag:e,layout:n}=es;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function hM(t,e){if(typeof Proxy>"u")return Ld;const n=new Map,i=(l,u)=>Ld(l,u,t,e),o=(l,u)=>i(l,u);return new Proxy(o,{get:(l,u)=>u==="create"?i:(n.has(u)||n.set(u,Ld(u,void 0,t,e)),n.get(u))})}function yS({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function fM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function pM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Fd(t){return t===void 0||t===1}function Nh({scale:t,scaleX:e,scaleY:n}){return!Fd(t)||!Fd(e)||!Fd(n)}function zr(t){return Nh(t)||vS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vS(t){return l_(t.x)||l_(t.y)}function l_(t){return t&&t!=="0%"}function Yl(t,e,n){const i=t-n,o=e*i;return n+o}function u_(t,e,n,i,o){return o!==void 0&&(t=Yl(t,o,i)),Yl(t,n,i)+e}function Rh(t,e=0,n=1,i,o){t.min=u_(t.min,e,n,i,o),t.max=u_(t.max,e,n,i,o)}function _S(t,{x:e,y:n}){Rh(t.x,e.translate,e.scale,e.originPoint),Rh(t.y,n.translate,n.scale,n.originPoint)}const c_=.999999999999,d_=1.0000000000001;function mM(t,e,n,i=!1){const o=n.length;if(!o)return;e.x=e.y=1;let l,u;for(let d=0;d<o;d++){l=n[d],u=l.projectionDelta;const{visualElement:f}=l.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&l.options.layoutScroll&&l.scroll&&l!==l.root&&ji(t,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,_S(t,u)),i&&zr(l.latestValues)&&ji(t,l.latestValues))}e.x<d_&&e.x>c_&&(e.x=1),e.y<d_&&e.y>c_&&(e.y=1)}function Fi(t,e){t.min=t.min+e,t.max=t.max+e}function h_(t,e,n,i,o=.5){const l=Ue(t.min,t.max,o);Rh(t,e,n,l,i)}function ji(t,e){h_(t.x,e.x,e.scaleX,e.scale,e.originX),h_(t.y,e.y,e.scaleY,e.scale,e.originY)}function wS(t,e){return yS(pM(t.getBoundingClientRect(),e))}function gM(t,e,n){const i=wS(t,n),{scroll:o}=e;return o&&(Fi(i.x,o.offset.x),Fi(i.y,o.offset.y)),i}const f_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vi=()=>({x:f_(),y:f_()}),p_=()=>({min:0,max:0}),Ge=()=>({x:p_(),y:p_()}),Ah={current:null},ES={current:!1};function yM(){if(ES.current=!0,!!Bf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ah.current=t.matches;t.addEventListener("change",e),e()}else Ah.current=!1}const vM=new WeakMap;function _M(t,e,n){for(const i in e){const o=e[i],l=n[i];if(gt(o))t.addValue(i,o);else if(gt(l))t.addValue(i,Zi(o,{owner:t}));else if(l!==o)if(t.hasValue(i)){const u=t.getValue(i);u.liveStyle===!0?u.jump(o):u.hasAnimated||u.set(o)}else{const u=t.getStaticValue(i);t.addValue(i,Zi(u!==void 0?u:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const m_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wM{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:o,blockInitialAnimation:l,visualState:u},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=At.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,Le.render(this.render,!1,!0))};const{latestValues:f,renderState:m}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=mu(n),this.isVariantNode=oS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in y){const S=y[_];f[_]!==void 0&&gt(S)&&S.set(f[_])}}mount(e){this.current=e,vM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),ES.current||yM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ah.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),wr(this.notifyUpdate),wr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=cs.has(e);i&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Le.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{o(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in es){const n=es[e];if(!n)continue;const{isEnabled:i,Feature:o}=n;if(!this.features[e]&&o&&i(this.props)&&(this.features[e]=new o(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ge()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<m_.length;i++){const o=m_[i];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const l="on"+o,u=e[l];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=_M(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Zi(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(pE(i)||gE(i))?i=parseFloat(i):!DD(i)&&Er.test(n)&&(i=XE(e,n)),this.setBaseTarget(e,gt(i)?i.get():i)),gt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const l=mp(this.props,n,this.presenceContext?.custom);l&&(i=l[e])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!gt(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Gf),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){lp.render(this.render)}}class SS extends wM{constructor(){super(...arguments),this.KeyframeResolver=wD}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function xS(t,{style:e,vars:n},i,o){const l=t.style;let u;for(u in e)l[u]=e[u];o?.applyProjectionStyles(l,i);for(u in n)l.setProperty(u,n[u])}function EM(t){return window.getComputedStyle(t)}class SM extends SS{constructor(){super(...arguments),this.type="html",this.renderInstance=xS}readValueFromInstance(e,n){if(cs.has(n))return this.projection?.isProjecting?Sh(n):Vb(e,n);{const i=EM(e),o=(Qf(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wS(e,n)}build(e,n,i){hp(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return gp(e,n,i)}}const CS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xM(t,e,n,i){xS(t,e,void 0,i);for(const o in e.attrs)t.setAttribute(CS.has(o)?o:yp(o),e.attrs[o])}class CM extends SS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ge}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(cs.has(n)){const i=QE(n);return i&&i.default||0}return n=CS.has(n)?n:yp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return fS(e,n,i)}build(e,n,i){uS(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,o){xM(e,n,i,o)}mount(e){this.isSVGTag=dS(e.tagName),super.mount(e)}}const TM=(t,e)=>pp(t)?new CM(e):new SM(e,{allowProjection:t!==D.Fragment});function Hi(t,e,n){const i=t.getProps();return mp(i,e,n!==void 0?n:i.custom,t)}const bh=t=>Array.isArray(t);function IM(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zi(n))}function kM(t){return bh(t)?t[t.length-1]||0:t}function PM(t,e){const n=Hi(t,e);let{transitionEnd:i={},transition:o={},...l}=n||{};l={...l,...i};for(const u in l){const d=kM(l[u]);IM(t,u,d)}}function NM(t){return!!(gt(t)&&t.add)}function Dh(t,e){const n=t.getValue("willChange");if(NM(n))return n.add(e);if(!n&&Vn.WillChange){const i=new Vn.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function TS(t){return t.props[pS]}const RM=t=>t!==null;function AM(t,{repeat:e,repeatType:n="loop"},i){const o=t.filter(RM),l=e&&n!=="loop"&&e%2===1?0:o.length-1;return o[l]}const bM={type:"spring",stiffness:500,damping:25,restSpeed:10},DM=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),MM={type:"keyframes",duration:.8},OM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},LM=(t,{keyframes:e})=>e.length>2?MM:cs.has(t)?t.startsWith("scale")?DM(e[1]):bM:OM;function FM({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:o,repeat:l,repeatType:u,repeatDelay:d,from:f,elapsed:m,...g}){return!!Object.keys(g).length}const vp=(t,e,n,i={},o,l)=>u=>{const d=op(i,t)||{},f=d.delay||i.delay||0;let{elapsed:m=0}=i;m=m-yn(f);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-m,onUpdate:_=>{e.set(_),d.onUpdate&&d.onUpdate(_)},onComplete:()=>{u(),d.onComplete&&d.onComplete()},name:t,motionValue:e,element:l?void 0:o};FM(d)||Object.assign(g,LM(t,g)),g.duration&&(g.duration=yn(g.duration)),g.repeatDelay&&(g.repeatDelay=yn(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(kh(g),g.delay===0&&(y=!0)),(Vn.instantAnimations||Vn.skipAnimations)&&(y=!0,kh(g),g.delay=0),g.allowFlatten=!d.type&&!d.ease,y&&!l&&e.get()!==void 0){const _=AM(g.keyframes,d);if(_!==void 0){Le.update(()=>{g.onUpdate(_),g.onComplete()});return}}return d.isSync?new ip(g):new lD(g)};function jM({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function IS(t,e,{delay:n=0,transitionOverride:i,type:o}={}){let{transition:l=t.getDefaultTransition(),transitionEnd:u,...d}=e;i&&(l=i);const f=[],m=o&&t.animationState&&t.animationState.getState()[o];for(const g in d){const y=t.getValue(g,t.latestValues[g]??null),_=d[g];if(_===void 0||m&&jM(m,g))continue;const S={delay:n,...op(l||{},g)},C=y.get();if(C!==void 0&&!y.isAnimating&&!Array.isArray(_)&&_===C&&!S.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const U=TS(t);if(U){const B=window.MotionHandoffAnimation(U,g,Le);B!==null&&(S.startTime=B,N=!0)}}Dh(t,g),y.start(vp(g,y,_,t.shouldReduceMotion&&GE.has(g)?{type:!1}:S,t,N));const A=y.animation;A&&f.push(A)}return u&&Promise.all(f).then(()=>{Le.update(()=>{u&&PM(t,u)})}),f}function kS(t,e,n,i=0,o=1){const l=Array.from(t).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),u=t.size,d=(u-1)*i;return typeof n=="function"?n(l,u):o===1?l*i:d-l*i}function Mh(t,e,n={}){const i=Hi(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const l=i?()=>Promise.all(IS(t,i,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:g,staggerDirection:y}=o;return VM(t,e,f,m,g,y,n)}:()=>Promise.resolve(),{when:d}=o;if(d){const[f,m]=d==="beforeChildren"?[l,u]:[u,l];return f().then(()=>m())}else return Promise.all([l(),u(n.delay)])}function VM(t,e,n=0,i=0,o=0,l=1,u){const d=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),d.push(Mh(f,e,{...u,delay:n+(typeof i=="function"?0:i)+kS(t.variantChildren,f,i,o,l)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(d)}function UM(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const o=e.map(l=>Mh(t,l,n));i=Promise.all(o)}else if(typeof e=="string")i=Mh(t,e,n);else{const o=typeof e=="function"?Hi(t,e,n.custom):e;i=Promise.all(IS(t,o,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function PS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const BM=dp.length;function NS(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?NS(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<BM;n++){const i=dp[n],o=t.props[i];(Ao(o)||o===!1)&&(e[i]=o)}return e}const WM=[...cp].reverse(),zM=cp.length;function $M(t){return e=>Promise.all(e.map(({animation:n,options:i})=>UM(t,n,i)))}function HM(t){let e=$M(t),n=g_(),i=!0;const o=f=>(m,g)=>{const y=Hi(t,g,f==="exit"?t.presenceContext?.custom:void 0);if(y){const{transition:_,transitionEnd:S,...C}=y;m={...m,...C,...S}}return m};function l(f){e=f(t)}function u(f){const{props:m}=t,g=NS(t.parent)||{},y=[],_=new Set;let S={},C=1/0;for(let A=0;A<zM;A++){const U=WM[A],B=n[U],b=m[U]!==void 0?m[U]:g[U],O=Ao(b),H=U===f?B.isActive:null;H===!1&&(C=A);let j=b===g[U]&&b!==m[U]&&O;if(j&&i&&t.manuallyAnimateOnMount&&(j=!1),B.protectedKeys={...S},!B.isActive&&H===null||!b&&!B.prevProp||pu(b)||typeof b=="boolean")continue;const J=KM(B.prevProp,b);let $=J||U===f&&B.isActive&&!j&&O||A>C&&O,ge=!1;const Ie=Array.isArray(b)?b:[b];let dt=Ie.reduce(o(U),{});H===!1&&(dt={});const{prevResolvedValues:ee={}}=B,Ee={...ee,...dt},Se=le=>{$=!0,_.has(le)&&(ge=!0,_.delete(le)),B.needsAnimating[le]=!0;const K=t.getValue(le);K&&(K.liveStyle=!1)};for(const le in Ee){const K=dt[le],te=ee[le];if(S.hasOwnProperty(le))continue;let G=!1;bh(K)&&bh(te)?G=!PS(K,te):G=K!==te,G?K!=null?Se(le):_.add(le):K!==void 0&&_.has(le)?Se(le):B.protectedKeys[le]=!0}B.prevProp=b,B.prevResolvedValues=dt,B.isActive&&(S={...S,...dt}),i&&t.blockInitialAnimation&&($=!1);const Fe=j&&J;$&&(!Fe||ge)&&y.push(...Ie.map(le=>{const K={type:U};if(typeof le=="string"&&i&&!Fe&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,G=Hi(te,le);if(te.enteringChildren&&G){const{delayChildren:I}=G.transition||{};K.delay=kS(te.enteringChildren,t,I)}}return{animation:le,options:K}}))}if(_.size){const A={};if(typeof m.initial!="boolean"){const U=Hi(t,Array.isArray(m.initial)?m.initial[0]:m.initial);U&&U.transition&&(A.transition=U.transition)}_.forEach(U=>{const B=t.getBaseTarget(U),b=t.getValue(U);b&&(b.liveStyle=!0),A[U]=B??null}),y.push({animation:A})}let N=!!y.length;return i&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(y):Promise.resolve()}function d(f,m){if(n[f].isActive===m)return Promise.resolve();t.variantChildren?.forEach(y=>y.animationState?.setActive(f,m)),n[f].isActive=m;const g=u(f);for(const y in n)n[y].protectedKeys={};return g}return{animateChanges:u,setActive:d,setAnimateFunction:l,getState:()=>n,reset:()=>{n=g_()}}}function KM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!PS(e,t):!1}function Ur(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function g_(){return{animate:Ur(!0),whileInView:Ur(),whileHover:Ur(),whileTap:Ur(),whileDrag:Ur(),whileFocus:Ur(),exit:Ur()}}class Ir{constructor(e){this.isMounted=!1,this.node=e}update(){}}class GM extends Ir{constructor(e){super(e),e.animationState||(e.animationState=HM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let qM=0;class YM extends Ir{constructor(){super(...arguments),this.id=qM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e);n&&!e&&o.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const QM={animation:{Feature:GM},exit:{Feature:YM}};function Do(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Yo(t){return{point:{x:t.pageX,y:t.pageY}}}const XM=t=>e=>up(e)&&t(e,Yo(e));function po(t,e,n,i){return Do(t,e,XM(n),i)}const RS=1e-4,JM=1-RS,ZM=1+RS,AS=.01,eO=0-AS,tO=0+AS;function wt(t){return t.max-t.min}function nO(t,e,n){return Math.abs(t-e)<=n}function y_(t,e,n,i=.5){t.origin=i,t.originPoint=Ue(e.min,e.max,t.origin),t.scale=wt(n)/wt(e),t.translate=Ue(n.min,n.max,t.origin)-t.originPoint,(t.scale>=JM&&t.scale<=ZM||isNaN(t.scale))&&(t.scale=1),(t.translate>=eO&&t.translate<=tO||isNaN(t.translate))&&(t.translate=0)}function mo(t,e,n,i){y_(t.x,e.x,n.x,i?i.originX:void 0),y_(t.y,e.y,n.y,i?i.originY:void 0)}function v_(t,e,n){t.min=n.min+e.min,t.max=t.min+wt(e)}function rO(t,e,n){v_(t.x,e.x,n.x),v_(t.y,e.y,n.y)}function __(t,e,n){t.min=e.min-n.min,t.max=t.min+wt(e)}function go(t,e,n){__(t.x,e.x,n.x),__(t.y,e.y,n.y)}function $t(t){return[t("x"),t("y")]}const bS=({current:t})=>t?t.ownerDocument.defaultView:null,w_=(t,e)=>Math.abs(t-e);function iO(t,e){const n=w_(t.x,e.x),i=w_(t.y,e.y);return Math.sqrt(n**2+i**2)}class DS{constructor(e,n,{transformPagePoint:i,contextWindow:o=window,dragSnapToOrigin:l=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Vd(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,C=iO(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!C)return;const{point:N}=_,{timestamp:A}=lt;this.history.push({...N,timestamp:A});const{onStart:U,onMove:B}=this.handlers;S||(U&&U(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),B&&B(this.lastMoveEvent,_)},this.handlePointerMove=(_,S)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=jd(S,this.transformPagePoint),Le.update(this.updatePoint,!0)},this.handlePointerUp=(_,S)=>{this.end();const{onEnd:C,onSessionEnd:N,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=Vd(_.type==="pointercancel"?this.lastMoveEventInfo:jd(S,this.transformPagePoint),this.history);this.startEvent&&C&&C(_,U),N&&N(_,U)},!up(e))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=u,this.contextWindow=o||window;const d=Yo(e),f=jd(d,this.transformPagePoint),{point:m}=f,{timestamp:g}=lt;this.history=[{...m,timestamp:g}];const{onSessionStart:y}=n;y&&y(e,Vd(f,this.history)),this.removeListeners=Ko(po(this.contextWindow,"pointermove",this.handlePointerMove),po(this.contextWindow,"pointerup",this.handlePointerUp),po(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wr(this.updatePoint)}}function jd(t,e){return e?{point:e(t.point)}:t}function E_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Vd({point:t},e){return{point:t,delta:E_(t,MS(e)),offset:E_(t,sO(e)),velocity:oO(e,.1)}}function sO(t){return t[0]}function MS(t){return t[t.length-1]}function oO(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const o=MS(t);for(;n>=0&&(i=t[n],!(o.timestamp-i.timestamp>yn(e)));)n--;if(!i)return{x:0,y:0};const l=Kt(o.timestamp-i.timestamp);if(l===0)return{x:0,y:0};const u={x:(o.x-i.x)/l,y:(o.y-i.y)/l};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function aO(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Ue(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Ue(n,t,i.max):Math.min(t,n)),t}function S_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function lO(t,{top:e,left:n,bottom:i,right:o}){return{x:S_(t.x,n,o),y:S_(t.y,e,i)}}function x_(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function uO(t,e){return{x:x_(t.x,e.x),y:x_(t.y,e.y)}}function cO(t,e){let n=.5;const i=wt(t),o=wt(e);return o>i?n=Po(e.min,e.max-i,t.min):i>o&&(n=Po(t.min,t.max-o,e.min)),jn(0,1,n)}function dO(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Oh=.35;function hO(t=Oh){return t===!1?t=0:t===!0&&(t=Oh),{x:C_(t,"left","right"),y:C_(t,"top","bottom")}}function C_(t,e,n){return{min:T_(t,e),max:T_(t,n)}}function T_(t,e){return typeof t=="number"?t:t[e]||0}const fO=new WeakMap;class pO{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ge(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const l=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Yo(y).point)},u=(y,_)=>{const{drag:S,dragPropagation:C,onDragStart:N}=this.getProps();if(S&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TD(S),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$t(U=>{let B=this.getAxisMotionValue(U).get()||0;if(vn.test(B)){const{projection:b}=this.visualElement;if(b&&b.layout){const O=b.layout.layoutBox[U];O&&(B=wt(O)*(parseFloat(B)/100))}}this.originPoint[U]=B}),N&&Le.postRender(()=>N(y,_)),Dh(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},d=(y,_)=>{this.latestPointerEvent=y,this.latestPanInfo=_;const{dragPropagation:S,dragDirectionLock:C,onDirectionLock:N,onDrag:A}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:U}=_;if(C&&this.currentDirection===null){this.currentDirection=mO(U),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",_.point,U),this.updateAxis("y",_.point,U),this.visualElement.render(),A&&A(y,_)},f=(y,_)=>{this.latestPointerEvent=y,this.latestPanInfo=_,this.stop(y,_),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>$t(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new DS(e,{onSessionStart:l,onStart:u,onMove:d,onSessionEnd:f,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:bS(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,o=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!o||!i)return;const{velocity:u}=o;this.startAnimation(u);const{onDragEnd:d}=this.getProps();d&&Le.postRender(()=>d(i,o))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:o}=this.getProps();if(!i||!hl(e,o,this.currentDirection))return;const l=this.getAxisMotionValue(e);let u=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(u=aO(u,this.constraints[e],this.elastic[e])),l.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,o=this.constraints;e&&Li(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=lO(i.layoutBox,e):this.constraints=!1,this.elastic=hO(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&$t(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=dO(i.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Li(e))return!1;const i=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const l=gM(i,o.root,this.visualElement.getTransformPagePoint());let u=uO(o.layout.layoutBox,l);if(n){const d=n(fM(u));this.hasMutatedConstraints=!!d,d&&(u=yS(d))}return u}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:o,dragTransition:l,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},m=$t(g=>{if(!hl(g,n,this.currentDirection))return;let y=f&&f[g]||{};u&&(y={min:0,max:0});const _=o?200:1e6,S=o?40:1e7,C={type:"inertia",velocity:i?e[g]:0,bounceStiffness:_,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(g,C)});return Promise.all(m).then(d)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Dh(this.visualElement,e),i.start(vp(e,i,0,n,this.visualElement,!1))}stopAnimation(){$t(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$t(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),o=i[n];return o||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){$t(n=>{const{drag:i}=this.getProps();if(!hl(n,i,this.currentDirection))return;const{projection:o}=this.visualElement,l=this.getAxisMotionValue(n);if(o&&o.layout){const{min:u,max:d}=o.layout.layoutBox[n];l.set(e[n]-Ue(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Li(n)||!i||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};$t(u=>{const d=this.getAxisMotionValue(u);if(d&&this.constraints!==!1){const f=d.get();o[u]=cO({min:f,max:f},this.constraints[u])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),$t(u=>{if(!hl(u,e,null))return;const d=this.getAxisMotionValue(u),{min:f,max:m}=this.constraints[u];d.set(Ue(f,m,o[u]))})}addListeners(){if(!this.visualElement.current)return;fO.set(this.visualElement,this);const e=this.visualElement.current,n=po(e,"pointerdown",f=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();Li(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,l=o.addEventListener("measure",i);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Le.read(i);const u=Do(window,"resize",()=>this.scalePositionWithinConstraints()),d=o.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&($t(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())}));return()=>{u(),n(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:o=!1,dragConstraints:l=!1,dragElastic:u=Oh,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:l,dragElastic:u,dragMomentum:d}}}function hl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function mO(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class gO extends Ir{constructor(e){super(e),this.removeGroupControls=Gt,this.removeListeners=Gt,this.controls=new pO(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gt}unmount(){this.removeGroupControls(),this.removeListeners()}}const I_=t=>(e,n)=>{t&&Le.postRender(()=>t(e,n))};class yO extends Ir{constructor(){super(...arguments),this.removePointerDownListener=Gt}onPointerDown(e){this.session=new DS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:o}=this.node.getProps();return{onSessionStart:I_(e),onStart:I_(n),onMove:i,onEnd:(l,u)=>{delete this.session,o&&Le.postRender(()=>o(l,u))}}}mount(){this.removePointerDownListener=po(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const El={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function k_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const to={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ie.test(t))t=parseFloat(t);else return t;const n=k_(t,e.target.x),i=k_(t,e.target.y);return`${n}% ${i}%`}},vO={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,o=Er.parse(t);if(o.length>5)return i;const l=Er.createTransformer(t),u=typeof o[0]!="number"?1:0,d=n.x.scale*e.x,f=n.y.scale*e.y;o[0+u]/=d,o[1+u]/=f;const m=Ue(d,f,.5);return typeof o[2+u]=="number"&&(o[2+u]/=m),typeof o[3+u]=="number"&&(o[3+u]/=m),l(o)}};let Ud=!1;class _O extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:o}=this.props,{projection:l}=e;BD(wO),l&&(n.group&&n.group.add(l),i&&i.register&&o&&i.register(l),Ud&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),El.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:o,isPresent:l}=this.props,{projection:u}=i;return u&&(u.isPresent=l,Ud=!0,o||e.layoutDependency!==n||n===void 0||e.isPresent!==l?u.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?u.promote():u.relegate()||Le.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),lp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:o}=e;Ud=!0,o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),i&&i.deregister&&i.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OS(t){const[e,n]=MD(),i=D.useContext(fE);return w.jsx(_O,{...t,layoutGroup:i,switchLayoutGroup:D.useContext(mS),isPresent:e,safeToRemove:n})}const wO={borderRadius:{...to,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:to,borderTopRightRadius:to,borderBottomLeftRadius:to,borderBottomRightRadius:to,boxShadow:vO};function EO(t,e,n){const i=gt(t)?t:Zi(t);return i.start(vp("",i,e,n)),i.animation}const SO=(t,e)=>t.depth-e.depth;class xO{constructor(){this.children=[],this.isDirty=!1}add(e){zf(this.children,e),this.isDirty=!0}remove(e){$f(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SO),this.isDirty=!1,this.children.forEach(e)}}function CO(t,e){const n=At.now(),i=({timestamp:o})=>{const l=o-n;l>=e&&(wr(i),t(l-e))};return Le.setup(i,!0),()=>wr(i)}const LS=["TopLeft","TopRight","BottomLeft","BottomRight"],TO=LS.length,P_=t=>typeof t=="string"?parseFloat(t):t,N_=t=>typeof t=="number"||ie.test(t);function IO(t,e,n,i,o,l){o?(t.opacity=Ue(0,n.opacity??1,kO(i)),t.opacityExit=Ue(e.opacity??1,0,PO(i))):l&&(t.opacity=Ue(e.opacity??1,n.opacity??1,i));for(let u=0;u<TO;u++){const d=`border${LS[u]}Radius`;let f=R_(e,d),m=R_(n,d);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||N_(f)===N_(m)?(t[d]=Math.max(Ue(P_(f),P_(m),i),0),(vn.test(m)||vn.test(f))&&(t[d]+="%")):t[d]=m}(e.rotate||n.rotate)&&(t.rotate=Ue(e.rotate||0,n.rotate||0,i))}function R_(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const kO=FS(0,.5,CE),PO=FS(.5,.95,Gt);function FS(t,e,n){return i=>i<t?0:i>e?1:n(Po(t,e,i))}function A_(t,e){t.min=e.min,t.max=e.max}function zt(t,e){A_(t.x,e.x),A_(t.y,e.y)}function b_(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function D_(t,e,n,i,o){return t-=e,t=Yl(t,1/n,i),o!==void 0&&(t=Yl(t,1/o,i)),t}function NO(t,e=0,n=1,i=.5,o,l=t,u=t){if(vn.test(e)&&(e=parseFloat(e),e=Ue(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=Ue(l.min,l.max,i);t===l&&(d-=e),t.min=D_(t.min,e,n,d,o),t.max=D_(t.max,e,n,d,o)}function M_(t,e,[n,i,o],l,u){NO(t,e[n],e[i],e[o],e.scale,l,u)}const RO=["x","scaleX","originX"],AO=["y","scaleY","originY"];function O_(t,e,n,i){M_(t.x,e,RO,n?n.x:void 0,i?i.x:void 0),M_(t.y,e,AO,n?n.y:void 0,i?i.y:void 0)}function L_(t){return t.translate===0&&t.scale===1}function jS(t){return L_(t.x)&&L_(t.y)}function F_(t,e){return t.min===e.min&&t.max===e.max}function bO(t,e){return F_(t.x,e.x)&&F_(t.y,e.y)}function j_(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function VS(t,e){return j_(t.x,e.x)&&j_(t.y,e.y)}function V_(t){return wt(t.x)/wt(t.y)}function U_(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class DO{constructor(){this.members=[]}add(e){zf(this.members,e),e.scheduleRender()}remove(e){if($f(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let i;for(let o=n;o>=0;o--){const l=this.members[o];if(l.isPresent!==!1){i=l;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function MO(t,e,n){let i="";const o=t.x.translate/e.x,l=t.y.translate/e.y,u=n?.z||0;if((o||l||u)&&(i=`translate3d(${o}px, ${l}px, ${u}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:_,skewX:S,skewY:C}=n;m&&(i=`perspective(${m}px) ${i}`),g&&(i+=`rotate(${g}deg) `),y&&(i+=`rotateX(${y}deg) `),_&&(i+=`rotateY(${_}deg) `),S&&(i+=`skewX(${S}deg) `),C&&(i+=`skewY(${C}deg) `)}const d=t.x.scale*e.x,f=t.y.scale*e.y;return(d!==1||f!==1)&&(i+=`scale(${d}, ${f})`),i||"none"}const Bd=["","X","Y","Z"],OO=1e3;let LO=0;function Wd(t,e,n,i){const{latestValues:o}=e;o[t]&&(n[t]=o[t],e.setStaticValue(t,0),i&&(i[t]=0))}function US(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=TS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:l}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Le,!(o||l))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&US(i)}function BS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:o}){return class{constructor(u={},d=e?.()){this.id=LO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(VO),this.nodes.forEach(zO),this.nodes.forEach($O),this.nodes.forEach(UO)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new xO)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new Gf),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const f=this.eventHandlers.get(u);f&&f.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=nS(u)&&!AD(u),this.instance=u;const{layoutId:d,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||d)&&(this.isLayoutDirty=!0),t){let g,y=0;const _=()=>this.root.updateBlockedByResize=!1;Le.read(()=>{y=window.innerWidth}),t(u,()=>{const S=window.innerWidth;S!==y&&(y=S,this.root.updateBlockedByResize=!0,g&&g(),g=CO(_,250),El.hasAnimatedSinceResize&&(El.hasAnimatedSinceResize=!1,this.nodes.forEach(z_)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:_,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||m.getDefaultTransition()||YO,{onLayoutAnimationStart:N,onLayoutAnimationComplete:A}=m.getProps(),U=!this.targetLayout||!VS(this.targetLayout,S),B=!y&&_;if(this.options.layoutRoot||this.resumeFrom||B||y&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...op(C,"layout"),onPlay:N,onComplete:A};(m.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(g,B)}else y||z_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(HO),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&US(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(B_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(W_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(WO),this.nodes.forEach(FO),this.nodes.forEach(jO)):this.nodes.forEach(W_),this.clearAllSnapshots();const d=At.now();lt.delta=jn(0,1e3/60,d-lt.timestamp),lt.timestamp=d,lt.isProcessing=!0,Rd.update.process(lt),Rd.preRender.process(lt),Rd.render.process(lt),lt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(BO),this.sharedNodes.forEach(KO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wt(this.snapshot.measuredBox.x)&&!wt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!o)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!jS(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;u&&this.instance&&(d||zr(this.latestValues)||g)&&(o(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return u&&(f=this.removeTransform(f)),QO(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return Ge();const d=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(XO))){const{scroll:m}=this.root;m&&(Fi(d.x,m.offset.x),Fi(d.y,m.offset.y))}return d}removeElementScroll(u){const d=Ge();if(zt(d,u),this.scroll?.wasRoot)return d;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:g,options:y}=m;m!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&zt(d,u),Fi(d.x,g.offset.x),Fi(d.y,g.offset.y))}return d}applyTransform(u,d=!1){const f=Ge();zt(f,u);for(let m=0;m<this.path.length;m++){const g=this.path[m];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&ji(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),zr(g.latestValues)&&ji(f,g.latestValues)}return zr(this.latestValues)&&ji(f,this.latestValues),f}removeTransform(u){const d=Ge();zt(d,u);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!zr(m.latestValues))continue;Nh(m.latestValues)&&m.updateSnapshot();const g=Ge(),y=m.measurePageBox();zt(g,y),O_(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return zr(this.latestValues)&&O_(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==lt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(u||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=lt.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),go(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ge(),this.targetWithTransforms=Ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zt(this.target,this.layout.layoutBox),_S(this.target,this.targetDelta)):zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),go(this.relativeTargetOrigin,this.target,_.target),zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Nh(this.parent.latestValues)||vS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const u=this.getLead(),d=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===lt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;zt(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,_=this.treeScale.y;mM(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=Ge());const{target:S}=u;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(b_(this.prevProjectionDelta.x,this.projectionDelta.x),b_(this.prevProjectionDelta.y,this.projectionDelta.y)),mo(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==_||!U_(this.projectionDelta.x,this.prevProjectionDelta.x)||!U_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vi(),this.projectionDelta=Vi(),this.projectionDeltaWithTransform=Vi()}setAnimationOrigin(u,d=!1){const f=this.snapshot,m=f?f.latestValues:{},g={...this.latestValues},y=Vi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const _=Ge(),S=f?f.source:void 0,C=this.layout?this.layout.source:void 0,N=S!==C,A=this.getStack(),U=!A||A.members.length<=1,B=!!(N&&!U&&this.options.crossfade===!0&&!this.path.some(qO));this.animationProgress=0;let b;this.mixTargetDelta=O=>{const H=O/1e3;$_(y.x,u.x,H),$_(y.y,u.y,H),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(go(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GO(this.relativeTarget,this.relativeTargetOrigin,_,H),b&&bO(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ge()),zt(b,this.relativeTarget)),N&&(this.animationValues=g,IO(g,m,this.latestValues,H,B,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(wr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Le.update(()=>{El.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zi(0)),this.currentAnimation=EO(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(OO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:f,layout:m,latestValues:g}=u;if(!(!d||!f||!m)){if(this!==u&&this.layout&&m&&WS(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||Ge();const y=wt(this.layout.layoutBox.x);f.x.min=u.target.x.min,f.x.max=f.x.min+y;const _=wt(this.layout.layoutBox.y);f.y.min=u.target.y.min,f.y.max=f.y.min+_}zt(d,f),ji(d,g),mo(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new DO),this.sharedNodes.get(u).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:f}=u;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const m={};f.z&&Wd("z",u,m,this.animationValues);for(let g=0;g<Bd.length;g++)Wd(`rotate${Bd[g]}`,u,m,this.animationValues),Wd(`skew${Bd[g]}`,u,m,this.animationValues);u.render();for(const g in m)u.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);u.scheduleRender()}applyProjectionStyles(u,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=wl(d?.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=wl(d?.pointerEvents)||""),this.hasProjected&&!zr(this.latestValues)&&(u.transform=f?f({},""):"none",this.hasProjected=!1);return}u.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=MO(this.projectionDeltaWithTransform,this.treeScale,g);f&&(y=f(g,y)),u.transform=y;const{x:_,y:S}=this.projectionDelta;u.transformOrigin=`${_.origin*100}% ${S.origin*100}% 0`,m.animationValues?u.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const C in bo){if(g[C]===void 0)continue;const{correct:N,applyTo:A,isCSSVariable:U}=bo[C],B=y==="none"?g[C]:N(g[C],m);if(A){const b=A.length;for(let O=0;O<b;O++)u[A[O]]=B}else U?this.options.visualElement.renderState.vars[C]=B:u[C]=B}this.options.layoutId&&(u.pointerEvents=m===this?wl(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(B_),this.root.sharedNodes.clear()}}}function FO(t){t.updateLayout()}function jO(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:o}=t.options,l=e.source!==t.layout.source;o==="size"?$t(g=>{const y=l?e.measuredBox[g]:e.layoutBox[g],_=wt(y);y.min=n[g].min,y.max=y.min+_}):WS(o,e.layoutBox,n)&&$t(g=>{const y=l?e.measuredBox[g]:e.layoutBox[g],_=wt(n[g]);y.max=y.min+_,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+_)});const u=Vi();mo(u,n,e.layoutBox);const d=Vi();l?mo(d,t.applyTransform(i,!0),e.measuredBox):mo(d,n,e.layoutBox);const f=!jS(u);let m=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:_}=g;if(y&&_){const S=Ge();go(S,e.layoutBox,y.layoutBox);const C=Ge();go(C,n,_.layoutBox),VS(S,C)||(m=!0),g.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=S,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:d,layoutDelta:u,hasLayoutChanged:f,hasRelativeLayoutChanged:m})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function VO(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function UO(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function BO(t){t.clearSnapshot()}function B_(t){t.clearMeasurements()}function W_(t){t.isLayoutDirty=!1}function WO(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function z_(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function zO(t){t.resolveTargetDelta()}function $O(t){t.calcProjection()}function HO(t){t.resetSkewAndRotation()}function KO(t){t.removeLeadSnapshot()}function $_(t,e,n){t.translate=Ue(e.translate,0,n),t.scale=Ue(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function H_(t,e,n,i){t.min=Ue(e.min,n.min,i),t.max=Ue(e.max,n.max,i)}function GO(t,e,n,i){H_(t.x,e.x,n.x,i),H_(t.y,e.y,n.y,i)}function qO(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const YO={duration:.45,ease:[.4,0,.1,1]},K_=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),G_=K_("applewebkit/")&&!K_("chrome/")?Math.round:Gt;function q_(t){t.min=G_(t.min),t.max=G_(t.max)}function QO(t){q_(t.x),q_(t.y)}function WS(t,e,n){return t==="position"||t==="preserve-aspect"&&!nO(V_(e),V_(n),.2)}function XO(t){return t!==t.root&&t.scroll?.wasRoot}const JO=BS({attachResizeListener:(t,e)=>Do(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),zd={current:void 0},zS=BS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!zd.current){const t=new JO({});t.mount(window),t.setOptions({layoutScroll:!0}),zd.current=t}return zd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ZO={pan:{Feature:yO},drag:{Feature:gO,ProjectionNode:zS,MeasureLayout:OS}};function Y_(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,l=i[o];l&&Le.postRender(()=>l(e,Yo(e)))}class eL extends Ir{mount(){const{current:e}=this.node;e&&(this.unmount=ID(e,(n,i)=>(Y_(this.node,i,"Start"),o=>Y_(this.node,o,"End"))))}unmount(){}}class tL extends Ir{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ko(Do(this.node.current,"focus",()=>this.onFocus()),Do(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Q_(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),l=i[o];l&&Le.postRender(()=>l(e,Yo(e)))}class nL extends Ir{mount(){const{current:e}=this.node;e&&(this.unmount=RD(e,(n,i)=>(Q_(this.node,i,"Start"),(o,{success:l})=>Q_(this.node,o,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Lh=new WeakMap,$d=new WeakMap,rL=t=>{const e=Lh.get(t.target);e&&e(t)},iL=t=>{t.forEach(rL)};function sL({root:t,...e}){const n=t||document;$d.has(n)||$d.set(n,{});const i=$d.get(n),o=JSON.stringify(e);return i[o]||(i[o]=new IntersectionObserver(iL,{root:t,...e})),i[o]}function oL(t,e,n){const i=sL(e);return Lh.set(t,n),i.observe(t),()=>{Lh.delete(t),i.unobserve(t)}}const aL={some:0,all:1};class lL extends Ir{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:o="some",once:l}=e,u={root:n?n.current:void 0,rootMargin:i,threshold:typeof o=="number"?o:aL[o]},d=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),_=m?g:y;_&&_(f)};return oL(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(uL(e,n))&&this.startObserver()}unmount(){}}function uL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const cL={inView:{Feature:lL},tap:{Feature:nL},focus:{Feature:tL},hover:{Feature:eL}},dL={layout:{ProjectionNode:zS,MeasureLayout:OS}},hL={...QM,...cL,...ZO,...dL},pn=hM(hL,TM),fL=[{id:1,title:`AI  
 `,subtitle:"      .",color:"from-amber-400 via-orange-400 to-rose-400",accentColor:"text-amber-500",dotColor:"bg-amber-500"},{id:2,title:`
 `,subtitle:"      .",color:"from-slate-800 via-slate-700 to-slate-600",accentColor:"text-slate-700",dotColor:"bg-slate-700"},{id:3,title:` 
, Silk`,subtitle:"      .",color:"from-indigo-500 via-purple-500 to-pink-500",accentColor:"text-indigo-600",dotColor:"bg-indigo-600"}];function pL(){return w.jsxs("div",{className:"bg-neutral-50",children:[w.jsxs("section",{className:"min-h-screen flex flex-col justify-center items-center px-6 relative overflow-hidden bg-neutral-50",children:[w.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-neutral-50 via-indigo-50/30 to-neutral-50"}),w.jsxs(pn.div,{initial:{opacity:0,y:60},animate:{opacity:1,y:0},transition:{duration:1.2,ease:[.22,1,.36,1]},className:"text-center max-w-5xl relative z-10",children:[w.jsx(pn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:1,delay:.2},className:"mb-12",children:w.jsxs("h1",{className:"text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-bold text-neutral-900 leading-[1.1] mb-8 tracking-tight",children:[" ,",w.jsx("br",{}),w.jsx("span",{className:"inline-block bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Silk"}),w.jsx("span",{className:"text-neutral-900",children:""}),w.jsx("br",{}),w.jsx("span",{className:"text-neutral-900",children:""})]})}),w.jsx(pn.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.5},className:"text-lg sm:text-xl text-neutral-600 mb-14 font-light leading-relaxed max-w-2xl mx-auto",children:"        "}),w.jsxs(pn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,delay:.7},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[w.jsx("button",{className:"group px-8 py-4 bg-neutral-900 text-white text-base font-medium rounded-full hover:bg-neutral-800 transition-all duration-500 hover:scale-[1.02] hover:shadow-2xl hover:shadow-neutral-900/20 min-w-[200px]",children:w.jsx("span",{className:"inline-block transition-transform duration-500 group-hover:translate-x-1",children:"   "})}),w.jsx("button",{className:"px-8 py-4 bg-white text-neutral-900 text-base font-medium rounded-full border border-neutral-200 hover:border-neutral-300 hover:bg-neutral-50 transition-all duration-500 hover:scale-[1.02] hover:shadow-xl min-w-[200px]",children:"  "})]})]}),w.jsx(pn.div,{animate:{y:[0,-30,0],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 right-[10%] w-[500px] h-[500px] bg-gradient-to-br from-indigo-300/20 to-purple-300/20 rounded-full blur-3xl"}),w.jsx(pn.div,{animate:{y:[0,40,0],opacity:[.2,.4,.2]},transition:{duration:10,repeat:1/0,ease:"easeInOut"},className:"absolute bottom-1/4 left-[10%] w-[400px] h-[400px] bg-gradient-to-br from-pink-300/20 to-rose-300/20 rounded-full blur-3xl"})]}),w.jsx("div",{className:"relative bg-neutral-50",children:fL.map((t,e)=>w.jsx("section",{className:"min-h-screen flex items-center justify-center px-6 py-20",children:w.jsxs("div",{className:"max-w-7xl w-full grid md:grid-cols-2 gap-16 items-center",children:[w.jsxs(pn.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0,amount:.3},className:e%2===0?"md:order-1":"md:order-2",children:[w.jsx("div",{className:"mb-6",children:w.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[w.jsx("div",{className:`w-2 h-2 rounded-full ${t.dotColor}`}),w.jsxs("span",{className:"text-xs font-semibold text-neutral-400 tracking-widest uppercase",children:["Step ",t.id]})]})}),w.jsx("h2",{className:"text-4xl sm:text-5xl md:text-6xl font-bold text-neutral-900 leading-[1.1] mb-8 whitespace-pre-line tracking-tight",children:t.title}),w.jsx("p",{className:"text-xl text-neutral-500 font-light leading-relaxed",children:t.subtitle})]}),w.jsx(pn.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0,amount:.3},className:`flex justify-center ${e%2===0?"md:order-2":"md:order-1"}`,children:w.jsx("div",{className:"relative",children:w.jsxs("div",{className:"w-[300px] h-[600px] bg-neutral-900 rounded-[48px] p-2 shadow-2xl shadow-neutral-900/30",children:[w.jsxs("div",{className:`w-full h-full bg-gradient-to-br ${t.color} rounded-[40px] flex items-center justify-center text-white overflow-hidden relative`,children:[w.jsx("div",{className:"absolute inset-0 bg-white/5"}),w.jsxs("div",{className:"relative z-10 text-center p-8",children:[w.jsx("div",{className:"text-7xl mb-6",children:e===0?"":e===1?"":""}),w.jsx("div",{className:"text-lg font-medium opacity-90"})]})]}),w.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 w-24 h-6 bg-neutral-900 rounded-full border-2 border-neutral-800"})]})})})]})},t.id))}),w.jsx("section",{className:"py-32 px-6 bg-neutral-50",children:w.jsxs("div",{className:"max-w-7xl mx-auto",children:[w.jsxs(pn.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-20",children:[w.jsx("div",{className:"inline-block mb-6 px-4 py-2 bg-neutral-100 rounded-full",children:w.jsx("span",{className:"text-sm font-semibold text-neutral-600 tracking-wide",children:" "})}),w.jsx("h2",{className:"text-4xl sm:text-5xl md:text-6xl font-bold text-neutral-900 tracking-tight",children:"Silk  "})]}),w.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{title:"Sound",desc:"     .",icon:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:w.jsx("path",{d:"M12 3v18M6 17v-10M18 17v-10"})}),gradient:"from-indigo-500 to-purple-500"},{title:"Shape",desc:"       .",icon:w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:[w.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),w.jsx("path",{d:"M12 18V6"}),w.jsx("path",{d:"M6 12h12"})]}),gradient:"from-pink-500 to-rose-500"},{title:"Color",desc:"       .",icon:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:w.jsx("path",{d:"M12 2L2 7l10 5 10-5L12 2zM2 17l10 5 10-5M2 12l10 5 10-5"})}),gradient:"from-teal-500 to-cyan-500"}].map((t,e)=>w.jsxs(pn.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:e*.15},viewport:{once:!0},whileHover:{y:-8,transition:{duration:.3}},className:"bg-neutral-50 rounded-3xl p-10 hover:shadow-xl hover:shadow-neutral-200/50 transition-all duration-500 cursor-pointer border border-neutral-200/50 group",children:[w.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${t.gradient} rounded-2xl flex items-center justify-center text-white mb-6 group-hover:scale-110 transition-transform duration-500 shadow-lg`,children:t.icon}),w.jsx("h3",{className:"text-2xl font-bold text-neutral-900 mb-4 tracking-tight",children:t.title}),w.jsx("p",{className:"text-base text-neutral-600 leading-relaxed font-light",children:t.desc})]},e))})]})})]})}const X_=()=>{const t=(location.hash||"#home").slice(1);return["home","profile","explore","write","login","signup","history"].includes(t)?t:"home"},J_=t=>t==="home"||t==="profile"||t==="explore";function mL(){const[t,e]=D.useState(X_()),[n,i]=D.useState(null),[o,l]=D.useState(!1);D.useEffect(()=>{const g=jo(Mn,y=>{i(y),l(!0)});return()=>g()},[]),D.useEffect(()=>{const g=()=>e(X_());return window.addEventListener("hashchange",g),()=>window.removeEventListener("hashchange",g)},[]);const u=o?n?t==="login"||t==="signup"?"#home":`#${t}`:t!=="login"&&t!=="signup"?"#login":`#${t}`:"#login";let d=null;o?n?d=w.jsxs(w.Fragment,{children:[t==="home"&&w.jsx(pL,{}),t==="profile"&&w.jsx(DA,{}),t==="explore"&&w.jsx(IA,{}),t==="write"&&w.jsx(vA,{}),t==="history"&&w.jsx(AA,{})]}):d=w.jsxs(w.Fragment,{children:[t==="login"&&w.jsx(kA,{}),t==="signup"&&w.jsx(PA,{}),t!=="login"&&t!=="signup"&&w.jsx("div",{className:"grid place-items-center h-[70vh] text-sm text-red-500",children:" ."})]}):d=w.jsx("div",{className:"grid place-items-center h-[70vh] text-sm text-gray-500",children:""});const f=o&&n&&J_(t),m=J_(t)?t:"home";return w.jsxs("div",{className:"min-h-screen bg-gray-50",children:[w.jsx(MA,{mode:"auto",nextHash:u}),w.jsx("main",{className:"max-w-5xl mx-auto px-4 py-4",children:d}),f&&w.jsx(mA,{current:m})]})}QC.createRoot(document.getElementById("root")).render(w.jsx(zC.StrictMode,{children:w.jsx(mL,{})}));
